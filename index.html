<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Dark mode initialization - must be first to prevent flash -->
  <script>
    (function() {
      try {
        var darkMode = localStorage.getItem('admin-dark-mode');
        console.log('[DarkMode HTML] localStorage value:', darkMode);
        if (darkMode === 'true') {
          document.documentElement.classList.add('dark');
          document.documentElement.style.background = '#111827';
          document.documentElement.style.colorScheme = 'dark';
          console.log('[DarkMode HTML] Applied dark mode');
        } else {
          document.documentElement.style.background = '#f9fafb';
          document.documentElement.style.colorScheme = 'light';
          console.log('[DarkMode HTML] Applied light mode');
        }
      } catch (e) {
        console.log('[DarkMode HTML] Error:', e);
      }
    })();
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SystemNext IT | Innovative IT Solutions & Digital Transformation</title>
  <meta name="description" content="Empowering businesses with cutting-edge IT services. From custom software development to e-commerce solutions, SystemNext IT delivers scalable tech solutions for modern enterprises.">
  <meta name="keywords" content="SystemNext IT, e-commerce platform, online store builder, digital transformation, software development, Bangladesh IT company, multi-tenant e-commerce, SaaS platform">
  <meta name="author" content="SystemNext IT">
  <meta name="theme-color" content="#6366F1">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://allinbangla.com/">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://allinbangla.com/">
  <meta property="og:title" content="SystemNext IT - Leading the Next Generation of Tech">
  <meta property="og:description" content="Discover professional IT services and e-commerce solutions tailored for modern enterprises. Build your online store with multi-tenant support & 24/7 expert assistance.">
  <meta property="og:image" content="https://allinbangla.com/icons/icon-512x512.png">
  <meta property="og:image:width" content="512">
  <meta property="og:image:height" content="512">
  <meta property="og:site_name" content="SystemNext IT">
  <meta property="og:locale" content="en_US">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://allinbangla.com/">
  <meta name="twitter:title" content="SystemNext IT | Digital Excellence & E-commerce Solutions">
  <meta name="twitter:description" content="Empowering businesses with cutting-edge IT services. Custom software development, e-commerce platforms & digital transformation.">
  <meta name="twitter:image" content="https://allinbangla.com/icons/icon-512x512.png">
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  [
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "SystemNext IT",
      "url": "https://allinbangla.com/",
      "logo": "https://allinbangla.com/icons/icon-512x512.png",
      "description": "Empowering businesses with cutting-edge IT services and e-commerce solutions",
      "foundingDate": "2023",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "BD"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "customer service",
        "availableLanguage": ["English", "Bengali"]
      },
      "sameAs": [
        "https://www.facebook.com/systemnextit",
        "https://www.linkedin.com/company/systemnextit"
      ]
    },
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "SystemNext IT E-commerce Platform",
      "applicationCategory": "BusinessApplication",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "BDT"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "reviewCount": "120",
        "bestRating": "5",
        "worstRating": "1"
      }
    },
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "SystemNext IT",
      "url": "https://allinbangla.com/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": "https://allinbangla.com/search?q={search_term_string}"
        },
        "query-input": "required name=search_term_string"
      }
    }
  ]
  </script>
  
  <!-- Critical Resource Hints - Load fonts ASAP -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- DNS Prefetch for faster subsequent requests -->
  <link rel="dns-prefetch" href="https://allinbangla.com">
  <link rel="dns-prefetch" href="https://images.allinbangla.com">
  <link rel="dns-prefetch" href="https://static.allinbangla.com">
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
  
  <!-- Preconnect to domains we'll need -->
  <link rel="preconnect" href="https://allinbangla.com">
  <link rel="preconnect" href="https://images.allinbangla.com" crossorigin>
  <link rel="preconnect" href="https://static.allinbangla.com" crossorigin>
  
  <!-- Font loading with display=swap for fast text rendering -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700&family=Lato:wght@300;400;700;900&display=swap" rel="stylesheet">
  
  <!-- Favicon and Touch Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-72x72.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-192x192.png">

  <!-- Early bootstrap prefetch with parallel secondary data -->
  <script>
    // Performance: Mark navigation start
    if (typeof performance !== 'undefined' && performance.mark) {
      performance.mark('app-init-start');
    }
    
    (function () {
      var h = location.hostname, p = h.split('.'), t = p[0];
      var PRIMARY_DOMAIN = 'allinbangla.com';
      var isSubdomainOfPrimary = h.endsWith('.' + PRIMARY_DOMAIN);
      var isPrimaryDomain = h === PRIMARY_DOMAIN || h === 'www.' + PRIMARY_DOMAIN;
      var isCustomDomain = !isSubdomainOfPrimary && !isPrimaryDomain && !h.includes('localhost') && p.length >= 2;
      
      // Skip for admin/superadmin subdomains or primary domain
      if (isSubdomainOfPrimary && (!t || t === 'www' || t === 'admin' || t === 'superadmin')) return;
      if (isPrimaryDomain) return;
      
      // For custom domains, resolve tenant first
      if (isCustomDomain) {
        var cachedTenantInfo;
        try { cachedTenantInfo = localStorage.getItem('custom_domain_' + h); } catch (e) { }
        if (cachedTenantInfo) {
          var info = JSON.parse(cachedTenantInfo);
          if (info.ts && (Date.now() - info.ts) < 24 * 60 * 60 * 1000) {
            t = info.subdomain;
            window.__CUSTOM_DOMAIN_TENANT__ = info;
          }
        }
        
        if (!window.__CUSTOM_DOMAIN_TENANT__) {
          var xhr = new XMLHttpRequest();
          xhr.open('GET', '/api/tenants/by-domain/' + h, false);
          try {
            xhr.send();
            if (xhr.status === 200) {
              var tenantInfo = JSON.parse(xhr.responseText);
              window.__CUSTOM_DOMAIN_TENANT__ = tenantInfo;
              t = tenantInfo.subdomain;
              try { localStorage.setItem('custom_domain_' + h, JSON.stringify({ ...tenantInfo, ts: Date.now() })); } catch (e) { }
            }
          } catch (e) { console.warn('Failed to resolve custom domain tenant', e); return; }
        }
      } else if (!isSubdomainOfPrimary) {
        return;
      }
      
      if (!t) return;
      
      // Check cached tenant ID for faster resolution
      var cachedId;
      try { cachedId = localStorage.getItem('tenant_id_' + t); } catch (e) { }
      var scope = cachedId || t;

      // Check sessionStorage cache first (5 min TTL)
      var CACHE_TTL = 5 * 60 * 1000;
      var bootstrapCacheKey = 'bs_' + scope;
      var secondaryCacheKey = 'sc_' + scope;

      try {
        var cachedBootstrap = sessionStorage.getItem(bootstrapCacheKey);
        if (cachedBootstrap) {
          var parsed = JSON.parse(cachedBootstrap);
          if (parsed.ts && (Date.now() - parsed.ts) < CACHE_TTL) {
            window.__BOOTSTRAP_DATA__ = parsed.data;
            window.__BOOTSTRAP_READY__ = true;
            setTimeout(function () { fetchBootstrap(true); }, 100);
            var cachedSecondary = sessionStorage.getItem(secondaryCacheKey);
            if (cachedSecondary) {
              var parsedSec = JSON.parse(cachedSecondary);
              if (parsedSec.ts && (Date.now() - parsedSec.ts) < CACHE_TTL) {
                window.__SECONDARY_DATA__ = parsedSec.data;
              }
            }
            return;
          }
        }
      } catch (e) { }

      function fetchBootstrap(isBackground) {
        var x1 = new XMLHttpRequest();
        x1.open('GET', '/api/tenant-data/' + scope + '/bootstrap', true);
        x1.onload = function () {
          if (x1.status === 200) {
            try {
              var data = JSON.parse(x1.responseText);
              if (!isBackground) {
                window.__BOOTSTRAP_DATA__ = data;
                window.__BOOTSTRAP_READY__ = true;
              }
              try {
                sessionStorage.setItem(bootstrapCacheKey, JSON.stringify({ data: data, ts: Date.now() }));
              } catch (e) { }
            } catch (e) { }
          }
        };
        x1.send();
      }

      fetchBootstrap(false);

      var x2 = new XMLHttpRequest();
      x2.open('GET', '/api/tenant-data/' + scope + '/secondary', true);
      x2.onload = function () {
        if (x2.status === 200) {
          try {
            var data = JSON.parse(x2.responseText);
            window.__SECONDARY_DATA__ = data;
            try {
              sessionStorage.setItem(secondaryCacheKey, JSON.stringify({ data: data, ts: Date.now() }));
            } catch (e) { }
          } catch (e) { }
        }
      };
      x2.send();
    })();
  </script>
  
  <!-- Critical CSS - Inline for fastest render -->
  <style>
    /* Critical CSS for above-the-fold content */
    *, *::before, *::after { box-sizing: border-box; }
    html { -webkit-text-size-adjust: 100%; line-height: 1.5; }
    body { margin: 0; font-family: 'Inter', system-ui, -apple-system, sans-serif; }
    
    #preload-skeleton {
      opacity: 1;
      transition: opacity 0.2s ease-out;
    }
    #preload-skeleton.done {
      opacity: 0;
      pointer-events: none;
    }
    .skeleton-bone {
      background: linear-gradient(90deg, #e5e7eb 25%, #f3f4f6 50%, #e5e7eb 75%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
      border-radius: 0.25rem;
    }
    .skeleton-search-bar { display: none; }
    @media (min-width: 768px) {
      .skeleton-search-bar { display: block; }
    }
    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
  </style>
</head>

<body style="background: linear-gradient(to bottom, #ffcaff, #cbfff6);">
  <div id="root">
    <div id="preload-skeleton">
      <div style="min-height: 100vh;">
        <!-- Header skeleton -->
        <div style="background: rgba(255,255,255,0.85); backdrop-filter: blur(12px); position: sticky; top: 0; z-index: 50; padding: 0.75rem 1rem; border-bottom: 1px solid rgba(255,255,255,0.3); box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <div style="max-width: 80rem; margin: auto; display: flex; align-items: center; justify-content: space-between; gap: 1rem;">
            <div class="skeleton-bone" style="height: 2.5rem; width: 8rem;"></div>
            <div class="skeleton-bone skeleton-search-bar" style="height: 2.5rem; flex: 1; max-width: 42rem; border-radius: 9999px;"></div>
            <div style="display: flex; gap: 0.75rem;">
              <div class="skeleton-bone" style="height: 2.5rem; width: 2.5rem; border-radius: 9999px;"></div>
              <div class="skeleton-bone" style="height: 2.5rem; width: 2.5rem; border-radius: 9999px;"></div>
            </div>
          </div>
        </div>
        <!-- Hero skeleton -->
        <div style="max-width: 80rem; margin: auto; padding: 1rem;">
          <div class="skeleton-bone" style="width: 100%; padding-top: 40%; border-radius: 1rem;"></div>
        </div>
        <!-- Categories skeleton -->
        <div style="max-width: 80rem; margin: auto; padding: 1rem; padding-top: 0;">
          <div style="display: flex; gap: 0.75rem; overflow: hidden; padding: 0.5rem 0;">
            <!-- <div class="skeleton-bone" style="height: 2.5rem; width: 7rem; border-radius: 9999px; flex-shrink: 0;"></div>
            <div class="skeleton-bone" style="height: 2.5rem; width: 7rem; border-radius: 9999px; flex-shrink: 0;"></div>
            <div class="skeleton-bone" style="height: 2.5rem; width: 7rem; border-radius: 9999px; flex-shrink: 0;"></div>
            <div class="skeleton-bone" style="height: 2.5rem; width: 7rem; border-radius: 9999px; flex-shrink: 0;"></div>
            <div class="skeleton-bone" style="height: 2.5rem; width: 7rem; border-radius: 9999px; flex-shrink: 0;"></div>
            <div class="skeleton-bone" style="height: 2.5rem; width: 7rem; border-radius: 9999px; flex-shrink: 0;"></div> -->
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Main app entry - Use type="module" for tree-shaking -->
  <script type="module" src="/entry-client.tsx"></script>
  
  <!-- Performance measurement -->
  <script>
    if (typeof performance !== 'undefined' && performance.mark) {
      performance.mark('app-init-end');
      performance.measure('app-initialization', 'app-init-start', 'app-init-end');
    }
  </script>
</body>
</html>
