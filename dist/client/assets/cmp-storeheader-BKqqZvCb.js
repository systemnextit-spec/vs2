const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pkg-toast-Dpd4iwUK.js","assets/react-core-KcGD0Z1V.js","assets/pkg-eventemitter3-CXfM2dhT.js","assets/pkg-goober-N6sOClW1.js"])))=>i.map(i=>d[i]);
import{_ as Re}from"./cmp-approutes-tsx-T9J5ygBG.js";import{j as n}from"./react-jsx-runtime-BBsywpoz.js";import{r as t}from"./react-core-KcGD0Z1V.js";import{A as tt}from"./store-header-DNV3DrNl.js";import{M as st}from"./store-header-mobile-BhofyFSn.js";import{D as rt}from"./store-header-desktop-d_2--QaS.js";import{S as ot}from"./store-header-modals-utruRZpO.js";import{I as nt}from"./store-header-search-B8Q8k4Nc.js";import"./cmp-skeletonloaders-tsx-Durrj7lG.js";import"./pkg-eventemitter3-CXfM2dhT.js";import"./cmp-admincustomization-DQ3Wytgo.js";import"./pkg-toast-Dpd4iwUK.js";import"./pkg-goober-N6sOClW1.js";import"./cmp-gallerypicker-tsx-CnyOus4y.js";import"./cmp-dashboard-CvCpAVHs.js";import"./pkg-socket-B8R9XNBE.js";import"./pkg-engine-io-C8bqYME4.js";import"./pkg-@socket.io-component-emitter-B3A4JZne.js";import"./pkg-socket.io-parser-C0hgSYjy.js";import"./cmp-addnewduemodal-tsx-OjU2U-0e.js";import"./icons-chunk-AVFeydwE.js";import"./cmp-modern-dashboard-C6grFkCj.js";import"./cmp-invoiceprinttemplate-tsx-CUwUe6zE.js";import"./pkg-papaparse-BEpmA8em.js";import"./pkg-xlsx-BljOZNTS.js";import"./page-adminnote-C1Ob2d7z.js";import"./cmp-duehistorymodal-tsx-KQ79TbYj.js";import"./cmp-landingpagecomponents-tsx-r6jaT4TN.js";const O={error:g=>Re(()=>import("./pkg-toast-Dpd4iwUK.js"),__vite__mapDeps([0,1,2,3])).then(i=>i.toast.error(g)),success:g=>Re(()=>import("./pkg-toast-Dpd4iwUK.js"),__vite__mapDeps([0,1,2,3])).then(i=>i.toast.success(g))},Ht=g=>{const{onTrackOrder:i,onHomeClick:G,wishlistCount:K,wishlist:A,onToggleWishlist:R,cart:v,onToggleCart:T,onCheckoutFromCart:L,user:U,onLoginClick:J,onLogoutClick:ve,onProfileClick:Q,logo:X,websiteConfig:r,searchValue:x,onSearchChange:Y,onCategoriesClick:E,onProductsClick:Te,categoriesList:h,onCategorySelect:V,categories:Z=[],subCategories:ee=[],childCategories:te=[],brands:se=[],tags:re=[],productCatalog:C,onProductClick:d,onMobileMenuOpenRef:H,tenantId:Le=""}=g,[xe,P]=t.useState(!1),oe=t.useCallback(()=>{P(!0)},[]),Ee=t.useCallback(e=>{P(!1),d?.(e)},[d]),Ve=t.useMemo(()=>Array.isArray(v)?v:[],[v]),He=t.useMemo(()=>Array.isArray(A)?A:[],[A]),S=t.useMemo(()=>(Array.isArray(C)&&C.length?C:[]).filter(s=>!s.status||s.status==="Active"),[C]),m=r?.headerLogo||X||null,_=t.useMemo(()=>m?`logo-${m.slice(-20)}`:"no-logo",[m]),[Pe,D]=t.useState(!1),[_e,ne]=t.useState(!1),[De,b]=t.useState(!1),[je,ae]=t.useState(!1),[Be,We]=t.useState(!1),[Fe,Ne]=t.useState("categories"),[ie,j]=t.useState(!1),[ze,B]=t.useState(!1),[$e,k]=t.useState(!1),[W,ce]=t.useState(0),qe=t.useRef(()=>b(!0));t.useEffect(()=>{H&&H(qe.current)},[H]);const[y,Ge]=t.useState(!1),[F,N]=t.useState(!1),[w,p]=t.useState(""),[Ke,M]=t.useState(x??""),z=t.useRef(null),$=t.useRef(null),q=t.useRef(null),o=t.useRef(null),le=t.useRef(null),ue=Ve,ge=He,he=ue.length,me=typeof K=="number"?K:ge.length,a=F&&w?w:Ke,f=t.useMemo(()=>r?.searchHints?r.searchHints.split(/[\n,|]/).map(e=>e.trim()).filter(Boolean):["Search smartphones","Find the best deals","Discover new gadgets"],[r?.searchHints]),pe=f[W]||"",fe=Array.isArray(Z)?Z:[],Ce=Array.isArray(ee)?ee:[],de=Array.isArray(te)?te:[],Se=Array.isArray(se)?se:[],be=Array.isArray(re)?re:[],Ue=t.useMemo(()=>[{key:"categories",label:"Categories",items:Array.isArray(h)&&h.length?h:fe.map(e=>e.name)},{key:"subCategories",label:"Sub Categories",items:Ce.map(e=>e.name)},{key:"childCategories",label:"Child Categories",items:de.map(e=>e.name)},{key:"brand",label:"Brand",items:Se.map(e=>e.name)},{key:"tags",label:"Tags",items:be.map(e=>`tag:${e.name}`)}],[h,fe,Ce,de,Se,be]),I=t.useMemo(()=>{if(!a.trim()||!S.length)return[];const e=a.trim().toLowerCase();return S.filter(s=>{const l=s.name?.toLowerCase().includes(e),u=s.category?.toLowerCase().includes(e),Ae=s.brand?.toLowerCase().includes(e);return l||u||Ae}).slice(0,6)},[a,S]),c=t.useCallback(e=>{Y?.(e)},[Y]),ke=t.useCallback(e=>{M(e),c(e)},[c]),ye=t.useCallback(e=>{j(!1),M(""),c(""),d?.(e)},[d,c]),Je=t.useCallback(e=>{T?T(e):O.error("Cart unavailable right now")},[T]),Qe=t.useCallback(e=>{R?R(e):O.error("Wishlist unavailable right now")},[R]),Xe=t.useCallback(e=>{L?(L(e),k(!1)):O.error("Checkout unavailable right now")},[L]),Ye=t.useCallback(e=>{Ne(s=>s===e?"":e)},[]),Ze=t.useCallback(e=>{V?.(e),E?.(),b(!1)},[E,V]),we=t.useCallback(e=>{e&&O.error(e)},[]),Me=t.useCallback(()=>{const e=le.current;if(!e)return null;const s=new e;return s.lang=r?.voiceSearchLanguage||"en-US",s.interimResults=!0,s.maxAlternatives=1,s.onresult=l=>{if(!l?.results)return;const u=Array.from(l.results).map(et=>et?.[0]?.transcript||"").join(" ").trim();l.results[l.results.length-1]?.isFinal?(u&&(M(u),c(u)),p("")):p(u)},s.onstart=()=>{p(""),N(!0)},s.onend=()=>{N(!1),p(""),o.current=null},s.onerror=()=>{N(!1),p(""),o.current=null},s},[c,r?.voiceSearchLanguage]),Ie=t.useCallback(async()=>{if(!y){we("Voice search is not available in this browser.");return}if(o.current){try{o.current.abort?.()}catch{}o.current=null}const e=Me();if(e){o.current=e;try{e.start()}catch{o.current=null}}},[y,Me,we]);t.useEffect(()=>{if(typeof window>"u")return;const e=window.SpeechRecognition||window.webkitSpeechRecognition||null;return le.current=e,Ge(!!e),()=>{o.current?.stop?.(),o.current=null}},[]),t.useEffect(()=>{ce(0)},[f.length]),t.useEffect(()=>{if(f.length<=1)return;const e=setInterval(()=>{ce(s=>(s+1)%f.length)},3500);return()=>clearInterval(e)},[f.length]),t.useEffect(()=>{M(x??"")},[x]),t.useEffect(()=>{j(I.length>0&&a.trim().length>0)},[I.length,a]),t.useEffect(()=>{const e=s=>{z.current&&!z.current.contains(s.target)&&D(!1),$.current&&!$.current.contains(s.target)&&ne(!1),q.current&&!q.current.contains(s.target)&&j(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const Oe=t.useMemo(()=>({containerRef:q,activeSearchValue:a,onInputChange:ke,suggestions:I,isSuggestionsOpen:ie,onSuggestionClick:ye,activeHint:pe,activeHintIndex:W,isListening:F,liveTranscript:w,supportsVoiceSearch:y,onVoiceSearch:Ie,onVisualSearch:oe}),[a,ke,I,ie,ye,pe,W,F,w,y,Ie,oe]);return n.jsxs(n.Fragment,{children:[n.jsx(tt,{noticeText:r?.adminNoticeText}),n.jsxs("header",{className:"store-header w-full bg-white shadow-sm sticky top-0 z-50 transition-colors duration-300",children:[n.jsx(st,{resolvedHeaderLogo:m,logoKey:_,onHomeClick:G,wishlistBadgeCount:me,cartBadgeCount:he,onWishlistOpen:()=>B(!0),onCartOpen:()=>k(!0),onAccountClick:U?Q:J,onMenuOpen:()=>b(!0),onSearchOpen:()=>ae(!0),websiteConfig:r}),n.jsx(rt,{resolvedHeaderLogo:m,logoKey:_,onHomeClick:G,searchProps:Oe,wishlistBadgeCount:me,cartBadgeCount:he,onWishlistOpen:()=>B(!0),onCartOpen:()=>k(!0),user:U,onLoginClick:J,onProfileClick:Q,onTrackOrder:i,onLogoutClick:ve,isMenuOpen:Pe,onMenuToggle:()=>D(e=>!e),onMenuClose:()=>D(!1),menuRef:z,categoriesList:h,onCategoriesClick:E,onCategorySelect:V,categoryMenuRef:$,isCategoryMenuOpen:_e,onCategoryMenuOpen:ne,onProductsClick:Te,websiteConfig:r})]}),n.jsx(ot,{onCartToggle:Je,onWishlistToggle:Qe,catalogSource:S,cartItems:ue,wishlistItems:ge,isWishlistDrawerOpen:ze,onWishlistClose:()=>B(!1),isCartDrawerOpen:$e,onCartClose:()=>k(!1),onCheckoutFromCart:Xe,isMobileMenuOpen:De,onMobileMenuClose:()=>b(!1),isMobileSearchOpen:je,onMobileSearchClose:()=>ae(!1),searchProps:Oe,logo:X,logoKey:_,catalogGroups:Ue,activeCatalogSection:Fe,isCatalogDropdownOpen:Be,onCatalogDropdownToggle:()=>We(e=>!e),onCatalogSectionToggle:Ye,onCatalogItemClick:Ze,onTrackOrder:i}),n.jsx(nt,{isOpen:xe,onClose:()=>P(!1),tenantId:Le||r?.tenantId||"",onProductClick:Ee})]})};export{Ht as StoreHeader};
