const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/page-adminlogin-BxNBlBi2.js","assets/react-jsx-runtime-BBsywpoz.js","assets/react-core-KcGD0Z1V.js","assets/pkg-eventemitter3-CXfM2dhT.js","assets/pkg-toast-Dpd4iwUK.js","assets/pkg-goober-N6sOClW1.js","assets/cmp-addnewduemodal-tsx-OjU2U-0e.js","assets/icons-chunk-AVFeydwE.js"])))=>i.map(i=>d[i]);
import{_ as L}from"./cmp-approutes-tsx-DORRjFJg.js";import{j as i}from"./react-jsx-runtime-BBsywpoz.js";import{r as t}from"./react-core-KcGD0Z1V.js";import{l as d,m as g,n as U,o as b}from"./cmp-addnewduemodal-tsx-OjU2U-0e.js";import{A as _}from"./page-adminapp-DI-qB8z7.js";import{L as h}from"./icons-chunk-AVFeydwE.js";import"./cmp-skeletonloaders-tsx-Durrj7lG.js";import"./pkg-eventemitter3-CXfM2dhT.js";import"./cmp-dashboard-CwyHj6aR.js";import"./pkg-socket-D1bUdbwx.js";import"./pkg-engine-io-BZqIjJKj.js";import"./pkg-@socket.io-component-emitter-Dkula2eQ.js";import"./pkg-socket.io-parser-CafqElEs.js";import"./cmp-admincustomization-BgTFiuh2.js";import"./pkg-toast-Dpd4iwUK.js";import"./pkg-goober-N6sOClW1.js";import"./cmp-gallerypicker-tsx-T-_pXSB3.js";import"./cmp-modern-dashboard-C6grFkCj.js";import"./cmp-invoiceprinttemplate-tsx-CUwUe6zE.js";import"./pkg-papaparse-BEpmA8em.js";import"./pkg-xlsx-BljOZNTS.js";import"./page-adminnote-C1Ob2d7z.js";import"./cmp-duehistorymodal-tsx-KQ79TbYj.js";import"./cmp-aichatassistant-tsx-Dg6eI0Im.js";import"./recharts-component-responsivecontainer-DfQgbc7s.js";import"./pkg-clsx-B-dksMZM.js";import"./pkg-lodash-CH_GMSlH.js";import"./pkg-react-is-DC4omQzd.js";import"./recharts-util-datautils-CozywqZh.js";import"./recharts-util-logutils-DVrmnGst.js";import"./recharts-util-reactutils-Is6lFQr1.js";import"./recharts-util-shallowequal-DtegYOaT.js";import"./recharts-util-types-TQdZ910Z.js";import"./recharts-chart-piechart-v_sB_YbM.js";import"./recharts-chart-generatecategoricalchart-BFEZL4S4.js";import"./pkg-tiny-invariant-BaFNuDhB.js";import"./recharts-container-surface-B1pxCyr0.js";import"./recharts-container-layer-zUiNMosr.js";import"./recharts-component-tooltip-CT2QRPIL.js";import"./recharts-component-defaulttooltipcontent-B5R96pMl.js";import"./recharts-component-tooltipboundingbox-l5Y55KS1.js";import"./recharts-util-tooltip-jLnm8GQN.js";import"./recharts-util-global-C7iY84J1.js";import"./recharts-util-payload-CI_LN7YL.js";import"./recharts-component-legend-DNyBi4NO.js";import"./recharts-component-defaultlegendcontent-DLx9hDB2.js";import"./recharts-shape-symbols-BgkIYqLq.js";import"./pkg-d3-shape-N9vbm9rT.js";import"./pkg-d3-path-CimkQT29.js";import"./recharts-shape-dot-XvSm0ov4.js";import"./recharts-shape-rectangle-CWuur83B.js";import"./pkg-react-smooth-DrFaRA5B.js";import"./pkg-prop-types-CNoiFQcK.js";import"./pkg-fast-equals-CqUluVxK.js";import"./recharts-cartesian-brush-IGJ9ENbJ.js";import"./recharts-component-text-BFSAMVpI.js";import"./recharts-util-domutils-CpG4EuV8.js";import"./recharts-util-reducecsscalc-BHV94Rup.js";import"./recharts-util-chartutils-xkzwGM0S.js";import"./pkg-victory-vendor-mCffhpDu.js";import"./pkg-d3-scale-CTOhuMsp.js";import"./pkg-internmap-BkD7Hj8s.js";import"./pkg-d3-array-g_qRI3rN.js";import"./pkg-d3-time-format-BwrBB82O.js";import"./pkg-d3-time-g4X7MKFT.js";import"./pkg-d3-interpolate-rWsnKZ0M.js";import"./pkg-d3-color-9lF95FHy.js";import"./pkg-d3-format-CzD4bSOQ.js";import"./recharts-cartesian-errorbar-DOkATP1J.js";import"./recharts-util-getlegendprops-C-SxjwYw.js";import"./pkg-recharts-scale-DGlR5UMc.js";import"./pkg-decimal.js-light-DQE-3iDJ.js";import"./recharts-util-cssprefixutils-DL4DResu.js";import"./recharts-util-detectreferenceelementsdomain-Bq6b8DLL.js";import"./recharts-cartesian-referencedot-C7X6z8Y0.js";import"./recharts-component-label-BikgrGZD.js";import"./recharts-util-polarutils-BkfcQsLh.js";import"./recharts-util-ifoverflowmatches-IpHdkY0E.js";import"./recharts-util-cartesianutils-ay8e_-ML.js";import"./recharts-cartesian-bar-ByT8u3AN.js";import"./recharts-component-cell-DXyV_-6l.js";import"./recharts-component-labellist-DFJ3Oa0j.js";import"./recharts-util-barutils-Gm8of_3k.js";import"./recharts-util-activeshapeutils-Drwk7ebA.js";import"./recharts-shape-trapezoid-iA5Whcq8.js";import"./recharts-shape-sector-BMEMU1Eb.js";import"./recharts-cartesian-referenceline-B3_6DYTU.js";import"./recharts-es6-context-C_jymOAj.js";import"./recharts-util-calculateviewbox-DUHSQcO0.js";import"./recharts-cartesian-referencearea-CpZGlXbb.js";import"./recharts-util-events-B2jJkyB5.js";import"./recharts-chart-accessibilitymanager-WhgZg7Ak.js";import"./recharts-util-isdomainspecifiedbyuser-BpKFYaHU.js";import"./recharts-component-cursor-Bvli-adJ.js";import"./recharts-shape-curve-8kQuyDyc.js";import"./recharts-shape-cross-DIlgDwmt.js";import"./recharts-util-cursor-Bqnixj4L.js";import"./recharts-polar-polarangleaxis-CNHtMo60.js";import"./recharts-shape-polygon-De-3ny65.js";import"./recharts-polar-polarradiusaxis-D3IBcloK.js";import"./recharts-polar-pie-B10xAnDA.js";import"./recharts-chart-barchart-YG-AfXto.js";import"./recharts-cartesian-xaxis-1jaO16IA.js";import"./recharts-cartesian-cartesianaxis-BMKFyaAl.js";import"./recharts-cartesian-getticks-CfTZ6mdt.js";import"./recharts-util-tickutils-ezXbFe0v.js";import"./recharts-util-geteverynthwithcondition-BgaU-CZC.js";import"./recharts-cartesian-getequidistantticks-CPdohMnp.js";import"./recharts-cartesian-yaxis-NfDSQe8W.js";import"./recharts-cartesian-cartesiangrid-B2auDwFR.js";import"./page-adminduelist-B5Y7eGO9.js";import"./cmp-subscriptionrenewalpopup-tsx-laai0A3h.js";import"./cmp-subscriptionnotification-tsx-CfCms1bK.js";const v=t.lazy(()=>L(()=>import("./page-adminlogin-BxNBlBi2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),Nr=e=>{const[x,s]=t.useState(null),[c,p]=t.useState(null),[A,n]=t.useState({}),[y,j]=t.useState(!0);t.useEffect(()=>{e.parentUser&&e.parentUser.image!==c?.image&&p(e.parentUser)},[e.parentUser]),t.useEffect(()=>{(async()=>{try{const r=d(),o=g();if(r){if(p(r),Array.isArray(o)){const m={};o.forEach(a=>{m[a.resource]=a.actions}),n(m)}else o&&typeof o=="object"&&n(o);s(!0),b().then(({user:m,permissions:a})=>{if(p(m),Array.isArray(a)){const u={};a.forEach(f=>{u[f.resource]=f.actions}),n(u)}}).catch(()=>{console.log("Background refresh failed, using stored session")})}else s(!1)}catch(r){console.error("Session validation failed:",r),s(!1)}finally{j(!1)}})()},[]);const S=t.useCallback(async()=>{const l=d(),r=g();if(p(l),Array.isArray(r)){const o={};r.forEach(m=>{o[m.resource]=m.actions}),n(o)}else r&&typeof r=="object"&&n(r);s(!0)},[]),E=t.useCallback(()=>{U(),p(null),s(!1),e.onLogout()},[e.onLogout]);return y?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-900",children:i.jsx(h,{className:"w-10 h-10 animate-spin text-indigo-500"})}):x===!1?i.jsx(t.Suspense,{fallback:null,children:i.jsx(v,{onLoginSuccess:S})}):i.jsx(t.Suspense,{fallback:i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-900",children:i.jsx(h,{className:"w-10 h-10 animate-spin text-indigo-500"})}),children:i.jsx(_,{onRefreshTenants:function(){throw new Error("Function not implemented.")},isTenantCreating:!1,deletingTenantId:null,...e,user:c,userPermissions:A,onLogout:E})})};export{Nr as default};
