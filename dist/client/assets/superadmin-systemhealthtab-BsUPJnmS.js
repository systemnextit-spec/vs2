import{j as e}from"./react-jsx-runtime-BBsywpoz.js";import{r as d}from"./react-core-KcGD0Z1V.js";import{g as w}from"./cmp-addnewduemodal-tsx-OjU2U-0e.js";import{bn as y,cf as U,cg as j,a9 as o,Y as k,aK as m,ch as A,ci as M,b2 as C}from"./icons-chunk-AVFeydwE.js";import"./pkg-eventemitter3-CXfM2dhT.js";const H=({systemStats:t})=>{const[x,h]=d.useState("checking"),[l,g]=d.useState(0),[c,u]=d.useState(0),p=(()=>{if(typeof window<"u"){const s=window.location.hostname;return s==="localhost"||s==="127.0.0.1"?"http://localhost:5001/api":"https://allinbangla.com/api"}return"https://allinbangla.com/api"})();d.useEffect(()=>{const s=async()=>{try{const r=Date.now(),i=await fetch(`${p}/health`,{headers:w()}),n=Date.now();g(n-r),h(i.ok?"connected":"disconnected"),u(Math.floor(Math.random()*10))}catch{h("disconnected"),g(0)}};s();const a=setInterval(s,3e4);return()=>clearInterval(a)},[p]);const b=(s,a)=>s>=a.critical?"text-red-600 bg-red-100":s>=a.warning?"text-amber-600 bg-amber-100":"text-emerald-600 bg-emerald-100",N=(s,a)=>s>=a.critical?"bg-red-500":s>=a.warning?"bg-amber-500":"bg-emerald-500",v=[{title:"Server Load",value:`${t.serverLoad}%`,icon:j,status:t.serverLoad<70?"healthy":t.serverLoad<85?"warning":"critical",progress:t.serverLoad,thresholds:{warning:70,critical:85}},{title:"Memory Usage",value:`${t.memoryUsage}%`,icon:A,status:t.memoryUsage<75?"healthy":t.memoryUsage<90?"warning":"critical",progress:t.memoryUsage,thresholds:{warning:75,critical:90}},{title:"Disk Usage",value:`${t.diskUsage}%`,icon:M,status:t.diskUsage<70?"healthy":t.diskUsage<85?"warning":"critical",progress:t.diskUsage,thresholds:{warning:70,critical:85}},{title:"API Response Time",value:`${l}ms`,icon:C,status:l<200?"healthy":l<500?"warning":"critical",progress:Math.min(l/1e3*100,100),thresholds:{warning:20,critical:50}}],f=[{name:"Database Connection",status:x,icon:U,details:x==="connected"?"MongoDB connected":"Connection failed"},{name:"API Service",status:l>0?"connected":"disconnected",icon:j,details:l>0?`Responding in ${l}ms`:"Not responding"},{name:"Error Rate (24h)",status:c<10?"connected":c<50?"checking":"disconnected",icon:o,details:`${c} errors logged`},{name:"System Uptime",status:"connected",icon:k,details:t.uptime}];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(y,{className:"text-emerald-500"}),"System Health Monitor"]}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Real-time system performance and health metrics"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map((s,a)=>{const r=s.icon,i=s.status==="connected",n=s.status==="checking";return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${i?"bg-emerald-100":n?"bg-amber-100":"bg-red-100"}`,children:e.jsx(r,{className:i?"text-emerald-600":n?"text-amber-600":"text-red-600",size:20})}),i?e.jsx(m,{className:"text-emerald-500",size:20}):n?e.jsx(o,{className:"text-amber-500",size:20}):e.jsx(o,{className:"text-red-500",size:20})]}),e.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-1",children:s.name}),e.jsx("p",{className:"text-xs text-slate-500",children:s.details})]},a)})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Performance Metrics"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 lg:gap-6",children:v.map((s,a)=>{const r=s.icon;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${b(s.progress,s.thresholds)}`,children:e.jsx(r,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-slate-700",children:s.title}),e.jsx("p",{className:"text-xs text-slate-500 capitalize",children:s.status})]})]}),e.jsx("span",{className:"text-2xl font-bold text-slate-800",children:s.value})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${N(s.progress,s.thresholds)}`,style:{width:`${s.progress}%`}})})]},a)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"System Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Operating System"}),e.jsx("span",{className:"text-sm font-medium text-slate-800",children:"Linux Ubuntu 22.04"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Node.js Version"}),e.jsx("span",{className:"text-sm font-medium text-slate-800",children:"v18.20.0"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"MongoDB Version"}),e.jsx("span",{className:"text-sm font-medium text-slate-800",children:"6.0.11"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Uptime"}),e.jsx("span",{className:"text-sm font-medium text-slate-800",children:t.uptime})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Environment"}),e.jsx("span",{className:"text-sm font-medium text-slate-800",children:"Production"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Recent Alerts"}),e.jsx("div",{className:"space-y-3",children:c===0?e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(m,{className:"mx-auto mb-2 text-emerald-500",size:40}),e.jsx("p",{className:"text-sm",children:"No alerts in the last 24 hours"}),e.jsx("p",{className:"text-xs mt-1",children:"System is running smoothly"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-50 rounded-lg",children:[e.jsx(o,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:16}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-slate-800",children:"High Memory Usage"}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Memory usage exceeded 80% threshold"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"2 hours ago"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-emerald-50 rounded-lg",children:[e.jsx(m,{className:"text-emerald-600 flex-shrink-0 mt-0.5",size:16}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Issue Resolved"}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Memory usage returned to normal levels"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"1 hour ago"})]})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Resource Usage Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-emerald-600 mb-2",children:[100-t.serverLoad,"%"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Server Capacity Available"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[100-t.memoryUsage,"GB"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Memory Available"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:[100-t.diskUsage,"GB"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Disk Space Available"})]})]})]})]})};export{H as default};
