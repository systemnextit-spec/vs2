import{j as e}from"./react-jsx-runtime-BBsywpoz.js";import{r}from"./react-core-KcGD0Z1V.js";import{E as T,C as E,s as ce,f as pe}from"./cmp-dashboard-CvCpAVHs.js";import{n as ge}from"./cmp-admincustomization-DQ3Wytgo.js";import{ae as G,S as he,P as q,aB as ue,Y as fe,Q as ye,v as be,ag as je,aI as ve,C as Ne,b as we,I as Q,aE as V,T as W,X}from"./icons-chunk-AVFeydwE.js";import"./pkg-eventemitter3-CXfM2dhT.js";import"./pkg-socket-B8R9XNBE.js";import"./pkg-engine-io-C8bqYME4.js";import"./pkg-@socket.io-component-emitter-B3A4JZne.js";import"./pkg-socket.io-parser-C0hgSYjy.js";import"./cmp-approutes-tsx-T9J5ygBG.js";import"./cmp-skeletonloaders-tsx-Durrj7lG.js";import"./cmp-addnewduemodal-tsx-OjU2U-0e.js";import"./cmp-modern-dashboard-C6grFkCj.js";import"./pkg-toast-Dpd4iwUK.js";import"./pkg-goober-N6sOClW1.js";import"./cmp-invoiceprinttemplate-tsx-CUwUe6zE.js";import"./pkg-papaparse-BEpmA8em.js";import"./pkg-xlsx-BljOZNTS.js";import"./page-adminnote-C1Ob2d7z.js";import"./cmp-duehistorymodal-tsx-KQ79TbYj.js";import"./cmp-gallerypicker-tsx-CnyOus4y.js";function Ce(y){const n=new Date,p=d=>d.toISOString().slice(0,10);switch(y){case"today":return{from:p(n),to:p(n)};case"this_week":{const d=n.getDay(),A=d===0?6:d-1,i=new Date(n);return i.setDate(n.getDate()-A),{from:p(i),to:p(n)}}case"this_month":return{from:`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-01`,to:p(n)};case"this_year":return{from:`${n.getFullYear()}-01-01`,to:p(n)};case"all":return{};default:return{}}}const H={all:"All Time",today:"Today",this_week:"This Week",this_month:"This Month",this_year:"This Year",custom:"Custom Range"},Ve=({tenantId:y})=>{const[n,p]=r.useState(""),[d,A]=r.useState("All"),[i,J]=r.useState(""),[b,K]=r.useState("this_month"),[F,Z]=r.useState(""),[$,ee]=r.useState(""),[g,u]=r.useState([]),[M,C]=r.useState([]),[te,L]=r.useState(!1),[O,_]=r.useState(null),[f,B]=r.useState(1),I=15,[se,j]=r.useState(!1),[l,o]=r.useState({status:"Draft"}),[h,v]=r.useState(null),[ae,S]=r.useState(!1),[D,k]=r.useState(""),[N,P]=r.useState(null);r.useEffect(()=>{y&&(ce(y),pe(y))},[y]);const x=r.useMemo(()=>b==="custom"?{from:F||void 0,to:$||void 0}:Ce(b),[b,F,$]),m=r.useMemo(()=>g.filter(t=>(d==="All"||t.status===d)&&(!i||t.category===i)&&(!n||t.name.toLowerCase().includes(n.toLowerCase()))&&(!x.from||t.date>=x.from)&&(!x.to||t.date<=x.to)),[g,d,i,n,x]),U=r.useMemo(()=>{const t=(f-1)*I;return m.slice(t,t+I)},[m,f]),w=r.useMemo(()=>m.reduce((t,s)=>t+s.amount,0),[m]),R=r.useMemo(()=>{const t=new Map;return m.forEach(s=>t.set(s.category,(t.get(s.category)||0)+s.amount)),Array.from(t.entries()).sort((s,a)=>a[1]-s[1]).slice(0,5)},[m]),re=r.useMemo(()=>{const t=new Date().toISOString().slice(0,10);return g.filter(s=>s.date===t).reduce((s,a)=>s+a.amount,0)},[g]),le=r.useMemo(()=>{const t=new Date,s=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`;return g.filter(a=>a.date>=s).reduce((a,c)=>a+c.amount,0)},[g]),Y=r.useCallback(async()=>{try{L(!0),_(null);const[t,s]=await Promise.all([T.list({query:n||void 0,status:d==="All"?void 0:d,category:i||void 0,from:x.from,to:x.to,page:1,pageSize:100}),E.list()]);u((t.items||[]).map(a=>({...a,id:a.id||String(a._id)}))),C((s.items||[]).map(a=>({...a,id:a.id||String(a._id)})))}catch(t){_(t?.message||"Failed to load expenses")}finally{L(!1)}},[n,d,i,x.from,x.to]);r.useEffect(()=>{Y()},[Y]);const ne=async()=>{if(!l.name||!l.category||!l.amount||!l.date)return;const t={name:l.name,category:l.category,amount:Number(l.amount),date:l.date,status:l.status||"Draft",note:l.note,imageUrl:l.imageUrl};try{if(h){const s=await T.update(h,t);u(a=>a.map(c=>c.id===h?{...s,id:s.id||h}:c))}else{const s=await T.create(t);u(a=>[{...s,id:s.id||Math.random().toString(36).slice(2)},...a])}j(!1),o({status:"Draft"}),v(null)}catch{if(h)u(a=>a.map(c=>c.id===h?l:c));else{const a={id:Math.random().toString(36).slice(2),...t};u(c=>[a,...c])}j(!1),o({status:"Draft"}),v(null)}},de=t=>{o(t),v(t.id),j(!0)},oe=async t=>{if(window.confirm("Are you sure you want to delete this expense?"))try{await T.remove(t),u(s=>s.filter(a=>a.id!==t))}catch{u(s=>s.filter(a=>a.id!==t))}},me=async()=>{if(D.trim())try{if(N){const t=await E.update(N,{name:D});C(s=>s.map(a=>a.id===N?t:a))}else{const t=await E.create({name:D});C(s=>[...s,t])}k(""),P(null),S(!1)}catch{alert("Failed to save category")}},ie=async t=>{if(window.confirm("Delete this category?"))try{await E.remove(t),C(s=>s.filter(a=>a.id!==t))}catch{alert("Failed to delete category")}},xe=()=>{const t=window.open("","_blank");if(!t)return;const s=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Expense Invoice</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #333; }
          .container { max-width: 900px; margin: 0 auto; padding: 40px; }
          header { text-align: center; margin-bottom: 40px; border-bottom: 3px solid #0f766e; padding-bottom: 20px; }
          .logo { font-size: 32px; font-weight: bold; color: #0f766e; margin-bottom: 10px; }
          .subtitle { color: #888; font-size: 14px; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
          .info-box { padding: 15px; background: #f5f5f5; border-radius: 8px; }
          .info-label { font-weight: bold; color: #0f766e; font-size: 12px; text-transform: uppercase; }
          .info-value { margin-top: 5px; font-size: 14px; }
          table { width: 100%; border-collapse: collapse; margin: 30px 0; }
          thead { background: #0f766e; color: white; }
          th { padding: 12px; text-align: left; font-weight: 600; }
          td { padding: 12px; border-bottom: 1px solid #eee; }
          tr:hover { background: #fafafa; }
          .text-right { text-align: right; }
          .amount { font-weight: bold; color: #0f766e; }
          .total-row { font-weight: bold; font-size: 16px; background: #f0f0f0; }
          .summary { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 30px 0; }
          .summary-card { padding: 20px; background: #0f766e; color: white; border-radius: 8px; text-align: center; }
          .summary-label { font-size: 12px; opacity: 0.9; }
          .summary-value { font-size: 24px; font-weight: bold; margin-top: 10px; }
          footer { margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center; color: #888; font-size: 12px; }
          @media print { body { margin: 0; padding: 0; } .container { padding: 20px; } }
        </style>
      </head>
      <body>
        <div class="container">
          <header>
            <div class="logo">OP-BD.COM</div>
            <div class="subtitle">Professional Expense Report</div>
          </header>

          <div class="info-grid">
            <div class="info-box">
              <div class="info-label">Report Date</div>
              <div class="info-value">${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</div>
            </div>
            <div class="info-box">
              <div class="info-label">Total Expenses</div>
              <div class="info-value amount">BDT ${w.toFixed(2)}</div>
            </div>
          </div>

          <div class="summary">
            <div class="summary-card">
              <div class="summary-label">Total Amount</div>
              <div class="summary-value">BDT ${w.toFixed(2)}</div>
            </div>
            <div class="summary-card">
              <div class="summary-label">Categories</div>
              <div class="summary-value">${new Set(m.map(a=>a.category)).size}</div>
            </div>
            <div class="summary-card">
              <div class="summary-label">Transactions</div>
              <div class="summary-value">${m.length}</div>
            </div>
          </div>

          <div className="overflow-x-auto">
          <table>
            <thead>
              <tr>
                <th>Date</th>
                <th>Name</th>
                <th>Category</th>
                <th>Status</th>
                <th class="text-right">Amount</th>
              </tr>
            </thead>
            <tbody>
              ${m.map(a=>`
                <tr>
                  <td>${new Date(a.date).toLocaleDateString()}</td>
                  <td>${a.name}</td>
                  <td>${a.category}</td>
                  <td>${a.status}</td>
                  <td class="text-right amount">BDT ${a.amount.toFixed(2)}</td>
                </tr>
              `).join("")}
              <tr class="total-row">
                <td colspan="4" style="text-align: right;">TOTAL</td>
                <td class="text-right" style="color: #0f766e;">BDT ${w.toFixed(2)}</td>
              </tr>
            </tbody>
          </table>

          <footer>
            <p>This is an automatically generated expense report. Generated on ${new Date().toLocaleString()}</p>
          </footer>
        </div>
      </body>
      </html>
    `;t.document?.open(),t.document?.write(s),t.document?.close(),setTimeout(()=>t.print(),500)},z=Math.max(1,Math.ceil(m.length/I));return e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 bg-[#F8FAFC] min-h-screen space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-red-500"}),"Expense Tracker"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5 hidden sm:block",children:"Track & manage all expenses — filter by day, month, year or custom range."})]}),e.jsxs("div",{className:"flex flex-col xs:flex-row items-stretch xs:items-center gap-2",children:[e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 flex-1 xs:flex-initial",children:[e.jsx(he,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-500 flex-shrink-0"}),e.jsx("input",{value:n,onChange:t=>p(t.target.value),placeholder:"Search expenses...",className:"bg-transparent text-gray-700 text-xs sm:text-sm outline-none ml-2 w-full xs:w-auto placeholder:text-xs"})]}),e.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center justify-center gap-1.5 bg-emerald-600 hover:bg-emerald-700 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm font-semibold whitespace-nowrap",children:[e.jsx(q,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Add Expense"}),e.jsx("span",{className:"xs:hidden",children:"Add"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-2 mt-3 sm:mt-4",children:[e.jsx(ue,{className:"w-3.5 h-3.5 text-gray-500"}),["all","today","this_week","this_month","this_year","custom"].map(t=>e.jsx("button",{onClick:()=>K(t),className:`px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-full text-[10px] sm:text-xs font-semibold transition-all ${b===t?"bg-emerald-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:H[t]},t))]}),b==="custom"&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2 sm:mt-3 bg-gray-50 rounded-lg p-2 sm:p-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("label",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"From:"}),e.jsx("input",{type:"date",value:F,onChange:t=>Z(t.target.value),className:"bg-white border border-gray-300 rounded-md px-2 py-1 text-xs text-gray-900 focus:outline-none focus:border-emerald-500"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("label",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"To:"}),e.jsx("input",{type:"date",value:$,onChange:t=>ee(t.target.value),className:"bg-white border border-gray-300 rounded-md px-2 py-1 text-xs text-gray-900 focus:outline-none focus:border-emerald-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 mt-3 sm:mt-4",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-red-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(G,{className:"w-3.5 h-3.5 text-red-500"}),e.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:[H[b]," Total"]})]}),e.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl font-black text-red-600 break-words",children:["৳",w.toLocaleString("en-BD",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-[10px] sm:text-xs text-gray-500 mt-0.5",children:[m.length," transactions"]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-orange-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(fe,{className:"w-3.5 h-3.5 text-orange-500"}),e.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"Today"})]}),e.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl font-black text-orange-600 break-words",children:["৳",re.toLocaleString("en-BD",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(ye,{className:"w-3.5 h-3.5 text-purple-500"}),e.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"This Month"})]}),e.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl font-black text-purple-600 break-words",children:["৳",le.toLocaleString("en-BD",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(be,{className:"w-3.5 h-3.5 text-gray-500"}),e.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"Top Categories"})]}),e.jsxs("div",{className:"space-y-1 mt-1",children:[R.length===0&&e.jsx("div",{className:"text-[10px] text-gray-400",children:"No data"}),R.slice(0,3).map(([t,s])=>e.jsxs("div",{className:"flex items-center justify-between text-[10px] sm:text-xs",children:[e.jsx("span",{className:"text-gray-700 truncate mr-1",children:t}),e.jsxs("span",{className:"text-red-600 font-semibold whitespace-nowrap",children:["৳",s.toFixed(0)]})]},t))]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[e.jsxs("button",{onClick:()=>{k(""),P(null),S(!0)},className:"inline-flex items-center gap-1 sm:gap-1.5 bg-gray-200 hover:bg-gray-300 text-gray-700 px-2 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg text-[10px] sm:text-xs font-semibold",children:[e.jsx(q,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Category"})]}),e.jsxs("button",{onClick:xe,className:"inline-flex items-center gap-1 sm:gap-1.5 bg-gray-200 hover:bg-gray-300 text-gray-700 px-2 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg text-[10px] sm:text-xs font-semibold",children:[e.jsx(je,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Print Report"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 ml-auto",children:[e.jsx(ve,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500 flex-shrink-0"}),e.jsxs("select",{value:i,onChange:t=>J(t.target.value),className:"bg-white border border-gray-300 text-gray-700 text-[10px] sm:text-xs rounded-md px-1.5 sm:px-2 py-1 min-w-[100px]",children:[e.jsx("option",{value:"",children:"All Categories"}),M.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl p-2 sm:p-3 md:p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex items-center gap-1.5 sm:gap-2 md:gap-3 text-[10px] sm:text-xs md:text-sm overflow-x-auto scrollbar-hide pb-1 sm:pb-0",children:["All","Published","Draft","Trash"].map(t=>e.jsxs("button",{onClick:()=>A(t),className:`font-semibold whitespace-nowrap px-1.5 sm:px-2 py-0.5 sm:py-1 rounded ${d===t?"text-emerald-600 bg-emerald-50":"text-gray-400"} hover:text-gray-900 transition`,children:[t,t==="All"?` (${m.length})`:` (${g.filter(s=>s.status===t).length})`]},t))}),e.jsx("div",{className:"flex items-center justify-between sm:justify-end gap-1.5 sm:gap-2",children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 md:gap-2 text-[10px] sm:text-xs text-gray-600",children:[e.jsx("span",{className:"hidden sm:inline",children:"Page"}),e.jsx("span",{className:"text-[10px] sm:text-xs font-semibold",children:f}),e.jsxs("span",{className:"text-[10px] sm:text-xs",children:["of ",z]}),e.jsx("button",{onClick:()=>B(Math.max(1,f-1)),disabled:f<=1,className:"px-1 sm:px-2 py-0.5 sm:py-1 bg-gray-100 hover:bg-gray-200 rounded-md disabled:opacity-50",children:e.jsx(Ne,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})}),e.jsx("button",{onClick:()=>B(Math.min(z,f+1)),disabled:f>=z,className:"px-1 sm:px-2 py-0.5 sm:py-1 bg-gray-100 hover:bg-gray-200 rounded-md disabled:opacity-50",children:e.jsx(we,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})})]})})]}),e.jsx("div",{className:"mt-2 sm:mt-3 overflow-x-auto scrollbar-hide -mx-2 sm:mx-0 px-2 sm:px-0",children:te&&g.length===0?e.jsx("div",{className:"py-10 text-center text-gray-400 text-sm",children:"Loading expenses..."}):O?e.jsx("div",{className:"py-6 sm:py-10 text-center text-red-500 text-xs sm:text-sm",children:O}):U.length===0?e.jsx("div",{className:"py-10 sm:py-16 text-center",children:e.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[e.jsx(Q,{className:"w-8 h-8 sm:w-10 sm:h-10 mb-2"}),e.jsx("div",{className:"font-semibold text-xs sm:text-sm",children:"No Expenses Found!"}),e.jsx("div",{className:"text-[10px] sm:text-xs",children:"Add your first expense to start tracking."})]})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-xs sm:text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b border-gray-200",children:[e.jsx("th",{className:"p-1.5 sm:p-2 hidden sm:table-cell text-[10px] sm:text-xs",children:"Image"}),e.jsx("th",{className:"p-1.5 sm:p-2 text-[10px] sm:text-xs",children:"Name"}),e.jsx("th",{className:"p-1.5 sm:p-2 hidden lg:table-cell text-[10px] sm:text-xs",children:"Category"}),e.jsx("th",{className:"p-1.5 sm:p-2 text-[10px] sm:text-xs",children:"Amount"}),e.jsx("th",{className:"p-1.5 sm:p-2 text-[10px] sm:text-xs",children:"Date"}),e.jsx("th",{className:"p-1.5 sm:p-2 hidden sm:table-cell text-[10px] sm:text-xs",children:"Status"}),e.jsx("th",{className:"p-1.5 sm:p-2 text-[10px] sm:text-xs",children:"Actions"})]})}),e.jsx("tbody",{children:U.map((t,s)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"p-1.5 sm:p-2 hidden sm:table-cell",children:t.imageUrl?e.jsx("img",{src:ge(t.imageUrl),alt:"receipt",className:"w-8 h-8 sm:w-10 sm:h-10 rounded object-cover"}):e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gray-100 rounded flex items-center justify-center",children:e.jsx(Q,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400"})})}),e.jsxs("td",{className:"p-1.5 sm:p-2 text-gray-900 font-medium",children:[e.jsx("div",{className:"text-xs sm:text-sm",children:t.name}),e.jsx("div",{className:"text-[10px] sm:text-xs text-gray-500 lg:hidden mt-0.5",children:t.category}),t.note&&e.jsx("div",{className:"text-[10px] text-gray-400 mt-0.5 truncate max-w-[200px]",children:t.note})]}),e.jsx("td",{className:"p-1.5 sm:p-2 text-gray-600 hidden lg:table-cell text-xs sm:text-sm",children:t.category}),e.jsxs("td",{className:"p-1.5 sm:p-2 text-red-600 font-semibold whitespace-nowrap text-xs sm:text-sm",children:["৳",t.amount.toFixed(2)]}),e.jsx("td",{className:"p-1.5 sm:p-2 text-gray-600 text-[10px] sm:text-xs whitespace-nowrap",children:new Date(t.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),e.jsx("td",{className:"p-1.5 sm:p-2 hidden sm:table-cell",children:e.jsx("span",{className:`px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs font-semibold whitespace-nowrap ${t.status==="Published"?"bg-emerald-50 text-emerald-600":t.status==="Trash"?"bg-red-50 text-red-600":"bg-gray-100 text-gray-600"}`,children:t.status})}),e.jsx("td",{className:"p-1.5 sm:p-2",children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 text-gray-400",children:[e.jsx("button",{className:"p-1 sm:p-1.5 hover:text-gray-700 hover:bg-gray-100 rounded",onClick:()=>de(t),children:e.jsx(V,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx("button",{className:"p-1 sm:p-1.5 hover:text-red-500 hover:bg-red-50 rounded",onClick:()=>oe(t.id),children:e.jsx(W,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})})]},t.id||`expense-${s}`))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-red-50 font-bold text-sm",children:[e.jsx("td",{className:"p-2 hidden sm:table-cell"}),e.jsx("td",{className:"p-2",colSpan:1,children:"TOTAL"}),e.jsx("td",{className:"p-2 hidden lg:table-cell"}),e.jsxs("td",{className:"p-2 text-red-700",children:["৳",w.toFixed(2)]}),e.jsx("td",{className:"p-2",colSpan:3})]})})]})})})]}),se&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 w-full max-w-lg border border-gray-200 shadow-xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900 font-bold text-base sm:text-lg",children:h?"Edit Expense":"Add Expense"}),e.jsx("button",{onClick:()=>{j(!1),o({status:"Draft"}),v(null)},className:"text-gray-400 hover:text-gray-600 p-1",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Expense Name *"}),e.jsx("input",{className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500",value:l.name||"",onChange:t=>o({...l,name:t.target.value}),placeholder:"Enter expense name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Category *"}),e.jsxs("select",{className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:border-emerald-500",value:l.category||"",onChange:t=>o({...l,category:t.target.value}),children:[e.jsx("option",{value:"",children:"Select Category"}),M.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Amount (৳) *"}),e.jsx("input",{type:"number",className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500",value:l.amount||"",onChange:t=>o({...l,amount:Number(t.target.value)}),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Date *"}),e.jsx("input",{type:"date",className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:border-emerald-500",value:l.date||"",onChange:t=>o({...l,date:t.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Image URL (Optional)"}),e.jsx("input",{className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:border-emerald-500",value:l.imageUrl||"",onChange:t=>o({...l,imageUrl:t.target.value}),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Status"}),e.jsxs("select",{className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:border-emerald-500",value:l.status||"Draft",onChange:t=>o({...l,status:t.target.value}),children:[e.jsx("option",{children:"Draft"}),e.jsx("option",{children:"Published"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Note (Optional)"}),e.jsx("textarea",{rows:3,className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:border-emerald-500 resize-none",value:l.note||"",onChange:t=>o({...l,note:t.target.value}),placeholder:"Add any notes..."})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row items-stretch sm:items-center justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{j(!1),o({status:"Draft"}),v(null)},className:"px-4 py-2.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md font-medium",children:"Cancel"}),e.jsx("button",{onClick:ne,className:"px-4 py-2.5 text-sm bg-emerald-600 hover:bg-emerald-700 text-white rounded-md font-semibold",children:h?"Update Expense":"Save Expense"})]})]})]})}),ae&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 w-full max-w-lg border border-gray-200 shadow-xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900 font-bold text-base sm:text-lg",children:N?"Edit Category":"Add Category"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600 p-1",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4 mb-4",children:[e.jsx("input",{type:"text",placeholder:"Category name",className:"w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500",value:D,onChange:t=>k(t.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:me,className:"flex-1 px-3 py-2 text-sm bg-emerald-600 hover:bg-emerald-700 text-white rounded-md font-semibold",children:N?"Update":"Add"}),e.jsx("button",{onClick:()=>S(!1),className:"flex-1 px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md",children:"Cancel"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h4",{className:"text-gray-900 text-sm font-semibold mb-3",children:"All Categories"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:M.map(t=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-md",children:[e.jsx("span",{className:"text-sm text-gray-900",children:t.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{k(t.name),P(t.id)},className:"p-1 text-emerald-600 hover:text-emerald-700",children:e.jsx(V,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>ie(t.id),className:"p-1 text-red-500 hover:text-red-600",children:e.jsx(W,{className:"w-3 h-3"})})]})]},t.id))})]})]})})]})};export{Ve as default};
