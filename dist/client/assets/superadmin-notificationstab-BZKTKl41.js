import{j as e}from"./react-jsx-runtime-BBsywpoz.js";import{r}from"./react-core-KcGD0Z1V.js";import{P as S,L as A,N as k,S as E,a4 as F,T as B,aa as L,bk as I,Y as P,bf as $,aK as z,ao as D,bd as M}from"./icons-chunk-AVFeydwE.js";import"./pkg-eventemitter3-CXfM2dhT.js";const O=({notifications:h,onSendNotification:p,onDeleteNotification:g,tenants:f})=>{const[b,i]=r.useState(!1),[d,x]=r.useState(!1),[o,j]=r.useState(""),[c,N]=r.useState("all"),[t,l]=r.useState({title:"",message:"",type:"info",priority:"medium",targetTenants:"all",expiresAt:""}),v=async()=>{if(!(!t.title||!t.message)){x(!0);try{await p({...t,expiresAt:t.expiresAt||void 0}),l({title:"",message:"",type:"info",priority:"medium",targetTenants:"all",expiresAt:""}),i(!1)}finally{x(!1)}}},y=s=>{switch(s){case"info":return e.jsx(M,{className:"w-4 h-4 text-blue-500"});case"warning":return e.jsx(D,{className:"w-4 h-4 text-amber-500"});case"success":return e.jsx(z,{className:"w-4 h-4 text-emerald-500"});case"error":return e.jsx($,{className:"w-4 h-4 text-red-500"})}},m=s=>({info:"bg-blue-100 text-blue-700",warning:"bg-amber-100 text-amber-700",success:"bg-emerald-100 text-emerald-700",error:"bg-red-100 text-red-700"})[s],w=s=>({low:"bg-slate-100 text-slate-600",medium:"bg-blue-100 text-blue-600",high:"bg-red-100 text-red-600"})[s],u=h.filter(s=>{const a=s.title.toLowerCase().includes(o.toLowerCase())||s.message.toLowerCase().includes(o.toLowerCase()),n=c==="all"||s.type===c;return a&&n});return e.jsxs("div",{className:"p-3 sm:p-4 lg:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Push Notifications"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Send notifications to tenant admins"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2.5 bg-gradient-to-r from-[#38BDF8] to-[#1E90FF] hover:from-[#2BAEE8] hover:to-[#1A7FE8] text-white rounded-lg font-medium flex items-center gap-2 transition-colors",children:[e.jsx(S,{className:"w-5 h-5"}),"New Notification"]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Create Notification"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Send a notification to tenant admins"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:t.title,onChange:s=>l(a=>({...a,title:s.target.value})),placeholder:"Notification title...",className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Message"}),e.jsx("textarea",{value:t.message,onChange:s=>l(a=>({...a,message:s.target.value})),placeholder:"Enter your message...",rows:4,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 text-sm resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Type"}),e.jsxs("select",{value:t.type,onChange:s=>l(a=>({...a,type:s.target.value})),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 text-sm",children:[e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"error",children:"Error"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),e.jsxs("select",{value:t.priority,onChange:s=>l(a=>({...a,priority:s.target.value})),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 text-sm",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Target Tenants"}),e.jsxs("select",{value:t.targetTenants==="all"?"all":"selected",onChange:s=>l(a=>({...a,targetTenants:s.target.value==="all"?"all":[]})),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 text-sm",children:[e.jsx("option",{value:"all",children:"All Tenants"}),e.jsx("option",{value:"selected",children:"Select Specific Tenants"})]})]}),t.targetTenants!=="all"&&e.jsx("div",{className:"max-h-40 overflow-y-auto border border-slate-200 rounded-xl p-2",children:f.map(s=>e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-slate-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Array.isArray(t.targetTenants)&&t.targetTenants.includes(s.id),onChange:a=>{const n=Array.isArray(t.targetTenants)?t.targetTenants:[];l(T=>({...T,targetTenants:a.target.checked?[...n,s.id]:n.filter(C=>C!==s.id)}))},className:"w-4 h-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"}),e.jsx("span",{className:"text-sm text-slate-700",children:s.name})]},s.id))}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Expires At (Optional)"}),e.jsx("input",{type:"datetime-local",value:t.expiresAt,onChange:s=>l(a=>({...a,expiresAt:s.target.value})),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 text-sm"})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2.5 text-slate-600 hover:bg-slate-100 rounded-xl font-medium transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:v,disabled:d||!t.title||!t.message,className:"px-4 py-2.5 bg-gradient-to-r from-[#38BDF8] to-[#1E90FF] hover:from-[#2BAEE8] hover:to-[#1A7FE8] text-white rounded-lg font-medium flex items-center gap-2 disabled:opacity-50 transition-colors",children:[d?e.jsx(A,{className:"w-5 h-5 animate-spin"}):e.jsx(k,{className:"w-5 h-5"}),"Send Notification"]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(E,{className:"w-5 h-5 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search notifications...",value:o,onChange:s=>j(s.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("select",{value:c,onChange:s=>N(s.target.value),className:"px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"error",children:"Error"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:u.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(F,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-1",children:"No notifications"}),e.jsx("p",{className:"text-slate-500",children:"Create your first notification to get started"})]}):e.jsx("div",{className:"divide-y divide-slate-100",children:u.map(s=>e.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${m(s.type).replace("text-","bg-").split(" ")[0]}`,children:y(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-900",children:s.title}),e.jsx("p",{className:"text-sm text-slate-500 mt-1 line-clamp-2",children:s.message})]}),e.jsx("button",{onClick:()=>g(s.id),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(B,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(s.type)}`,children:s.type}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(s.priority)}`,children:s.priority}),e.jsx("span",{className:"flex items-center gap-1 text-xs text-slate-500",children:s.targetTenants==="all"?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-3 h-3"}),"All Tenants"]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-3 h-3"}),s.targetTenants.length," Tenants"]})}),e.jsxs("span",{className:"flex items-center gap-1 text-xs text-slate-400",children:[e.jsx(P,{className:"w-3 h-3"}),s.createdAt]})]})]})]})},s.id))})})]})};export{O as default};
