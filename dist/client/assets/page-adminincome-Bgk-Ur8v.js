import{j as e}from"./react-jsx-runtime-BBsywpoz.js";import{r}from"./react-core-KcGD0Z1V.js";import{I as N,h as ne}from"./cmp-dashboard-CwyHj6aR.js";import{n as de}from"./cmp-admincustomization-BgTFiuh2.js";import{p as Y,S as me,P as B,aB as oe,Y as ie,Q as ce,v as xe,ag as ge,aI as he,C as pe,b as ue,_ as q,aE as be,T as ye,X as G}from"./icons-chunk-AVFeydwE.js";import"./pkg-eventemitter3-CXfM2dhT.js";import"./pkg-socket-D1bUdbwx.js";import"./pkg-engine-io-BZqIjJKj.js";import"./pkg-@socket.io-component-emitter-Dkula2eQ.js";import"./pkg-socket.io-parser-CafqElEs.js";import"./cmp-approutes-tsx-DORRjFJg.js";import"./cmp-skeletonloaders-tsx-Durrj7lG.js";import"./cmp-addnewduemodal-tsx-OjU2U-0e.js";import"./cmp-modern-dashboard-C6grFkCj.js";import"./pkg-toast-Dpd4iwUK.js";import"./pkg-goober-N6sOClW1.js";import"./cmp-invoiceprinttemplate-tsx-CUwUe6zE.js";import"./pkg-papaparse-BEpmA8em.js";import"./pkg-xlsx-BljOZNTS.js";import"./page-adminnote-C1Ob2d7z.js";import"./cmp-duehistorymodal-tsx-KQ79TbYj.js";import"./cmp-gallerypicker-tsx-T-_pXSB3.js";function fe(y){const l=new Date,x=d=>d.toISOString().slice(0,10);switch(y){case"today":return{from:x(l),to:x(l)};case"this_week":{const d=l.getDay(),k=d===0?6:d-1,i=new Date(l);return i.setDate(l.getDate()-k),{from:x(i),to:x(l)}}case"this_month":return{from:`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-01`,to:x(l)};case"this_year":return{from:`${l.getFullYear()}-01-01`,to:x(l)};case"all":return{};default:return{}}}const Q={all:"All Time",today:"Today",this_week:"This Week",this_month:"This Month",this_year:"This Year",custom:"Custom Range"},Ye=({tenantId:y})=>{const[l,x]=r.useState(""),[d,k]=r.useState("All"),[i,W]=r.useState(""),[p,X]=r.useState("this_month"),[T,H]=r.useState(""),[I,J]=r.useState(""),[g,w]=r.useState([]),[A,_]=r.useState([]),[K,L]=r.useState(!1),[E,v]=r.useState(null),[h,O]=r.useState(1),D=15,[V,f]=r.useState(!1),[a,m]=r.useState({status:"Published"}),[u,j]=r.useState(null),[Z,C]=r.useState(!1),[$,P]=r.useState("");r.useEffect(()=>{y&&ne(y)},[y]);const c=r.useMemo(()=>p==="custom"?{from:T||void 0,to:I||void 0}:fe(p),[p,T,I]),o=r.useMemo(()=>g.filter(t=>(d==="All"||t.status===d)&&(!i||t.category===i)&&(!l||t.name.toLowerCase().includes(l.toLowerCase()))&&(!c.from||t.date>=c.from)&&(!c.to||t.date<=c.to)),[g,d,i,l,c]),U=r.useMemo(()=>{const t=(h-1)*D;return o.slice(t,t+D)},[o,h]),F=r.useMemo(()=>o.reduce((t,s)=>t+s.amount,0),[o]),z=r.useMemo(()=>{const t=new Map;return o.forEach(s=>t.set(s.category,(t.get(s.category)||0)+s.amount)),Array.from(t.entries()).sort((s,n)=>n[1]-s[1]).slice(0,5)},[o]),ee=r.useMemo(()=>{const t=new Date().toISOString().slice(0,10);return g.filter(s=>s.date===t).reduce((s,n)=>s+n.amount,0)},[g]),te=r.useMemo(()=>{const t=new Date,s=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`;return g.filter(n=>n.date>=s).reduce((n,S)=>n+S.amount,0)},[g]),R=r.useCallback(async()=>{try{L(!0),v(null);const t=await N.loadAll({query:l||void 0,status:d==="All"?void 0:d,category:i||void 0,from:c.from,to:c.to,page:1,pageSize:100});w((t.list.items||[]).map(s=>({...s,id:s.id||s._id}))),_((t.categories||[]).map(s=>({...s,id:s.id||s._id})))}catch(t){v(t?.message||"Failed to load income")}finally{L(!1)}},[l,d,i,c.from,c.to]);r.useEffect(()=>{R()},[R]);const se=async()=>{if($.trim())try{const t=await N.createCategory($);_(s=>[...s,{...t,id:t.id||t._id}]),P(""),C(!1)}catch{alert("Failed to save category")}},ae=async()=>{if(!a.name||!a.category||!a.amount||!a.date)return;const t={name:a.name,category:a.category,amount:Number(a.amount),date:a.date,status:a.status||"Draft",note:a.note,imageUrl:a.imageUrl};try{if(u){const s=await N.update(u,t);w(n=>n.map(S=>S.id===u?{...s,id:s.id||u}:S))}else{const s=await N.create(t);w(n=>[{...s,id:s.id||String(Date.now())},...n])}f(!1),m({status:"Draft"}),j(null)}catch(s){v(s?.message||"Failed to save income")}},re=async t=>{if(confirm("Delete this income entry?"))try{await N.remove(t),w(s=>s.filter(n=>n.id!==t))}catch(s){v(s?.message||"Failed to delete income")}},le=t=>{m(t),j(t.id),f(!0)},b=t=>`৳${t.toLocaleString("en-BD",{minimumFractionDigits:2})}`,M=Math.max(1,Math.ceil(o.length/D));return e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 bg-[#F8FAFC] min-h-screen space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5 text-emerald-500"}),"Income Tracker"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5 hidden sm:block",children:"Track & manage all income — filter by day, month, year or custom range."})]}),e.jsxs("div",{className:"flex flex-col xs:flex-row items-stretch xs:items-center gap-2",children:[e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 flex-1 xs:flex-initial",children:[e.jsx(me,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-500 flex-shrink-0"}),e.jsx("input",{value:l,onChange:t=>x(t.target.value),placeholder:"Search income...",className:"bg-transparent text-gray-700 text-xs sm:text-sm outline-none ml-2 w-full xs:w-auto placeholder:text-xs"})]}),e.jsxs("button",{onClick:()=>{m({status:"Published",date:new Date().toISOString().split("T")[0]}),j(null),f(!0)},className:"inline-flex items-center justify-center gap-1.5 bg-emerald-600 hover:bg-emerald-700 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm font-semibold whitespace-nowrap",children:[e.jsx(B,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Add Income"}),e.jsx("span",{className:"xs:hidden",children:"Add"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-2 mt-3 sm:mt-4",children:[e.jsx(oe,{className:"w-3.5 h-3.5 text-gray-500"}),["all","today","this_week","this_month","this_year","custom"].map(t=>e.jsx("button",{onClick:()=>X(t),className:`px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-full text-[10px] sm:text-xs font-semibold transition-all ${p===t?"bg-emerald-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Q[t]},t))]}),p==="custom"&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2 sm:mt-3 bg-gray-50 rounded-lg p-2 sm:p-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("label",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"From:"}),e.jsx("input",{type:"date",value:T,onChange:t=>H(t.target.value),className:"bg-white border border-gray-300 rounded-md px-2 py-1 text-xs text-gray-900 focus:outline-none focus:border-emerald-500"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("label",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"To:"}),e.jsx("input",{type:"date",value:I,onChange:t=>J(t.target.value),className:"bg-white border border-gray-300 rounded-md px-2 py-1 text-xs text-gray-900 focus:outline-none focus:border-emerald-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 mt-3 sm:mt-4",children:[e.jsxs("div",{className:"bg-emerald-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-emerald-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(Y,{className:"w-3.5 h-3.5 text-emerald-500"}),e.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:[Q[p]," Total"]})]}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-black text-emerald-600 break-words",children:b(F)}),e.jsxs("div",{className:"text-[10px] sm:text-xs text-gray-500 mt-0.5",children:[o.length," transactions"]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(ie,{className:"w-3.5 h-3.5 text-blue-500"}),e.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"Today"})]}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-black text-blue-600 break-words",children:b(ee)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(ce,{className:"w-3.5 h-3.5 text-purple-500"}),e.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"This Month"})]}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-black text-purple-600 break-words",children:b(te)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(xe,{className:"w-3.5 h-3.5 text-gray-500"}),e.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"Top Categories"})]}),e.jsxs("div",{className:"space-y-1 mt-1",children:[z.length===0&&e.jsx("div",{className:"text-[10px] text-gray-400",children:"No data"}),z.slice(0,3).map(([t,s])=>e.jsxs("div",{className:"flex items-center justify-between text-[10px] sm:text-xs",children:[e.jsx("span",{className:"text-gray-700 truncate mr-1",children:t}),e.jsx("span",{className:"text-emerald-600 font-semibold whitespace-nowrap",children:b(s)})]},t))]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[e.jsxs("button",{onClick:()=>{P(""),C(!0)},className:"inline-flex items-center gap-1 sm:gap-1.5 bg-gray-200 hover:bg-gray-300 text-gray-700 px-2 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg text-[10px] sm:text-xs font-semibold",children:[e.jsx(B,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Category"})]}),e.jsxs("button",{onClick:()=>{const t=window.open("","_blank");t&&(t.document?.open(),t.document?.write(`<!DOCTYPE html><html><head><title>Income Report</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',sans-serif;color:#333}.container{max-width:900px;margin:0 auto;padding:40px}header{text-align:center;margin-bottom:40px;border-bottom:3px solid #059669;padding-bottom:20px}.logo{font-size:32px;font-weight:bold;color:#059669}table{width:100%;border-collapse:collapse;margin:30px 0}thead{background:#059669;color:white}th{padding:12px;text-align:left}td{padding:12px;border-bottom:1px solid #eee}.text-right{text-align:right}.amount{font-weight:bold;color:#059669}.total-row{font-weight:bold;font-size:16px;background:#f0f0f0}footer{margin-top:40px;text-align:center;color:#888;font-size:12px}</style></head><body><div class="container"><header><div class="logo">Income Report</div></header><table><thead><tr><th>Date</th><th>Name</th><th>Category</th><th>Status</th><th class="text-right">Amount</th></tr></thead><tbody>${o.map(s=>`<tr><td>${new Date(s.date).toLocaleDateString()}</td><td>${s.name}</td><td>${s.category}</td><td>${s.status}</td><td class="text-right amount">৳${s.amount.toFixed(2)}</td></tr>`).join("")}<tr class="total-row"><td colspan="4" style="text-align:right;">TOTAL</td><td class="text-right">৳${F.toFixed(2)}</td></tr></tbody></table><footer>Generated on ${new Date().toLocaleString()}</footer></div></body></html>`),t.document?.close(),setTimeout(()=>t.print(),500))},className:"inline-flex items-center gap-1 sm:gap-1.5 bg-gray-200 hover:bg-gray-300 text-gray-700 px-2 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg text-[10px] sm:text-xs font-semibold",children:[e.jsx(ge,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Print Report"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 ml-auto",children:[e.jsx(he,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500 flex-shrink-0"}),e.jsxs("select",{value:i,onChange:t=>W(t.target.value),className:"bg-white border border-gray-300 text-gray-700 text-[10px] sm:text-xs rounded-md px-1.5 sm:px-2 py-1 min-w-[100px]",children:[e.jsx("option",{value:"",children:"All Categories"}),A.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id||t.name))]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl p-2 sm:p-3 md:p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex items-center gap-1.5 sm:gap-2 md:gap-3 text-[10px] sm:text-xs md:text-sm overflow-x-auto scrollbar-hide pb-1 sm:pb-0",children:["All","Published","Draft","Trash"].map(t=>e.jsxs("button",{onClick:()=>k(t),className:`font-semibold whitespace-nowrap px-1.5 sm:px-2 py-0.5 sm:py-1 rounded ${d===t?"text-emerald-600 bg-emerald-50":"text-gray-400"} hover:text-gray-900 transition`,children:[t,t==="All"?` (${o.length})`:` (${g.filter(s=>s.status===t).length})`]},t))}),e.jsx("div",{className:"flex items-center justify-between sm:justify-end gap-1.5 sm:gap-2",children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 md:gap-2 text-[10px] sm:text-xs text-gray-600",children:[e.jsx("span",{className:"hidden sm:inline",children:"Page"}),e.jsx("span",{className:"text-[10px] sm:text-xs font-semibold",children:h}),e.jsxs("span",{className:"text-[10px] sm:text-xs",children:["of ",M]}),e.jsx("button",{onClick:()=>O(Math.max(1,h-1)),disabled:h<=1,className:"px-1 sm:px-2 py-0.5 sm:py-1 bg-gray-100 hover:bg-gray-200 rounded-md disabled:opacity-50",children:e.jsx(pe,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})}),e.jsx("button",{onClick:()=>O(Math.min(M,h+1)),disabled:h>=M,className:"px-1 sm:px-2 py-0.5 sm:py-1 bg-gray-100 hover:bg-gray-200 rounded-md disabled:opacity-50",children:e.jsx(ue,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})})]})})]}),e.jsx("div",{className:"mt-2 sm:mt-3 overflow-x-auto scrollbar-hide -mx-2 sm:mx-0 px-2 sm:px-0",children:K&&g.length===0?e.jsx("div",{className:"py-10 text-center text-gray-400 text-sm",children:"Loading income..."}):E?e.jsx("div",{className:"py-6 sm:py-10 text-center text-red-500 text-xs sm:text-sm",children:E}):U.length===0?e.jsx("div",{className:"py-10 sm:py-16 text-center",children:e.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[e.jsx(q,{className:"w-8 h-8 sm:w-10 sm:h-10 mb-2"}),e.jsx("div",{className:"font-semibold text-xs sm:text-sm",children:"No Income Found!"}),e.jsx("div",{className:"text-[10px] sm:text-xs",children:"Add your first income to start tracking."})]})}):e.jsxs("table",{className:"min-w-full text-xs sm:text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b border-gray-200",children:[e.jsx("th",{className:"p-1.5 sm:p-2 hidden sm:table-cell text-[10px] sm:text-xs",children:"Image"}),e.jsx("th",{className:"p-1.5 sm:p-2 text-[10px] sm:text-xs",children:"Name"}),e.jsx("th",{className:"p-1.5 sm:p-2 hidden lg:table-cell text-[10px] sm:text-xs",children:"Category"}),e.jsx("th",{className:"p-1.5 sm:p-2 text-[10px] sm:text-xs",children:"Amount"}),e.jsx("th",{className:"p-1.5 sm:p-2 text-[10px] sm:text-xs",children:"Date"}),e.jsx("th",{className:"p-1.5 sm:p-2 hidden sm:table-cell text-[10px] sm:text-xs",children:"Status"}),e.jsx("th",{className:"p-1.5 sm:p-2 text-[10px] sm:text-xs",children:"Actions"})]})}),e.jsx("tbody",{children:U.map((t,s)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"p-1.5 sm:p-2 hidden sm:table-cell",children:t.imageUrl?e.jsx("img",{src:de(t.imageUrl),alt:"receipt",className:"w-8 h-8 sm:w-10 sm:h-10 rounded object-cover"}):e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-emerald-50 rounded flex items-center justify-center",children:e.jsx(q,{className:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-400"})})}),e.jsxs("td",{className:"p-1.5 sm:p-2 text-gray-900 font-medium",children:[e.jsx("div",{className:"text-xs sm:text-sm",children:t.name}),e.jsx("div",{className:"text-[10px] sm:text-xs text-gray-500 lg:hidden mt-0.5",children:t.category}),t.note&&e.jsx("div",{className:"text-[10px] text-gray-400 mt-0.5 truncate max-w-[200px]",children:t.note})]}),e.jsx("td",{className:"p-1.5 sm:p-2 text-gray-600 hidden lg:table-cell text-xs sm:text-sm",children:t.category}),e.jsxs("td",{className:"p-1.5 sm:p-2 text-emerald-600 font-semibold whitespace-nowrap text-xs sm:text-sm",children:["+",b(t.amount)]}),e.jsx("td",{className:"p-1.5 sm:p-2 text-gray-600 text-[10px] sm:text-xs whitespace-nowrap",children:new Date(t.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),e.jsx("td",{className:"p-1.5 sm:p-2 hidden sm:table-cell",children:e.jsx("span",{className:`px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs font-semibold whitespace-nowrap ${t.status==="Published"?"bg-emerald-50 text-emerald-600":t.status==="Trash"?"bg-red-50 text-red-600":"bg-gray-100 text-gray-600"}`,children:t.status})}),e.jsx("td",{className:"p-1.5 sm:p-2",children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 text-gray-400",children:[e.jsx("button",{className:"p-1 sm:p-1.5 hover:text-gray-700 hover:bg-gray-100 rounded",onClick:()=>le(t),children:e.jsx(be,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx("button",{className:"p-1 sm:p-1.5 hover:text-red-500 hover:bg-red-50 rounded",onClick:()=>re(t.id),children:e.jsx(ye,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})})]},t.id||`income-${s}`))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-emerald-50 font-bold text-sm",children:[e.jsx("td",{className:"p-2 hidden sm:table-cell"}),e.jsx("td",{className:"p-2",colSpan:1,children:"TOTAL"}),e.jsx("td",{className:"p-2 hidden lg:table-cell"}),e.jsxs("td",{className:"p-2 text-emerald-700",children:["+",b(F)]}),e.jsx("td",{className:"p-2",colSpan:3})]})})]})})]}),V&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 w-full max-w-lg border border-gray-200 shadow-xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900 font-bold text-base sm:text-lg",children:u?"Edit Income":"Add Income"}),e.jsx("button",{onClick:()=>{f(!1),j(null),m({status:"Published"})},className:"text-gray-400 hover:text-gray-600 p-1",children:e.jsx(G,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Income Name *"}),e.jsx("input",{className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500",value:a.name||"",onChange:t=>m({...a,name:t.target.value}),placeholder:"Enter income name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Category *"}),e.jsxs("select",{className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:border-emerald-500",value:a.category||"",onChange:t=>m({...a,category:t.target.value}),children:[e.jsx("option",{value:"",children:"Select Category"}),A.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id||t.name))]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Amount (৳) *"}),e.jsx("input",{type:"number",className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500",value:a.amount||"",onChange:t=>m({...a,amount:Number(t.target.value)}),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Date *"}),e.jsx("input",{type:"date",className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:border-emerald-500",value:a.date||"",onChange:t=>m({...a,date:t.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Image URL (Optional)"}),e.jsx("input",{className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:border-emerald-500",value:a.imageUrl||"",onChange:t=>m({...a,imageUrl:t.target.value}),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Status"}),e.jsxs("select",{className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:border-emerald-500",value:a.status||"Published",onChange:t=>m({...a,status:t.target.value}),children:[e.jsx("option",{children:"Published"}),e.jsx("option",{children:"Draft"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:"Note (Optional)"}),e.jsx("textarea",{rows:3,className:"mt-1 w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:border-emerald-500 resize-none",value:a.note||"",onChange:t=>m({...a,note:t.target.value}),placeholder:"Add any notes..."})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row items-stretch sm:items-center justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{f(!1),m({status:"Published"}),j(null)},className:"px-4 py-2.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md font-medium",children:"Cancel"}),e.jsx("button",{onClick:ae,disabled:!a.name||!a.category||!a.amount||!a.date,className:"px-4 py-2.5 text-sm bg-emerald-600 hover:bg-emerald-700 text-white rounded-md font-semibold disabled:opacity-50",children:u?"Update Income":"Save Income"})]})]})]})}),Z&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 w-full max-w-lg border border-gray-200 shadow-xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900 font-bold text-base sm:text-lg",children:"Add Income Category"}),e.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600 p-1",children:e.jsx(G,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4 mb-4",children:[e.jsx("input",{type:"text",placeholder:"Category name",className:"w-full bg-white border border-gray-300 rounded-md px-3 py-2.5 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500",value:$,onChange:t=>P(t.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:se,className:"flex-1 px-3 py-2 text-sm bg-emerald-600 hover:bg-emerald-700 text-white rounded-md font-semibold",children:"Add"}),e.jsx("button",{onClick:()=>C(!1),className:"flex-1 px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md",children:"Cancel"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h4",{className:"text-gray-900 text-sm font-semibold mb-3",children:"All Categories"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:A.map(t=>e.jsx("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-md",children:e.jsx("span",{className:"text-sm text-gray-900",children:t.name})},t.id||t.name))})]})]})})]})};export{Ye as default};
