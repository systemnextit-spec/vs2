import{j as e}from"./react-jsx-runtime-BBsywpoz.js";import{r as c}from"./react-core-KcGD0Z1V.js";import{c8 as o,P as Q,ah as u,Y as w,aE as y,c9 as C,bX as S,bd as k,ao as T,S as z,aI as X,an as p,a4 as g,aa as W,aB as Y,E as q,N as A,T as G,X as H}from"./icons-chunk-AVFeydwE.js";import"./pkg-eventemitter3-CXfM2dhT.js";const J=[{id:"maintenance",name:"Scheduled Maintenance",icon:C,type:"maintenance"},{id:"feature",name:"New Feature Launch",icon:S,type:"feature"},{id:"update",name:"System Update",icon:k,type:"info"},{id:"warning",name:"Important Notice",icon:T,type:"warning"}],te=({announcements:n,tenants:E,onCreateAnnouncement:F,onUpdateAnnouncement:K,onDeleteAnnouncement:I,onSendAnnouncement:B})=>{const[M,r]=c.useState(!1),[V,D]=c.useState(null),[x,L]=c.useState("all"),[m,U]=c.useState(""),[b,f]=c.useState(!1),[a,l]=c.useState({title:"",message:"",type:"info",channel:"both",targetAudience:"all",targetTenantIds:[],scheduledAt:"",template:""}),h=()=>{l({title:"",message:"",type:"info",channel:"both",targetAudience:"all",targetTenantIds:[],scheduledAt:"",template:""})},j=async(s=!1)=>{f(!0);try{await F({...a,createdBy:"Super Admin",targetTenantIds:a.targetAudience==="specific"?a.targetTenantIds:void 0,scheduledAt:a.scheduledAt||void 0}),r(!1),h()}catch(t){console.error("Failed to create announcement:",t)}finally{f(!1)}},$=async s=>{try{await B(s)}catch(t){console.error("Failed to send announcement:",t)}},N=n.filter(s=>{const t=x==="all"||s.status===x,d=s.title.toLowerCase().includes(m.toLowerCase())||s.message.toLowerCase().includes(m.toLowerCase());return t&&d}),R=s=>{switch(s){case"maintenance":return e.jsx(C,{className:"w-4 h-4"});case"feature":return e.jsx(S,{className:"w-4 h-4"});case"warning":return e.jsx(T,{className:"w-4 h-4"});case"success":return e.jsx(u,{className:"w-4 h-4"});default:return e.jsx(k,{className:"w-4 h-4"})}},v=s=>{switch(s){case"maintenance":return"bg-orange-100 text-orange-700 border-orange-200";case"feature":return"bg-purple-100 text-purple-700 border-purple-200";case"warning":return"bg-amber-100 text-amber-700 border-amber-200";case"success":return"bg-green-100 text-green-700 border-green-200";default:return"bg-blue-100 text-blue-700 border-blue-200"}},O=s=>{switch(s){case"draft":return e.jsx("span",{className:"px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded-full",children:"Draft"});case"scheduled":return e.jsxs("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-600 rounded-full flex items-center gap-1",children:[e.jsx(w,{className:"w-3 h-3"})," Scheduled"]});case"sent":return e.jsxs("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-600 rounded-full flex items-center gap-1",children:[e.jsx(u,{className:"w-3 h-3"})," Sent"]});case"cancelled":return e.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-600 rounded-full",children:"Cancelled"})}},i={total:n.length,sent:n.filter(s=>s.status==="sent").length,scheduled:n.filter(s=>s.status==="scheduled").length,drafts:n.filter(s=>s.status==="draft").length};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(o,{className:"w-7 h-7 text-emerald-500"}),"Bulk Announcements"]}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Send system-wide notifications and emails to merchants"})]}),e.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#38BDF8] to-[#1E90FF] text-white rounded-lg hover:from-[#2BAEE8] hover:to-[#1A7FE8] transition-colors",children:[e.jsx(Q,{className:"w-4 h-4"}),"New Announcement"]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:e.jsx(o,{className:"w-5 h-5 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-slate-800",children:i.total})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(u,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Sent"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:i.sent})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(w,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Scheduled"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:i.scheduled})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(y,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Drafts"}),e.jsx("p",{className:"text-xl font-bold text-amber-600",children:i.drafts})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Quick Templates"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:J.map(s=>e.jsxs("button",{onClick:()=>{l(t=>({...t,type:s.type,template:s.id,title:s.name})),r(!0)},className:"flex items-center gap-2 px-3 py-2 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors text-sm text-slate-700",children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.name]},s.id))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search announcements...",value:m,onChange:s=>U(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4 text-slate-500"}),e.jsxs("select",{value:x,onChange:s=>L(s.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Drafts"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:N.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(o,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No announcements yet"}),e.jsx("p",{className:"text-slate-500 mb-4",children:"Create your first announcement to communicate with merchants"}),e.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-gradient-to-r from-[#38BDF8] to-[#1E90FF] text-white rounded-lg hover:from-[#2BAEE8] hover:to-[#1A7FE8] transition-colors",children:"Create Announcement"})]}):e.jsx("div",{className:"divide-y divide-slate-100",children:N.map(s=>e.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 text-xs rounded-full border ${v(s.type)}`,children:[R(s.type),s.type.charAt(0).toUpperCase()+s.type.slice(1)]}),O(s.status),e.jsxs("span",{className:"flex items-center gap-1 text-xs text-slate-500",children:[s.channel==="email"&&e.jsx(p,{className:"w-3 h-3"}),s.channel==="notification"&&e.jsx(g,{className:"w-3 h-3"}),s.channel==="both"&&e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-3 h-3"}),e.jsx(g,{className:"w-3 h-3"})]})]})]}),e.jsx("h4",{className:"font-semibold text-slate-800 mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:s.message}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-3 h-3"}),s.targetAudience==="all"?"All Merchants":s.targetAudience==="specific"?`${s.targetTenantIds?.length||0} Selected`:`${s.targetAudience.charAt(0).toUpperCase()+s.targetAudience.slice(1)} Merchants`]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"w-3 h-3"}),s.sentAt||s.scheduledAt||s.createdAt]}),s.openRate!==void 0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(q,{className:"w-3 h-3"}),s.openRate,"% opened"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="draft"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>$(s.id),className:"p-2 text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",title:"Send Now",children:e.jsx(A,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>D(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(y,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>I(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(G,{className:"w-4 h-4"})})]})]})},s.id))})}),M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Create Announcement"}),e.jsx("button",{onClick:()=>{r(!1),h()},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(H,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Announcement Type"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2",children:["info","warning","success","maintenance","feature"].map(s=>e.jsx("button",{onClick:()=>l(t=>({...t,type:s})),className:`p-2 text-sm rounded-lg border transition-colors ${a.type===s?v(s):"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:a.title,onChange:s=>l(t=>({...t,title:s.target.value})),placeholder:"Enter announcement title...",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Message"}),e.jsx("textarea",{value:a.message,onChange:s=>l(t=>({...t,message:s.target.value})),placeholder:"Enter your announcement message...",rows:4,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Delivery Channel"}),e.jsx("div",{className:"flex gap-2",children:[{value:"notification",label:"In-App",icon:g},{value:"email",label:"Email",icon:p},{value:"both",label:"Both",icon:o}].map(s=>e.jsxs("button",{onClick:()=>l(t=>({...t,channel:s.value})),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${a.channel===s.value?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Target Audience"}),e.jsxs("select",{value:a.targetAudience,onChange:s=>l(t=>({...t,targetAudience:s.target.value})),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500",children:[e.jsx("option",{value:"all",children:"All Merchants"}),e.jsx("option",{value:"active",children:"Active Merchants Only"}),e.jsx("option",{value:"trialing",children:"Trial Merchants Only"}),e.jsx("option",{value:"suspended",children:"Suspended Merchants"}),e.jsx("option",{value:"specific",children:"Select Specific Merchants"})]}),a.targetAudience==="specific"&&e.jsx("div",{className:"mt-3 max-h-40 overflow-y-auto border border-slate-200 rounded-lg p-2 space-y-1",children:E.map(s=>e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-slate-50 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.targetTenantIds.includes(s.id),onChange:t=>{l(d=>({...d,targetTenantIds:t.target.checked?[...d.targetTenantIds,s.id]:d.targetTenantIds.filter(P=>P!==s.id)}))},className:"rounded border-slate-300 text-emerald-500 focus:ring-emerald-500"}),e.jsx("span",{className:"text-sm text-slate-700",children:s.name}),e.jsxs("span",{className:"text-xs text-slate-400",children:["(",s.subdomain,")"]})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Schedule (Optional)"}),e.jsx("input",{type:"datetime-local",value:a.scheduledAt,onChange:s=>l(t=>({...t,scheduledAt:s.target.value})),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Leave empty to save as draft or send immediately"})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{r(!1),h()},className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>j(!1),disabled:b||!a.title||!a.message,className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 transition-colors disabled:opacity-50",children:"Save as Draft"}),e.jsxs("button",{onClick:()=>j(!0),disabled:b||!a.title||!a.message,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#38BDF8] to-[#1E90FF] text-white rounded-lg hover:from-[#2BAEE8] hover:to-[#1A7FE8] transition-colors disabled:opacity-50",children:[e.jsx(A,{className:"w-4 h-4"}),a.scheduledAt?"Schedule":"Send Now"]})]})]})})]})};export{te as default};
