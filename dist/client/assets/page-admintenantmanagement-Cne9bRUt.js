import{j as e}from"./react-jsx-runtime-BBsywpoz.js";import{r}from"./react-core-KcGD0Z1V.js";import{ah as P,a9 as De,X as re,bk as le,R as Te,P as ie,k as Me,b4 as ne,a1 as Z,an as de,aS as ze,aQ as Be,b5 as oe,E as me,L as y,aZ as ce,bo as Oe,a8 as Re,bI as xe,bJ as ue,D as he,a2 as ge,aJ as Ie,ak as _e,T as H,ao as qe}from"./icons-chunk-AVFeydwE.js";import"./pkg-eventemitter3-CXfM2dhT.js";const Ue=["www","admin","adminlogin","superadmin","login","app","api","dashboard","tenant","support","cdn","static"],Ge=[{value:"starter",label:"Starter",description:"For small stores"},{value:"growth",label:"Growth",description:"For growing businesses"},{value:"enterprise",label:"Enterprise",description:"For large operations"}],pe={active:{bg:"bg-emerald-50",text:"text-emerald-700",dot:"bg-emerald-500"},trialing:{bg:"bg-amber-50",text:"text-amber-700",dot:"bg-amber-500"},suspended:{bg:"bg-red-50",text:"text-red-700",dot:"bg-red-500"},inactive:{bg:"bg-gray-100",text:"text-gray-600",dot:"bg-gray-400"},pending:{bg:"bg-blue-50",text:"text-blue-700",dot:"bg-blue-500"}},be=m=>m.trim().toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/^-+|-+$/g,"").slice(0,32),fe=m=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.trim()),Je=()=>"allinbangla.com".replace(/^https?:\/\//,"").replace(/\/$/,""),Ze=({tenants:m,onCreateTenant:je,onDeleteTenant:L,onRefreshTenants:c,onUpdateTenantStatus:F,onLoginAsMerchant:D,onUpdateDomain:T,isCreating:K=!1,deletingTenantId:v})=>{const[a,M]=r.useState({name:"",subdomain:"",contactEmail:"",contactName:"",adminEmail:"",adminPassword:"",adminPasswordConfirm:"",plan:"starter"}),[n,z]=r.useState({}),[o,B]=r.useState({}),[O,Ne]=r.useState(!1),[R,we]=r.useState(!1),[Y,ee]=r.useState(!1),[p,d]=r.useState(null),[C,I]=r.useState(null),[l,b]=r.useState(null),[x,_]=r.useState(null),[q,U]=r.useState(""),[S,G]=r.useState(""),[ye,se]=r.useState(null),[J,ae]=r.useState(!1),[E,Q]=r.useState(!1),[f,ve]=r.useState(""),[g,$]=r.useState("all"),[u,j]=r.useState(null),N=Je(),V=N.includes("localhost")?"http":"https";r.useEffect(()=>{if(!Y&&a.name){const s=be(a.name.replace(/\s+/g,"-"));M(t=>({...t,subdomain:s}))}},[a.name,Y]),r.useEffect(()=>{if(p){const s=setTimeout(()=>d(null),5e3);return()=>clearTimeout(s)}},[p]);const W=r.useCallback(()=>{const s={};return a.name.trim()||(s.name="Store name is required"),a.subdomain.trim()?Ue.includes(a.subdomain.toLowerCase())?s.subdomain="This subdomain is reserved":m.some(t=>t.subdomain?.toLowerCase()===a.subdomain.toLowerCase())?s.subdomain="Subdomain already exists":a.subdomain.length<3&&(s.subdomain="Subdomain must be at least 3 characters"):s.subdomain="Subdomain is required",a.contactEmail.trim()?fe(a.contactEmail)||(s.contactEmail="Invalid email format"):s.contactEmail="Contact email is required",a.adminEmail.trim()?fe(a.adminEmail)||(s.adminEmail="Invalid email format"):s.adminEmail="Admin email is required",a.adminPassword.trim()?a.adminPassword.length<6&&(s.adminPassword="Password must be at least 6 characters"):s.adminPassword="Password is required",a.adminPasswordConfirm.trim()?a.adminPassword!==a.adminPasswordConfirm&&(s.adminPasswordConfirm="Passwords do not match"):s.adminPasswordConfirm="Please confirm password",s},[a,m]);r.useEffect(()=>{Object.keys(o).length>0&&z(W())},[a,o,W]);const h=(s,t)=>{M(i=>({...i,[s]:t})),s==="subdomain"&&ee(!0)},w=s=>{B(t=>({...t,[s]:!0}))},te=()=>{M({name:"",subdomain:"",contactEmail:"",contactName:"",adminEmail:"",adminPassword:"",adminPasswordConfirm:"",plan:"starter"}),z({}),B({}),ee(!1)},Ce=async s=>{s.preventDefault(),B({name:!0,subdomain:!0,contactEmail:!0,adminEmail:!0,adminPassword:!0,adminPasswordConfirm:!0});const t=W();if(z(t),Object.keys(t).length>0){d({type:"error",message:"Please fix the errors in the form"});return}try{const i={name:a.name.trim(),subdomain:a.subdomain.trim(),contactEmail:a.contactEmail.trim(),contactName:a.contactName.trim()||void 0,adminEmail:a.adminEmail.trim(),adminPassword:a.adminPassword.trim(),plan:a.plan};await je(i,{activate:!0}),d({type:"success",message:`ðŸŽ‰ "${a.name}" created successfully! Store URL: ${V}://${a.subdomain}.${N}`}),te(),Q(!1),c&&await c()}catch(i){const A=i instanceof Error?i.message:"Failed to create tenant";d({type:"error",message:A})}},Se=async()=>{if(!(!C||!L))try{await L(C.id),d({type:"success",message:`"${C.name}" has been deleted`}),I(null)}catch(s){const t=s instanceof Error?s.message:"Failed to delete tenant";d({type:"error",message:t})}},Ee=async()=>{if(!(!c||J)){ae(!0);try{await c(),d({type:"success",message:"Tenant list refreshed"})}catch{d({type:"error",message:"Failed to refresh tenants"})}finally{ae(!1)}}},ke=(s,t)=>{navigator.clipboard.writeText(s),se(t),setTimeout(()=>se(null),2e3)},Pe=s=>s?`${V}://${s}.${N}`:null,$e=async()=>{if(!l||!F)return;const{tenant:s,action:t}=l;let i;switch(t){case"approve":i="active";break;case"reject":i="inactive";break;case"suspend":i="suspended";break;case"activate":i="active";break;default:return}j(s.id);try{await F(s.id,i,q||void 0),d({type:"success",message:`Tenant "${s.name}" ${t}d successfully`}),b(null),U(""),c&&await c()}catch(A){const Fe=A instanceof Error?A.message:`Failed to ${t} tenant`;d({type:"error",message:Fe})}finally{j(null)}},Ae=async s=>{if(D){j(s.id);try{await D(s.id),d({type:"success",message:`Logging in as ${s.name}...`})}catch(t){const i=t instanceof Error?t.message:"Failed to login as merchant";d({type:"error",message:i})}finally{j(null)}}},Le=async()=>{if(!(!x||!T||!S.trim())){j(x.id);try{await T(x.id,S.trim(),"custom"),d({type:"success",message:`Custom domain "${S}" added to ${x.name}`}),_(null),G(""),c&&await c()}catch(s){const t=s instanceof Error?s.message:"Failed to update domain";d({type:"error",message:t})}finally{j(null)}}},X=m.filter(s=>{const t=!f||s.name.toLowerCase().includes(f.toLowerCase())||s.subdomain?.toLowerCase().includes(f.toLowerCase())||s.contactEmail?.toLowerCase().includes(f.toLowerCase()),i=g==="all"||s.status===g;return t&&i}),k={total:m.length,active:m.filter(s=>s.status==="active").length,trialing:m.filter(s=>s.status==="trialing").length,pending:m.filter(s=>s.status==="pending").length,suspended:m.filter(s=>s.status==="suspended").length};return e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[p&&e.jsxs("div",{className:`fixed to p-4 left-4 right-4 sm:left-auto sm:right-4 z-50 sm:max-w-md p-4 rounded-xl shadow-lg border flex items-start gap-3 animate-in slide-in-from-right ${p.type==="success"?"bg-emerald-50 border-emerald-200 text-emerald-800":"bg-red-50 border-red-200 text-red-800"}`,children:[p.type==="success"?e.jsx(P,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}):e.jsx(De,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm flex-1",children:p.message}),e.jsx("button",{onClick:()=>d(null),className:"text-current opacity-50 hover:opacity-100",children:e.jsx(re,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-emerald-900 rounded-2xl p-4 sm:p-6 text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-white/10 rounded-xl",children:e.jsx(le,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Store Lists"}),e.jsx("p",{className:"text-white/70 text-xs sm:text-sm",children:"Create and manage multi-tenant storefronts"})]})]}),e.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",children:e.jsxs("div",{className:"flex gap-3 sm:gap-4 text-sm min-w-max",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:k.total}),e.jsx("p",{className:"text-white/60 text-xs",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-emerald-400",children:k.active}),e.jsx("p",{className:"text-white/60 text-xs",children:"Active"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-amber-400",children:k.trialing}),e.jsx("p",{className:"text-white/60 text-xs",children:"Trial"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-blue-400",children:k.pending}),e.jsx("p",{className:"text-white/60 text-xs",children:"Pending"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-red-400",children:k.suspended}),e.jsx("p",{className:"text-white/60 text-xs",children:"Suspended"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[c&&e.jsx("button",{onClick:Ee,disabled:J,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition disabled:opacity-50",children:e.jsx(Te,{className:`w-5 h-5 ${J?"animate-spin":""}`})}),e.jsxs("button",{onClick:()=>Q(!E),className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-emerald-500 hover:bg-emerald-600 rounded-lg font-medium transition text-sm sm:text-base",children:[E?e.jsx(re,{className:"w-4 h-4"}):e.jsx(ie,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:E?"Cancel":"Add Shop"}),e.jsx("span",{className:"sm:hidden",children:E?"":"Add"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border shadow-sm p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("input",{type:"text",placeholder:"Search by name, subdomain, or email...",value:f,onChange:s=>ve(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-base"})}),e.jsx("div",{className:"overflow-x-auto -mx-3 px-3 sm:mx-0 sm:px-0",children:e.jsxs("div",{className:"flex gap-2 min-w-max",children:[e.jsx("button",{onClick:()=>$("all"),className:`px-3 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap ${g==="all"?"bg-emerald-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),e.jsx("button",{onClick:()=>$("pending"),className:`px-3 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap ${g==="pending"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pending"}),e.jsx("button",{onClick:()=>$("active"),className:`px-3 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap ${g==="active"?"bg-emerald-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Active"}),e.jsx("button",{onClick:()=>$("suspended"),className:`px-3 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap ${g==="suspended"?"bg-red-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Suspended"})]})})]})}),E&&e.jsxs("form",{onSubmit:Ce,className:"bg-white rounded-2xl border shadow-sm p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b",children:[e.jsx(Me,{className:"w-5 h-5 text-emerald-500"}),e.jsx("h2",{className:"text-base sm:text-lg font-semibold",children:"Create New Storefront"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Store Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:a.name,onChange:s=>h("name",s.target.value),onBlur:()=>w("name"),placeholder:"My Awesome Store",className:`w-full pl-10 pr-4 py-2.5 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${o.name&&n.name?"border-red-300 bg-red-50":"border-gray-300"}`})]}),o.name&&n.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subdomain ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:a.subdomain,onChange:s=>h("subdomain",be(s.target.value)),onBlur:()=>w("subdomain"),placeholder:"mystore",className:`w-full pl-10 pr-4 py-2.5 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${o.subdomain&&n.subdomain?"border-red-300 bg-red-50":"border-gray-300"}`})]}),a.subdomain&&!n.subdomain&&e.jsxs("p",{className:"mt-1 text-sm text-emerald-600",children:["URL: ",V,"://",a.subdomain,".",N]}),o.subdomain&&n.subdomain&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.subdomain})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Contact Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"email",value:a.contactEmail,onChange:s=>h("contactEmail",s.target.value),onBlur:()=>w("contactEmail"),placeholder:"contact@store.com",className:`w-full pl-10 pr-4 py-2.5 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${o.contactEmail&&n.contactEmail?"border-red-300 bg-red-50":"border-gray-300"}`})]}),o.contactEmail&&n.contactEmail&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.contactEmail})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Contact Name ",e.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:a.contactName,onChange:s=>h("contactName",s.target.value),placeholder:"John Doe",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Admin Login Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"email",value:a.adminEmail,onChange:s=>h("adminEmail",s.target.value),onBlur:()=>w("adminEmail"),placeholder:"admin@store.com",className:`w-full pl-10 pr-4 py-2.5 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${o.adminEmail&&n.adminEmail?"border-red-300 bg-red-50":"border-gray-300"}`})]}),o.adminEmail&&n.adminEmail&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.adminEmail})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plan"}),e.jsx("select",{value:a.plan,onChange:s=>h("plan",s.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:Ge.map(s=>e.jsxs("option",{value:s.value,children:[s.label," - ",s.description]},s.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Admin Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:O?"text":"password",value:a.adminPassword,onChange:s=>h("adminPassword",s.target.value),onBlur:()=>w("adminPassword"),placeholder:"Min 6 characters",className:`w-full px-4 py-2.5 pr-10 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${o.adminPassword&&n.adminPassword?"border-red-300 bg-red-50":"border-gray-300"}`}),e.jsx("button",{type:"button",onClick:()=>Ne(!O),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:O?e.jsx(oe,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"})})]}),o.adminPassword&&n.adminPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.adminPassword})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Confirm Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:R?"text":"password",value:a.adminPasswordConfirm,onChange:s=>h("adminPasswordConfirm",s.target.value),onBlur:()=>w("adminPasswordConfirm"),placeholder:"Confirm password",className:`w-full px-4 py-2.5 pr-10 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${o.adminPasswordConfirm&&n.adminPasswordConfirm?"border-red-300 bg-red-50":"border-gray-300"}`}),e.jsx("button",{type:"button",onClick:()=>we(!R),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:R?e.jsx(oe,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"})})]}),o.adminPasswordConfirm&&n.adminPasswordConfirm&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.adminPasswordConfirm}),a.adminPassword&&a.adminPasswordConfirm&&a.adminPassword===a.adminPasswordConfirm&&e.jsxs("p",{className:"mt-1 text-sm text-emerald-600 flex items-center gap-1",children:[e.jsx(P,{className:"w-3 h-3"})," Passwords match"]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>{te(),Q(!1)},className:"px-4 py-2.5 sm:py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition text-center",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:K,className:"flex items-center justify-center gap-2 px-3 sm:px-4 lg:px-6 py-2.5 sm:py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",children:K?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4"}),"Create Tenant"]})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsxs("h2",{className:"font-semibold text-gray-800",children:["All Tenants (",X.length,")"]})}),X.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(le,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500",children:f||g!=="all"?"No tenants match your filters":"No tenants yet. Create your first storefront!"})]}):e.jsx("div",{className:"divide-y",children:X.map(s=>{const t=Pe(s.subdomain),i=pe[s.status||"inactive"]||pe.inactive;return e.jsx("div",{className:"p-3 sm:p-4 hover:bg-gray-50 transition",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:"p-2 sm:p-2.5 bg-slate-100 rounded-lg flex-shrink-0",children:e.jsx(ne,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate text-sm sm:text-base",children:s.name}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-medium ${i.bg} ${i.text}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${i.dot}`}),s.status||"inactive"]}),e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full text-xs",children:s.plan||"starter"})]}),e.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4 text-sm text-gray-500",children:[t&&e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-emerald-600 hover:text-emerald-700 hover:underline truncate",children:[e.jsx(Z,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[s.subdomain,".",N]}),e.jsx(ce,{className:"w-3 h-3 flex-shrink-0"})]}),s.adminEmail&&e.jsxs("span",{className:"flex items-center gap-1 truncate",children:[e.jsx(de,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.adminEmail})]})]}),s.createdAt&&e.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Created: ",new Date(s.createdAt).toLocaleDateString()]})]})]}),e.jsx("div",{className:"overflow-x-auto -mx-3 px-3 sm:mx-0 sm:px-0 -mb-1 pb-1 sm:mb-0 sm:pb-0",children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0 min-w-max",children:[D&&s.status==="active"&&e.jsx("button",{onClick:()=>Ae(s),disabled:u===s.id,className:"p-2 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition disabled:opacity-50",title:"Login as merchant",children:u===s.id?e.jsx(y,{className:"w-4 h-4 animate-spin"}):e.jsx(Oe,{className:"w-4 h-4"})}),T&&e.jsx("button",{onClick:()=>_(s),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Manage domains",children:e.jsx(Re,{className:"w-4 h-4"})}),F&&e.jsxs(e.Fragment,{children:[s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>b({tenant:s,action:"approve"}),className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition",title:"Approve tenant",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b({tenant:s,action:"reject"}),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Reject tenant",children:e.jsx(ue,{className:"w-4 h-4"})})]}),s.status==="active"&&e.jsx("button",{onClick:()=>b({tenant:s,action:"suspend"}),className:"p-2 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition",title:"Suspend tenant",children:e.jsx(he,{className:"w-4 h-4"})}),s.status==="suspended"&&e.jsx("button",{onClick:()=>b({tenant:s,action:"activate"}),className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition",title:"Activate tenant",children:e.jsx(ge,{className:"w-4 h-4"})})]}),t&&e.jsx("button",{onClick:()=>ke(t,s.id),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition",title:"Copy URL",children:ye===s.id?e.jsx(Ie,{className:"w-4 h-4 text-emerald-500"}):e.jsx(_e,{className:"w-4 h-4"})}),t&&e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition",title:"Open store",children:e.jsx(ce,{className:"w-4 h-4"})}),L&&e.jsx("button",{onClick:()=>I(s),disabled:v===s.id,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition disabled:opacity-50",title:"Delete tenant",children:v===s.id?e.jsx(y,{className:"w-4 h-4 animate-spin"}):e.jsx(H,{className:"w-4 h-4"})})]})})]})},s.id||s._id)})})]}),C&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4 bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-t-2xl sm:rounded-2xl shadow-xl max-w-md w-full p-4 sm:p-6 animate-in zoom-in-95 safe-bottom",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-600 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Delete Tenant"})]}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Are you sure you want to delete ",e.jsx("strong",{children:C.name}),"?"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"This will permanently remove the tenant, all its data, and the admin user account. This action cannot be undone."}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3",children:[e.jsx("button",{onClick:()=>I(null),disabled:!!v,className:"px-4 py-2.5 sm:py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition text-center",children:"Cancel"}),e.jsx("button",{onClick:Se,disabled:!!v,className:"flex items-center justify-center gap-2 px-4 py-2.5 sm:py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition disabled:opacity-50",children:v?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-4 h-4"}),"Delete"]})})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-4 sm:p-6 animate-in zoom-in-95",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("div",{className:`p-2 rounded-lg ${l.action==="approve"?"bg-emerald-100 text-emerald-600":l.action==="reject"?"bg-red-100 text-red-600":l.action==="suspend"?"bg-orange-100 text-orange-600":"bg-blue-100 text-blue-600"}`,children:[l.action==="approve"&&e.jsx(xe,{className:"w-5 h-5"}),l.action==="reject"&&e.jsx(ue,{className:"w-5 h-5"}),l.action==="suspend"&&e.jsx(he,{className:"w-5 h-5"}),l.action==="activate"&&e.jsx(ge,{className:"w-5 h-5"})]}),e.jsxs("h3",{className:"text-lg font-semibold capitalize",children:[l.action," Tenant"]})]}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Are you sure you want to ",l.action," ",e.jsx("strong",{children:l.tenant.name}),"?"]}),(l.action==="reject"||l.action==="suspend")&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason ",l.action==="reject"?"(required)":"(optional)"]}),e.jsx("textarea",{value:q,onChange:s=>U(s.target.value),placeholder:`Why are you ${l.action}ing this tenant?`,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{b(null),U("")},disabled:!!u,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition",children:"Cancel"}),e.jsx("button",{onClick:$e,disabled:!!u||l.action==="reject"&&!q.trim(),className:`flex items-center gap-2 px-4 py-2 text-white rounded-lg transition disabled:opacity-50 ${l.action==="approve"?"bg-emerald-600 hover:bg-emerald-700":l.action==="reject"?"bg-red-600 hover:bg-red-700":l.action==="suspend"?"bg-orange-600 hover:bg-orange-700":"bg-blue-600 hover:bg-blue-700"}`,children:u?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4"}),"Confirm"]})})]})]})}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full p-4 sm:p-6 animate-in zoom-in-95",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-600 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Manage Custom Domain"})]}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Add a custom domain for ",e.jsx("strong",{children:x.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Domains"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"px-3 py-2 bg-gray-50 rounded-lg text-sm",children:[e.jsx("span",{className:"text-emerald-600 font-medium",children:"Primary:"})," ",x.subdomain,".",N]}),x.customDomain&&e.jsxs("div",{className:"px-3 py-2 bg-blue-50 rounded-lg text-sm flex items-center justify-between",children:[e.jsxs("span",{children:[e.jsx("span",{className:"text-blue-600 font-medium",children:"Custom:"})," ",x.customDomain]}),e.jsxs("span",{className:"flex items-center gap-1 text-emerald-600 text-xs",children:[e.jsx(P,{className:"w-3 h-3"})," SSL Active"]})]})]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-medium text-amber-800 mb-2 flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4"}),"Before adding a domain, configure DNS:"]}),e.jsxs("ol",{className:"text-xs text-amber-700 space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:"Go to your domain registrar's DNS settings"}),e.jsxs("li",{children:["Add an ",e.jsx("strong",{children:"A record"})," pointing to: ",e.jsx("code",{className:"bg-amber-100 px-1 rounded",children:"159.198.47.126"})]}),e.jsx("li",{children:"Wait for DNS propagation (usually 5-30 minutes)"}),e.jsx("li",{children:"Come back and add the domain below"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Custom Domain"}),e.jsx("input",{type:"text",value:S,onChange:s=>G(s.target.value.replace(/^https?:\/\//,"").replace(/\/$/,"")),placeholder:"example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the custom domain without http:// or https://. SSL will be configured automatically."})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{_(null),G("")},disabled:!!u,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition",children:"Cancel"}),e.jsx("button",{onClick:Le,disabled:!!u||!S.trim(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50",children:u?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-4 h-4 animate-spin"}),"Setting up..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4"}),"Setup Domain & SSL"]})})]})]})})]})};export{Ze as default};
