import{e as U,o as X}from"./pkg-lodash-CH_GMSlH.js";import{z as Y,A as Z,B as V,n as ee}from"./recharts-util-chartutils-xkzwGM0S.js";import{b as te}from"./recharts-util-reactutils-Is6lFQr1.js";import{d as re}from"./recharts-util-datautils-CozywqZh.js";import{B as ne}from"./recharts-cartesian-bar-ByT8u3AN.js";function m(n){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(n)}function ae(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function D(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,L(t.key),t)}}function ie(n,e,r){return e&&D(n.prototype,e),r&&D(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}function H(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,t)}return r}function u(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H(Object(r),!0).forEach(function(t){x(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function x(n,e,r){return e=L(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function L(n){var e=oe(n,"string");return m(e)=="symbol"?e:String(e)}function oe(n,e){if(m(n)!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var t=r.call(n,e);if(m(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var ye=function(e,r,t,a,o){var c=e.width,h=e.height,l=e.layout,A=e.children,N=Object.keys(r),v={left:t.left,leftMirror:t.left,right:c-t.right,rightMirror:c-t.right,top:t.top,topMirror:t.top,bottom:h-t.bottom,bottomMirror:h-t.bottom},$=!!te(A,ne);return N.reduce(function(q,E){var i=r[E],f=i.orientation,P=i.domain,I=i.padding,d=I===void 0?{}:I,p=i.mirror,F=i.reversed,w="".concat(f).concat(p?"Mirror":""),s,g,M,j,y;if(i.type==="number"&&(i.padding==="gap"||i.padding==="no-gap")){var J=P[1]-P[0],k=1/0,_=i.categoricalDomain.sort();_.forEach(function(Q,T){T>0&&(k=Math.min((Q||0)-(_[T-1]||0),k))});var R=k/J,S=i.layout==="vertical"?t.height:t.width;if(i.padding==="gap"&&(s=R*S/2),i.padding==="no-gap"){var z=re(e.barCategoryGap,R*S),C=R*S/2;s=C-z-(C-z)/S*z}}a==="xAxis"?g=[t.left+(d.left||0)+(s||0),t.left+t.width-(d.right||0)-(s||0)]:a==="yAxis"?g=l==="horizontal"?[t.top+t.height-(d.bottom||0),t.top+(d.top||0)]:[t.top+(d.top||0)+(s||0),t.top+t.height-(d.bottom||0)-(s||0)]:g=i.range,F&&(g=[g[1],g[0]]);var W=Y(i,o,$),O=W.scale,B=W.realScaleType;O.domain(P).range(g),Z(O);var K=V(O,u(u({},i),{},{realScaleType:B}));a==="xAxis"?(y=f==="top"&&!p||f==="bottom"&&p,M=t.left,j=v[w]-y*i.height):a==="yAxis"&&(y=f==="left"&&!p||f==="right"&&p,M=v[w]-y*i.width,j=t.top);var b=u(u(u({},i),K),{},{realScaleType:B,x:M,y:j,scale:O,width:a==="xAxis"?t.width:i.width,height:a==="yAxis"?t.height:i.height});return b.bandSize=ee(b,K),!i.hide&&a==="xAxis"?v[w]+=(y?-1:1)*b.height:i.hide||(v[w]+=(y?-1:1)*b.width),u(u({},q),{},x({},E,b))},{})},ce=function(e,r){var t=e.x,a=e.y,o=r.x,c=r.y;return{x:Math.min(t,o),y:Math.min(a,c),width:Math.abs(o-t),height:Math.abs(c-a)}},fe=function(e){var r=e.x1,t=e.y1,a=e.x2,o=e.y2;return ce({x:r,y:t},{x:a,y:o})},G=(function(){function n(e){ae(this,n),this.scale=e}return ie(n,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.bandAware,o=t.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}case"end":{var h=this.bandwidth?this.bandwidth():0;return this.scale(r)+h}default:return this.scale(r)}if(a){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var t=this.range(),a=t[0],o=t[t.length-1];return a<=o?r>=a&&r<=o:r>=o&&r<=a}}],[{key:"create",value:function(r){return new n(r)}}]),n})();x(G,"EPS",1e-4);var pe=function(e){var r=Object.keys(e).reduce(function(t,a){return u(u({},t),{},x({},a,G.create(e[a])))},{});return u(u({},r),{},{apply:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=o.bandAware,h=o.position;return X(a,function(l,A){return r[A].apply(l,{bandAware:c,position:h})})},isInRange:function(a){return U(a,function(o,c){return r[c].isInRange(o)})}})};function ue(n){return(n%180+180)%180}var be=function(e){var r=e.width,t=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=ue(a),c=o*Math.PI/180,h=Math.atan(t/r),l=c>h&&c<Math.PI-h?t/Math.sin(c):r/Math.cos(c);return Math.abs(l)};export{fe as a,pe as c,ye as f,be as g,ce as r};
