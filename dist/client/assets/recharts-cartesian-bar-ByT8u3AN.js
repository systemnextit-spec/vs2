import{R as A,r as ft}from"./react-core-KcGD0Z1V.js";import{c as dt}from"./pkg-clsx-B-dksMZM.js";import{A as mt}from"./pkg-react-smooth-DrFaRA5B.js";import{i as ht,a as vt}from"./pkg-lodash-CH_GMSlH.js";import{L as K}from"./recharts-container-layer-zUiNMosr.js";import{E as yt}from"./recharts-cartesian-errorbar-DOkATP1J.js";import{C as bt}from"./recharts-component-cell-DXyV_-6l.js";import{L as gt}from"./recharts-component-labellist-DFJ3Oa0j.js";import{u as At,i as I,m as H}from"./recharts-util-datautils-CozywqZh.js";import{f as V,a as nt}from"./recharts-util-reactutils-Is6lFQr1.js";import{G as xt}from"./recharts-util-global-C7iY84J1.js";import{g as ot,a as Ot,t as Pt,b as tt,c as wt,f as Et}from"./recharts-util-chartutils-xkzwGM0S.js";import{a as et}from"./recharts-util-types-TQdZ910Z.js";import{B as at,m as St}from"./recharts-util-barutils-Gm8of_3k.js";var kt=["value","background"],st;function R(t){"@babel/helpers - typeof";return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},R(t)}function jt(t,a){if(t==null)return{};var r=Bt(t,a),e,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(i=0;i<n.length;i++)e=n[i],!(a.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(t,e)&&(r[e]=t[e])}return r}function Bt(t,a){if(t==null)return{};var r={},e=Object.keys(t),i,n;for(n=0;n<e.length;n++)i=e[n],!(a.indexOf(i)>=0)&&(r[i]=t[i]);return r}function M(){return M=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t},M.apply(this,arguments)}function rt(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);a&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,e)}return r}function u(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?rt(Object(r),!0).forEach(function(e){k(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Dt(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function it(t,a){for(var r=0;r<a.length;r++){var e=a[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,ct(e.key),e)}}function _t(t,a,r){return a&&it(t.prototype,a),r&&it(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function It(t,a,r){return a=C(a),Rt(t,lt()?Reflect.construct(a,r||[],C(t).constructor):a.apply(t,r))}function Rt(t,a){if(a&&(R(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(t)}function lt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lt=function(){return!!t})()}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},C(t)}function T(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zt(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),a&&G(t,a)}function G(t,a){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},G(t,a)}function k(t,a,r){return a=ct(a),a in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function ct(t){var a=Nt(t,"string");return R(a)=="symbol"?a:String(a)}function Nt(t,a){if(R(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var e=r.call(t,a);if(R(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $=(function(t){zt(a,t);function a(){var r;Dt(this,a);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return r=It(this,a,[].concat(i)),k(T(r),"state",{isAnimationFinished:!1}),k(T(r),"id",At("recharts-bar-")),k(T(r),"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),k(T(r),"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return _t(a,[{key:"renderRectanglesStatically",value:function(e){var i=this,n=this.props,o=n.shape,b=n.dataKey,g=n.activeIndex,c=n.activeBar,m=V(this.props,!1);return e&&e.map(function(s,p){var f=p===g,d=f?c:o,h=u(u(u({},m),s),{},{isActive:f,option:d,index:p,dataKey:b,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return A.createElement(K,M({className:"recharts-bar-rectangle"},et(i.props,s,p),{key:"rectangle-".concat(s?.x,"-").concat(s?.y,"-").concat(s?.value)}),A.createElement(at,h))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,i=this.props,n=i.data,o=i.layout,b=i.isAnimationActive,g=i.animationBegin,c=i.animationDuration,m=i.animationEasing,s=i.animationId,p=this.state.prevData;return A.createElement(mt,{begin:g,duration:c,isActive:b,easing:m,from:{t:0},to:{t:1},key:"bar-".concat(s),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var d=f.t,h=n.map(function(l,j){var v=p&&p[j];if(v){var x=I(v.x,l.x),D=I(v.y,l.y),B=I(v.width,l.width),z=I(v.height,l.height);return u(u({},l),{},{x:x(d),y:D(d),width:B(d),height:z(d)})}if(o==="horizontal"){var L=I(0,l.height),O=L(d);return u(u({},l),{},{y:l.y+l.height-O,height:O})}var E=I(0,l.width),y=E(d);return u(u({},l),{},{width:y})});return A.createElement(K,null,e.renderRectanglesStatically(h))})}},{key:"renderRectangles",value:function(){var e=this.props,i=e.data,n=e.isAnimationActive,o=this.state.prevData;return n&&i&&i.length&&(!o||!ht(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var e=this,i=this.props,n=i.data,o=i.dataKey,b=i.activeIndex,g=V(this.props.background,!1);return n.map(function(c,m){var s=c.background,p=jt(c,kt);if(!s)return null;var f=u(u(u(u(u({},p),{},{fill:"#eee"},s),g),et(e.props,c,m)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:o,index:m,key:"background-bar-".concat(m),className:"recharts-bar-background-rectangle"});return A.createElement(at,M({option:e.props.background,isActive:m===b},f))})}},{key:"renderErrorBar",value:function(e,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,o=n.data,b=n.xAxis,g=n.yAxis,c=n.layout,m=n.children,s=nt(m,yt);if(!s)return null;var p=c==="vertical"?o[0].height/2:o[0].width/2,f=function(l,j){var v=Array.isArray(l.value)?l.value[1]:l.value;return{x:l.x,y:l.y,value:v,errorVal:ot(l,j)}},d={clipPath:e?"url(#clipPath-".concat(i,")"):null};return A.createElement(K,d,s.map(function(h){return A.cloneElement(h,{key:"error-bar-".concat(i,"-").concat(h.props.dataKey),data:o,xAxis:b,yAxis:g,layout:c,offset:p,dataPointFormatter:f})}))}},{key:"render",value:function(){var e=this.props,i=e.hide,n=e.data,o=e.className,b=e.xAxis,g=e.yAxis,c=e.left,m=e.top,s=e.width,p=e.height,f=e.isAnimationActive,d=e.background,h=e.id;if(i||!n||!n.length)return null;var l=this.state.isAnimationFinished,j=dt("recharts-bar",o),v=b&&b.allowDataOverflow,x=g&&g.allowDataOverflow,D=v||x,B=vt(h)?this.id:h;return A.createElement(K,{className:j},v||x?A.createElement("defs",null,A.createElement("clipPath",{id:"clipPath-".concat(B)},A.createElement("rect",{x:v?c:c-s/2,y:x?m:m-p/2,width:v?s:s*2,height:x?p:p*2}))):null,A.createElement(K,{className:"recharts-bar-rectangles",clipPath:D?"url(#clipPath-".concat(B,")"):null},d?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(D,B),(!f||l)&&gt.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(e,i){return e.animationId!==i.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:i.curData}:e.data!==i.curData?{curData:e.data}:null}}]),a})(ft.PureComponent);st=$;k($,"displayName","Bar");k($,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!xt.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});k($,"getComposedData",function(t){var a=t.props,r=t.item,e=t.barPosition,i=t.bandSize,n=t.xAxis,o=t.yAxis,b=t.xAxisTicks,g=t.yAxisTicks,c=t.stackedData,m=t.dataStartIndex,s=t.displayedData,p=t.offset,f=Et(e,r);if(!f)return null;var d=a.layout,h=r.props,l=h.dataKey,j=h.children,v=h.minPointSize,x=d==="horizontal"?o:n,D=c?x.scale.domain():null,B=Ot({numericAxis:x}),z=nt(j,bt),L=s.map(function(O,E){var y,N,_,P,w,W;c?y=Pt(c[m+E],D):(y=ot(O,l),Array.isArray(y)||(y=[B,y]));var S=St(v,st.defaultProps.minPointSize)(y[1],E);if(d==="horizontal"){var q,X=[o.scale(y[0]),o.scale(y[1])],Y=X[0],F=X[1];N=tt({axis:n,ticks:b,bandSize:i,offset:f.offset,entry:O,index:E}),_=(q=F??Y)!==null&&q!==void 0?q:void 0,P=f.size;var J=Y-F;if(w=Number.isNaN(J)?0:J,W={x:N,y:o.y,width:P,height:o.height},Math.abs(S)>0&&Math.abs(w)<Math.abs(S)){var Q=H(w||S)*(Math.abs(S)-Math.abs(w));_-=Q,w+=Q}}else{var U=[n.scale(y[0]),n.scale(y[1])],Z=U[0],ut=U[1];if(N=Z,_=tt({axis:o,ticks:g,bandSize:i,offset:f.offset,entry:O,index:E}),P=ut-Z,w=f.size,W={x:n.x,y:_,width:n.width,height:w},Math.abs(S)>0&&Math.abs(P)<Math.abs(S)){var pt=H(P||S)*(Math.abs(S)-Math.abs(P));P+=pt}}return u(u(u({},O),{},{x:N,y:_,width:P,height:w,value:c?y:y[1],payload:O,background:W},z&&z[E]&&z[E].props),{},{tooltipPayload:[wt(r,O)],tooltipPosition:{x:N+P/2,y:_+w/2}})});return u({data:L,layout:d},p)});export{$ as B};
