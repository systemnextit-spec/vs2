const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pkg-socket-D1bUdbwx.js","assets/pkg-engine-io-BZqIjJKj.js","assets/pkg-@socket.io-component-emitter-Dkula2eQ.js","assets/pkg-socket.io-parser-CafqElEs.js","assets/pkg-toast-Dpd4iwUK.js","assets/react-core-KcGD0Z1V.js","assets/pkg-eventemitter3-CXfM2dhT.js","assets/pkg-goober-N6sOClW1.js"])))=>i.map(i=>d[i]);
import{j as e}from"./react-jsx-runtime-BBsywpoz.js";import{r as n,R as Xr}from"./react-core-KcGD0Z1V.js";import{io as en}from"./pkg-socket-D1bUdbwx.js";import{_ as rr,g as tn,D as Sa,a as sn,S as an,A as Vs,s as us}from"./cmp-approutes-tsx-DORRjFJg.js";import{g as At,d as ze,A as rn}from"./cmp-addnewduemodal-tsx-OjU2U-0e.js";import{a0 as nn,b as qe,g as _e,a1 as La,a2 as Pa,S as it,X as ge,a3 as on,a4 as ma,a5 as ln,a6 as cn,a7 as dn,a8 as xn,a9 as pn,aa as mn,ab as hn,n as Ut,ac as un,ad as gn,p as ha,ae as ua,P as ot,af as fn,ag as ns,L as nt,ah as Vt,N as _s,T as lt,ai as Hs,d as bn,w as Da,aj as yn,ak as ga,al as jn,C as $s,am as _a,an as wn,ao as Aa,ap as nr,aq as vn,E as qs,a as As,ar as or,U as Mt,as as Ta,at as Nn,au as kn,av as Cn,aw as Sn,ax as Ln,ay as Pn,az as Dn,I as fa,aA as _n,Z as An,u as Tn,aB as ba,R as $t,aC as En,aD as In,aE as Mn}from"./icons-chunk-AVFeydwE.js";import{n as Ke,u as $n,c as zn}from"./cmp-admincustomization-BgTFiuh2.js";import{D as On}from"./cmp-modern-dashboard-C6grFkCj.js";import he,{toast as Q}from"./pkg-toast-Dpd4iwUK.js";import{p as Fn}from"./cmp-invoiceprinttemplate-tsx-CUwUe6zE.js";import{P as Ea}from"./pkg-papaparse-BEpmA8em.js";import{r as Rn,u as Bn}from"./pkg-xlsx-BljOZNTS.js";import{A as Wn}from"./page-adminnote-C1Ob2d7z.js";import{D as Un}from"./cmp-duehistorymodal-tsx-KQ79TbYj.js";const ja=n.createContext(void 0),gs=()=>{if(typeof window>"u")return null;const t=window.location.hostname.match(/^([a-z0-9-]+)\.(systemnextit\.com|cartnget\.shop)$/i);return t?t[1]:null},fs="https://allinbangla.com",Xt="admin_auth_token",zt="admin_auth_user",es="admin_auth_permissions",Ml=({children:a})=>{const[t,s]=n.useState({user:null,token:null,permissions:{},isAuthenticated:!1,isLoading:!0,error:null});n.useEffect(()=>{(async()=>{try{const j=localStorage.getItem(Xt),z=localStorage.getItem(zt),L=localStorage.getItem(es);if(j&&z){const T=JSON.parse(z),I=L?JSON.parse(L):{};try{const E=gs(),W={Authorization:`Bearer ${j}`,"Content-Type":"application/json"};E&&(W["x-tenant-subdomain"]=E);const C=await fetch(`${fs}/api/auth/me`,{headers:W});if(C.ok){const A=await C.json();s({user:A.user,token:j,permissions:A.permissions,isAuthenticated:!0,isLoading:!1,error:null}),localStorage.setItem(zt,JSON.stringify(A.user)),localStorage.setItem(es,JSON.stringify(A.permissions))}else C.status===401?(console.warn("[Auth] Token invalid (401), clearing session"),r(),s(A=>({...A,isLoading:!1}))):(console.warn("[Auth] Token validation failed with status:",C.status,"- using cached session"),s({user:T,token:j,permissions:I,isAuthenticated:!0,isLoading:!1,error:null}))}catch{console.warn("[Auth] Network error during token validation, using cached session"),s({user:T,token:j,permissions:I,isAuthenticated:!0,isLoading:!1,error:null})}}else s(T=>({...T,isLoading:!1}))}catch(j){console.error("Error loading stored auth:",j),r(),s(z=>({...z,isLoading:!1}))}})()},[]);const r=()=>{localStorage.removeItem(Xt),localStorage.removeItem(zt),localStorage.removeItem(es)},l=n.useCallback(async _=>{s(j=>({...j,isLoading:!0,error:null}));try{const j=gs(),z={"Content-Type":"application/json"};j&&(z["x-tenant-subdomain"]=j);const L=await fetch(`${fs}/api/auth/login`,{method:"POST",headers:z,body:JSON.stringify(_)}),T=await L.json();if(!L.ok)throw new Error(T.error||"Login failed");localStorage.setItem(Xt,T.token),localStorage.setItem(zt,JSON.stringify(T.user)),localStorage.setItem(es,JSON.stringify(T.permissions)),s({user:T.user,token:T.token,permissions:T.permissions,isAuthenticated:!0,isLoading:!1,error:null})}catch(j){const z=j instanceof Error?j.message:"Login failed";throw s(L=>({...L,isLoading:!1,error:z})),j}},[]),i=n.useCallback(async _=>{s(j=>({...j,isLoading:!0,error:null}));try{const j=gs(),z={"Content-Type":"application/json"};j&&(z["x-tenant-subdomain"]=j);const L=await fetch(`${fs}/api/auth/register`,{method:"POST",headers:z,body:JSON.stringify(_)}),T=await L.json();if(!L.ok)throw new Error(T.error||"Registration failed");localStorage.setItem(Xt,T.token),localStorage.setItem(zt,JSON.stringify(T.user)),localStorage.setItem(es,JSON.stringify(T.permissions)),s({user:T.user,token:T.token,permissions:T.permissions,isAuthenticated:!0,isLoading:!1,error:null})}catch(j){const z=j instanceof Error?j.message:"Registration failed";throw s(L=>({...L,isLoading:!1,error:z})),j}},[]),p=n.useCallback(()=>{r(),s({user:null,token:null,permissions:{},isAuthenticated:!1,isLoading:!1,error:null})},[]),g=n.useCallback(async()=>{if(t.token)try{const _=gs(),j={Authorization:`Bearer ${t.token}`,"Content-Type":"application/json"};_&&(j["x-tenant-subdomain"]=_);const z=await fetch(`${fs}/api/auth/refresh`,{method:"POST",headers:j}),L=await z.json();z.ok?(localStorage.setItem(Xt,L.token),s(T=>({...T,token:L.token}))):p()}catch(_){console.error("Token refresh failed:",_)}},[t.token,p]),u=n.useCallback(_=>{s(j=>{if(!j.user)return j;const z={...j.user,..._};return localStorage.setItem(zt,JSON.stringify(z)),{...j,user:z}})},[]),f=n.useCallback((_,j)=>t.user?.role==="super_admin"||t.user?.role==="admin"&&_!=="tenants"?!0:t.permissions[_]?.includes(j)??!1,[t.user,t.permissions]),w=n.useCallback(_=>_.some(({resource:j,action:z})=>f(j,z)),[f]),v=n.useCallback(_=>_.every(({resource:j,action:z})=>f(j,z)),[f]),k=n.useCallback(_=>f(_,"read"),[f]),S=n.useCallback(_=>f(_,"write"),[f]),F=n.useCallback(_=>f(_,"edit"),[f]),G=n.useCallback(_=>f(_,"delete"),[f]),q=n.useCallback(()=>{s(_=>({..._,error:null}))},[]),$={...t,login:l,register:i,logout:p,refreshToken:g,updateUser:u,hasPermission:f,hasAnyPermission:w,hasAllPermissions:v,canRead:k,canWrite:S,canEdit:F,canDelete:G,clearError:q};return e.jsx(ja.Provider,{value:$,children:a})},Vn=()=>{const a=n.useContext(ja);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a},lr=n.createContext(null),ir="admin-dark-mode",Hn=()=>{if(typeof window>"u")return!1;try{const a=localStorage.getItem(ir);if(console.log("[DarkMode] Init - localStorage value:",a),a!==null){const s=a==="true";return console.log("[DarkMode] Using saved value:",s),s}const t=window.matchMedia("(prefers-color-scheme: dark)").matches;return console.log("[DarkMode] Using system preference:",t),t}catch(a){return console.log("[DarkMode] Error reading localStorage:",a),!1}},Ia=a=>{if(typeof document>"u")return;const t=document.documentElement;a?(t.classList.add("dark"),t.style.background="#111827",t.style.colorScheme="dark"):(t.classList.remove("dark"),t.style.background="#f9fafb",t.style.colorScheme="light")},$l=({children:a})=>{const t=n.useRef(!0),[s,r]=n.useState(()=>{const p=Hn();return typeof document<"u"&&Ia(p),p});n.useEffect(()=>{if(Ia(s),t.current)t.current=!1,console.log("[DarkMode] Initial mount - not saving to localStorage");else{console.log("[DarkMode] User changed - saving to localStorage:",s);try{localStorage.setItem(ir,String(s))}catch{}}},[s]);const l=n.useCallback(()=>{r(p=>!p)},[]),i=n.useCallback(p=>{r(p)},[]);return e.jsx(lr.Provider,{value:{isDarkMode:s,toggleDarkMode:l,setDarkMode:i},children:a})},qn=()=>{const a=n.useContext(lr);return a||{isDarkMode:!1,toggleDarkMode:()=>{},setDarkMode:()=>{}}},bs=720*60*60*1e3,Pt={MEMORY_MS:1440*60*1e3,STORAGE_MS:bs,API_DATA_MS:bs,USER_DATA_MS:bs,TENANT_DATA_MS:bs},ft=new Map,cs="redis_cache_",Kn=()=>{const a=Date.now();for(const[t,s]of ft.entries())s.expires<a&&ft.delete(t);for(let t=localStorage.length-1;t>=0;t--){const s=localStorage.key(t);if(s?.startsWith(cs))try{const r=JSON.parse(localStorage.getItem(s)||"{}");r.expires&&r.expires<a&&localStorage.removeItem(s)}catch{localStorage.removeItem(s)}}};setInterval(Kn,3600*1e3);async function Ma(a){const t=Date.now(),s=ft.get(a);if(s&&s.expires>t)return s.data;ft.delete(a);try{const r=cs+a,l=localStorage.getItem(r);if(l){const i=JSON.parse(l);if(i.expires>t)return ft.set(a,{data:i.data,expires:t+Pt.MEMORY_MS,created:t}),i.data;localStorage.removeItem(r)}}catch(r){console.warn("[Cache] Error reading from localStorage:",r)}return null}async function Gn(a,t,s=Pt.API_DATA_MS){const r=Date.now(),l=r+s,i={data:t,expires:l,created:r};ft.set(a,i);try{const p=cs+a;localStorage.setItem(p,JSON.stringify(i))}catch(p){console.warn("[Cache] Error writing to localStorage:",p)}}async function os(a){ft.delete(a);try{const t=cs+a;localStorage.removeItem(t)}catch(t){console.warn("[Cache] Error deleting from localStorage:",t)}}async function Yn(a){const t=`tenant:${a}`;for(const s of ft.keys())s.includes(t)&&ft.delete(s);for(let s=localStorage.length-1;s>=0;s--){const r=localStorage.key(s);r?.startsWith(cs)&&r.includes(t)&&localStorage.removeItem(r)}}const Dt={tenantBootstrap:a=>`tenant:${a}:bootstrap`,tenantProducts:a=>`tenant:${a}:products`,tenantOrders:a=>`tenant:${a}:orders`,tenantConfig:a=>`tenant:${a}:config`,tenantUsers:a=>`tenant:${a}:users`,userAuth:a=>`user:${a}:auth`,userPermissions:a=>`user:${a}:permissions`,apiResponse:(a,t)=>`api:${a}${t?":"+t:""}`,chatMessages:a=>`chat:${a}:messages`,analytics:(a,t)=>`analytics:${a}:${t}`,cart:a=>`cart:${a}`,session:a=>`session:${a}`};async function Ks(a,t,s="api"){const r={api:Pt.API_DATA_MS,user:Pt.USER_DATA_MS,tenant:Pt.TENANT_DATA_MS,chat:Pt.MEMORY_MS,session:Pt.STORAGE_MS};await Gn(a,t,r[s])}const cr=a=>{const t=new WeakSet;return JSON.stringify(a,(s,r)=>{if(!(s.startsWith("__reactFiber")||s.startsWith("__reactProps")||s==="stateNode")&&!(r instanceof HTMLElement||r instanceof Node)){if(typeof r=="object"&&r!==null){if(t.has(r))return"[Circular]";t.add(r)}return r}})},Jn=["www","admin","adminlogin","superadmin","login","app","api","dashboard","tenant","support","cdn","static"],ct="https://allinbangla.com",Zn=async(a,t)=>{if(t)switch(await os(Dt.tenantBootstrap(a)),t){case"products":await os(Dt.tenantProducts(a));break;case"orders":const s=Dt.tenantOrders(a);await os(s);break;case"chat_messages":await os(Dt.chatMessages(a));break}else await Yn(a)};let Se=null,$a=!1,Ts=null,Gs=null;const Qn=async()=>(Gs||(Gs=await rr(()=>import("./pkg-socket-D1bUdbwx.js"),__vite__mapDeps([0,1,2,3]))),Gs),Xn=async()=>{if(typeof window>"u")return null;if(Se?.connected)return Se;if(Se&&!Se.connected)return Se.connect(),Se;if($a)return Se;$a=!0;const a=ct;console.log("[Socket.IO] Initializing connection to:",a);try{const{io:t}=await Qn();Se=t(a,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,timeout:1e4,autoConnect:!0,withCredentials:!0}),Se.on("connect",()=>{console.log("[Socket.IO] Connected:",Se?.id),Ts&&Se?.connected&&(Se.emit("join-tenant",Ts),console.log("[Socket.IO] Joined pending tenant room:",Ts))}),Se.on("disconnect",s=>{console.log("[Socket.IO] Disconnected:",s)}),Se.on("connect_error",s=>{Se?.connected||console.debug("[Socket.IO] Connection error:",s.message)}),Se.on("data-update",s=>{console.log("[Socket.IO] Data update received:",s.tenantId,s.key);const l={theme_config:"theme",website_config:"website",delivery_config:"delivery",payment_methods:"payment_methods",landing_pages:"landing_pages",chat_messages:"chat_messages",store_studio_config:"store_studio_config",store_layout:"store_layout"}[s.key]||s.key;ys(s.key,s.tenantId),Zn(s.tenantId,s.key).catch(i=>console.warn("[Cache] Redis invalidation failed:",i)),_t(l,s.tenantId,!0)}),Se.on("chat-update",s=>{console.log("[Socket.IO] Chat update received:",s.tenantId),ys("chat_messages",s.tenantId),_t("chat_messages",s.tenantId,!0)}),Se.on("new-order",s=>{console.log("[Socket.IO] New order received:",s.tenantId),ys("orders",s.tenantId),_t("orders",s.tenantId,!0)}),Se.on("order-updated",s=>{console.log("[Socket.IO] Order updated:",s.tenantId),ys("orders",s.tenantId),_t("orders",s.tenantId,!0)})}catch(t){return console.error("[Socket.IO] Initialization failed:",t),null}return Se},zl=async a=>{Ts=a;const t=await Xn();t?.connected?(t.emit("join-tenant",a),console.log("[Socket.IO] Joined tenant room:",a)):console.log("[Socket.IO] Socket not connected, will join room on connect")},Ol=async a=>{Se?.connected&&Se.emit("leave-tenant",a)},za=a=>{const t=a.startsWith("/")?a:`/${a}`;return`${ct.replace(/\/$/,"")}${t}`},ya=new Set,Is=new Set,Fl=(a,t)=>{const s=`${t||"public"}::${a}`;return Is.has(s)},Rl=(a,t)=>{const s=`${t||"public"}::${a}`;Is.delete(s)},Bl=a=>(ya.add(a),()=>ya.delete(a)),_t=(a,t,s=!1)=>{if(s){const r=`${t||"public"}::${a}`;Is.add(r),setTimeout(()=>Is.delete(r),2e3)}ya.forEach(r=>{try{r(a,t,s)}catch(l){console.error("Data refresh listener error:",l)}})},Ys=Math.max(0,1200),Oa="false".toLowerCase()==="true",eo=!1,ls=new Map,to=600*1e3,Gt=(a,t)=>`${t||"public"}::${a}`,wa="ds_cache_",so=1440*60*1e3,ao=(a,t)=>{if(typeof window>"u")return null;try{const s=wa+Gt(a,t),r=localStorage.getItem(s);if(!r)return null;const{data:l,timestamp:i}=JSON.parse(r);return Date.now()-i>so?(localStorage.removeItem(s),null):l}catch{return null}},ro=(a,t,s)=>{if(!(typeof window>"u"))try{const r=wa+Gt(a,s);localStorage.setItem(r,cr({data:t,timestamp:Date.now()}))}catch{}},Ce=(a,t)=>{const s=Gt(a,t),r=ls.get(s);if(r&&Date.now()-r.timestamp<=to)return r.data;r&&ls.delete(s);const l=ao(a,t);return l!==null?(ls.set(s,{data:l,timestamp:Date.now(),tenantId:t}),l):null},De=(a,t,s)=>{const r=Gt(a,s);ls.set(r,{data:t,timestamp:Date.now(),tenantId:s}),ro(a,t,s)},ys=(a,t)=>{const s=Gt(a,t);if(ls.delete(s),typeof window<"u")try{localStorage.removeItem(wa+s)}catch{}},Js=new Map,Fa=async(a,t,s)=>{const r=Gt(a,t),l=Js.get(r);if(l)return l;const i=s().finally(()=>{Js.delete(r)});return Js.set(r,i),i};class no{constructor(){this.saveQueue=new Map,this.hasLoggedSaveBlock=!1}setupCustomDomain(t,s){throw new Error("Method not implemented.")}verifyDomainDNS(t,s){throw new Error("Method not implemented.")}sanitizeTenantSlug(t){return t?t.toLowerCase().trim().replace(/[^a-z0-9-]/g,"").replace(/^-+|-+$/g,"").slice(0,63):""}omitUndefined(t){const s={};return Object.entries(t).forEach(([r,l])=>{l!==void 0&&(s[r]=l)}),s}filterByTenant(t,s){return s?t.filter(r=>!r.tenantId||r.tenantId===s):t}resolveTenantScope(t){return t?.trim()?t.trim():"public"}getSaveQueueKey(t,s){return`${this.resolveTenantScope(s)}::${t}`}enqueueSave(t,s,r,l){const i=this.getSaveQueueKey(t,r);return new Promise((p,g)=>{const u=this.saveQueue.get(i);if(u){clearTimeout(u.timer),u.payload={key:t,data:s,tenantId:r,options:l},u.resolvers.push({resolve:p,reject:g}),u.timer=setTimeout(()=>this.flushQueuedSave(i),Ys);return}const f=setTimeout(()=>this.flushQueuedSave(i),Ys);this.saveQueue.set(i,{timer:f,payload:{key:t,data:s,tenantId:r,options:l},resolvers:[{resolve:p,reject:g}]})})}async flushQueuedSave(t){const s=this.saveQueue.get(t);if(s){clearTimeout(s.timer),this.saveQueue.delete(t);try{await this.commitSave(s.payload.key,s.payload.data,s.payload.tenantId,s.payload.options),s.resolvers.forEach(({resolve:r})=>r())}catch(r){s.resolvers.forEach(({reject:l})=>l(r))}}}normalizeHeaders(t){return t?t instanceof Headers?Object.fromEntries(t.entries()):Array.isArray(t)?t.reduce((s,[r,l])=>(s[r]=l,s),{}):{...t}:{}}async requestTenantApi(t,s){if(typeof fetch>"u")throw new Error("Fetch API is not available in this environment");const{headers:r,body:l,...i}=s||{},p=this.normalizeHeaders(r),g=this.normalizeHeaders(At()),u=await fetch(za(t),{credentials:"include",...i,headers:{...g,...p},body:l}),f=await u.text(),w=f?JSON.parse(f):null;if(!u.ok){const v=w?.error||`Request failed (${u.status})`;throw new Error(v)}return w}async fetchTenantDocument(t,s){const r=this.resolveTenantScope(s);try{const l=await this.requestTenantApi(`/api/tenant-data/${r}/${t}`);return l&&"data"in l?l.data??null:null}catch(l){return console.warn(`Unable to load ${t} for tenant ${r}`,l),null}}async persistTenantDocument(t,s,r){const l=this.resolveTenantScope(r);await this.requestTenantApi(`/api/tenant-data/${l}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:cr({data:s})})}normalizeTenantDocument(t){const s=t.id||t._id||t.subdomain||`tenant-${Date.now()}`;return{...t,id:String(s)}}async fetchMockTenants(){if(typeof fetch>"u")return[];try{const t=await fetch(za("/api/tenants"));if(!t.ok)throw new Error(`Unable to load tenants (${t.status})`);const s=await t.json();return Array.isArray(s?.data)?s.data:[]}catch(t){return console.warn("Failed to load tenants",t),[]}}async bootstrap(t){const s=this.resolveTenantScope(t),r=this.getDefaultWebsiteConfig(),l=Dt.tenantBootstrap(s),i=await Ma(l);if(i&&i.products.length>0)return console.log(`[Redis] Bootstrap cache hit for tenant: ${s}`,{socialLinksCount:i.websiteConfig?.socialLinks?.length||0,addressesCount:i.websiteConfig?.addresses?.length||0}),this.revalidateBootstrap(s,t,r,i.products).catch(k=>console.warn("[DataService] Bootstrap revalidation failed",k)),i;const p=Ce("products",t),g=Ce("theme_config",t),u=Ce("website_config",t),f=p&&p.length>0,w=!!(g||u);if(f)return console.log("[DataService] Using localStorage cache for bootstrap",{cachedSocialLinks:u?.socialLinks?.length||0,cachedAddresses:u?.addresses?.length||0}),this.revalidateBootstrap(s,t,r,p).catch(k=>{console.warn("[DataService] Bootstrap revalidation failed",k)}),{products:p.map((k,S)=>({...k,id:k.id??S+1})),themeConfig:g??null,websiteConfig:u?{...r,...u}:r};if(w){const k=await this.fetchFreshBootstrap(s,t,r);return await Ks(l,{products:k.products,themeConfig:k.themeConfig,websiteConfig:k.websiteConfig},"tenant"),{products:k.products,themeConfig:k.themeConfig??g??null,websiteConfig:k.websiteConfig??(u?{...r,...u}:r)}}const v=await this.fetchFreshBootstrap(s,t,r);return await Ks(l,{products:v.products,themeConfig:v.themeConfig,websiteConfig:v.websiteConfig},"tenant"),v}async revalidateBootstrap(t,s,r,l){const i=Ce("website_config",s),p=Ce("theme_config",s),g=await this.fetchFreshBootstrap(t,s,r,!0);(g.products.length!==(l?.length||0)||JSON.stringify(g.products.map(u=>u.id).sort())!==JSON.stringify((l||[]).map(u=>u.id).sort()))&&(console.log("[DataService] Background revalidation found new products, notifying UI"),_t("products",s,!1));try{const u=i?.carouselItems?.length??0,f=g.websiteConfig?.carouselItems?.length??0;(u!==f||JSON.stringify(i?.carouselItems??[])!==JSON.stringify(g.websiteConfig?.carouselItems??[])||JSON.stringify(i?.campaigns??[])!==JSON.stringify(g.websiteConfig?.campaigns??[])||(i?.websiteName??"")!==(g.websiteConfig?.websiteName??""))&&(console.log("[DataService] Background revalidation found updated website config, notifying UI"),_t("website",s,!1))}catch{}try{JSON.stringify(p??null)!==JSON.stringify(g.themeConfig??null)&&(console.log("[DataService] Background revalidation found updated theme config, notifying UI"),_t("theme",s,!1))}catch{}}async fetchFreshBootstrap(t,s,r,l=!1){console.log(`[DataService] Bootstrap loading for tenant: ${t}${l?" (background)":""}`);try{let i=null;if(!l&&typeof window<"u"){if(window.__BOOTSTRAP_DATA__?.data)console.log("[DataService] Using XHR prefetched bootstrap data (instant)"),i=window.__BOOTSTRAP_DATA__,delete window.__BOOTSTRAP_DATA__;else if(window.__PREFETCHED_BOOTSTRAP__)try{const w=await window.__PREFETCHED_BOOTSTRAP__;w?.data&&(console.log("[DataService] Using prefetched bootstrap data"),i=w,delete window.__PREFETCHED_BOOTSTRAP__)}catch{console.warn("[DataService] Prefetch failed, fetching fresh")}}i||(i=await this.requestTenantApi(`/api/tenant-data/${t}/bootstrap`));const{products:p,theme_config:g,website_config:u}=i.data;return p!=null&&De("products",p,s),g&&De("theme_config",g,s),u&&De("website_config",u,s),{products:(p||[]).map((w,v)=>({...w,id:w.id??v+1})),themeConfig:g||null,websiteConfig:u?{...r,...u}:r}}catch(i){if(!l){console.warn("Bootstrap failed, falling back to individual requests",i);const[p,g,u]=await Promise.all([this.getProducts(s),this.getThemeConfig(s),this.getWebsiteConfig(s)]);return{products:p,themeConfig:g,websiteConfig:u}}throw i}}getDefaultWebsiteConfig(){return{websiteName:"",shortDescription:"",whatsappNumber:"",favicon:"",headerLogo:"",footerLogo:"",addresses:[],emails:[],phones:[],socialLinks:[],footerQuickLinks:[],footerUsefulLinks:[],showMobileHeaderCategory:!0,showNewsSlider:!1,headerSliderText:"",hideCopyright:!1,hideCopyrightText:!1,showPoweredBy:!1,brandingText:"",carouselItems:[],searchHints:"",orderLanguage:"English",productCardStyle:"style2",categorySectionStyle:"style5",productSectionStyle:"style2",footerStyle:"style2",chatEnabled:!0,chatGreeting:"",chatOfflineMessage:"",chatSupportHours:{from:"09:00",to:"18:00"},chatWhatsAppFallback:!1,popups:[]}}async getSecondaryData(t){const s=this.resolveTenantScope(t);console.log(`[DataService] Loading secondary data for tenant: ${s}`);const r=Ce("orders",t),l=Ce("logo",t),i=Ce("delivery_config",t),p=Ce("payment_methods",t),g=Ce("chat_messages",t),u=Ce("landing_pages",t),f=Ce("categories",t),w=Ce("subcategories",t),v=Ce("childcategories",t),k=Ce("brands",t),S=Ce("tags",t);return r&&r.length||l||i&&i.length||p&&p.length||g&&g.length||u&&u.length||f&&f.length||w&&w.length||v&&v.length||k&&k.length||S&&S.length?(this.revalidateSecondary(s,t).catch(G=>console.warn("[DataService] Secondary revalidation failed",G)),{orders:r||[],logo:l||null,deliveryConfig:i||[],paymentMethods:p||[],chatMessages:g||[],landingPages:u||[],categories:f||[],subcategories:w||[],childcategories:v||[],brands:k||[],tags:S||[]}):this.fetchFreshSecondary(s,t)}async revalidateSecondary(t,s){await this.fetchFreshSecondary(t,s,!0)}async fetchFreshSecondary(t,s,r=!1){try{let l=null;if(!r&&typeof window<"u"){if(window.__SECONDARY_DATA__?.data)console.log("[DataService] Using XHR prefetched secondary data (instant)"),l=window.__SECONDARY_DATA__,delete window.__SECONDARY_DATA__;else if(window.__PREFETCHED_SECONDARY__)try{const p=await window.__PREFETCHED_SECONDARY__;p?.data&&(console.log("[DataService] Using prefetched secondary data"),l=p,delete window.__PREFETCHED_SECONDARY__)}catch{console.warn("[DataService] Secondary prefetch failed, fetching fresh")}}if(l||(l=await Fa("tenant_secondary_bundle",t==="public"?void 0:t,()=>this.requestTenantApi(`/api/tenant-data/${t}/secondary`))),!l)throw new Error("Failed to fetch secondary data");const i=l.data;return De("orders",i.orders||[],s),De("logo",i.logo||null,s),De("delivery_config",i.delivery_config||[],s),De("payment_methods",i.payment_methods||[],s),De("chat_messages",i.chat_messages||[],s),De("landing_pages",i.landing_pages||[],s),De("categories",i.categories||[],s),De("subcategories",i.subcategories||[],s),De("childcategories",i.childcategories||[],s),De("brands",i.brands||[],s),De("tags",i.tags||[],s),{orders:i.orders||[],logo:i.logo||null,deliveryConfig:i.delivery_config||[],paymentMethods:i.payment_methods||[],chatMessages:i.chat_messages||[],landingPages:i.landing_pages||[],categories:i.categories||[],subcategories:i.subcategories||[],childcategories:i.childcategories||[],brands:i.brands||[],tags:i.tags||[]}}catch(l){if(r)throw l;return console.warn("[DataService] Secondary data fetch failed",l),{orders:[],logo:null,deliveryConfig:[],paymentMethods:[],chatMessages:[],landingPages:[],categories:[],subcategories:[],childcategories:[],brands:[],tags:[]}}}async getCollection(t,s,r){const l=Ce(t,r);if(l&&l.length>0)return this.filterByTenant(l,r);const i=await this.fetchTenantDocument(t,r);return Array.isArray(i)&&i.length>0?(De(t,i,r),this.filterByTenant(i,r)):l&&l.length>0?this.filterByTenant(l,r):s}async getProducts(t){return(await this.getCollection("products",[],t)).map((l,i)=>({...l,id:l.id??i+1}))}async getOrders(t){const s=Dt.tenantOrders(t||"default"),r=await Ma(s);if(r)return console.log(`[Redis] Orders cache hit for tenant: ${t}`),r;const l=await this.getCollection("orders",[],t);return await Ks(s,l,"api"),l}async getLandingPages(t){return this.getCollection("landing_pages",[],t)}async getUsers(t){return this.getCollection("users",[],t)}async getRoles(t){const s=[{id:"manager",name:"Store Manager",description:"Can manage products and orders",permissions:[{resource:"dashboard",actions:["read"]},{resource:"orders",actions:["read","write","edit"]},{resource:"products",actions:["read","write","edit"]}]},{id:"support",name:"Support Agent",description:"Can view orders and dashboard",permissions:[{resource:"dashboard",actions:["read"]},{resource:"orders",actions:["read"]}]}],r=await this.getCollection("roles",[],t);return r.length?r:s}async get(t,s,r,l=!1){if(!l){const i=Ce(t,r);if(i!==null)return i}return Fa(t,r,async()=>{const i=await this.fetchTenantDocument(t,r);return i==null?s:Array.isArray(s)&&Array.isArray(i)?(l||De(t,i,r),this.filterByTenant(i,r)):(l||De(t,i,r),i)})}async getChatMessages(t){return this.get("chat_messages",[],t,!0)}async getThemeConfig(t){return await this.get("theme_config",null,t)}async getWebsiteConfig(t){const s=this.getDefaultWebsiteConfig();return this.get("website_config",s,t)}async getPaymentMethods(t){const s=[{id:"cod-default",provider:"cod",name:"Cash On Delivery",isEnabled:!0}],r=await this.get("payment_methods",s,t);return r.length?r:s}async getDeliveryConfig(t){const s=[{type:"Regular",isEnabled:!0,division:"Dhaka",insideCharge:60,outsideCharge:120,freeThreshold:0,note:"Standard delivery time 2-3 days"},{type:"Express",isEnabled:!0,division:"Dhaka",insideCharge:100,outsideCharge:200,freeThreshold:5e3,note:"Next day delivery available"},{type:"Free",isEnabled:!1,division:"Dhaka",insideCharge:0,outsideCharge:0,freeThreshold:0,note:"Promotional free shipping"}],r=await this.get("delivery_config",s,t);return r.length?r:s}async getCatalog(t,s,r){const l=Ce(t,r);if(l&&l.length>0)return l;const i=await this.get(t,[],r);return i&&i.length>0?i:l&&l.length>0?l:s}async getCourierConfig(t){const s={apiKey:"",secretKey:"",instruction:""};if(!t)return s;try{const r=await fetch(`${ct}/api/courier/config`,{headers:{"X-Tenant-Id":t,...At()}});if(r.ok){const l=await r.json();return{apiKey:l.apiKey||"",secretKey:l.secretKey||"",instruction:l.instruction||""}}return s}catch(r){return console.warn("[DataService] Failed to load courier config:",r),s}}async saveCourierConfig(t,s){if(t)try{if(!(await fetch(`${ct}/api/courier/config`,{method:"POST",headers:{"Content-Type":"application/json","X-Tenant-Id":t,...At()},body:JSON.stringify({apiKey:s.apiKey?.trim()||"",secretKey:s.secretKey?.trim()||"",instruction:s.instruction?.trim()||""})})).ok)throw new Error("Failed to save courier config");console.log("[DataService] Courier config saved to database")}catch(r){throw console.error("[DataService] Failed to save courier config:",r),r}}async save(t,s,r,l){if(Oa){!this.hasLoggedSaveBlock&&eo&&(console.info("[DataService] Remote saves are disabled via VITE_DISABLE_REMOTE_SAVE flag."),this.hasLoggedSaveBlock=!0);return}if(Ys<=0){await this.commitSave(t,s,r,l);return}await this.enqueueSave(t,s,r,l)}async saveImmediate(t,s,r,l){if(Oa)return;const i=this.getSaveQueueKey(t,r),p=this.saveQueue.get(i);p&&(clearTimeout(p.timer),this.saveQueue.delete(i),p.resolvers.forEach(({resolve:g})=>g())),await this.commitSave(t,s,r,l)}async commitSave(t,s,r,l){const i=this.resolveTenantScope(r);if(t==="website_config"&&typeof s=="object"&&s!==null){const p=s,g=Ce("website_config",r);(!p.carouselItems||p.carouselItems.length===0)&&g?.carouselItems&&g.carouselItems.length>0&&(console.warn(`[DataService] Preserving ${g.carouselItems.length} cached carousels`),s.carouselItems=g.carouselItems),(!p.socialLinks||p.socialLinks.length===0)&&g?.socialLinks&&g.socialLinks.length>0&&(console.warn(`[DataService] Preserving ${g.socialLinks.length} cached social links`),s.socialLinks=g.socialLinks),(!p.addresses||p.addresses.length===0)&&g?.addresses&&g.addresses.length>0&&(console.warn(`[DataService] Preserving ${g.addresses.length} cached addresses`),s.addresses=g.addresses),(!p.emails||p.emails.length===0)&&g?.emails&&g.emails.length>0&&(console.warn(`[DataService] Preserving ${g.emails.length} cached emails`),s.emails=g.emails),(!p.phones||p.phones.length===0)&&g?.phones&&g.phones.length>0&&(console.warn(`[DataService] Preserving ${g.phones.length} cached phones`),s.phones=g.phones)}console.log(`[DataService] Saving ${t} for tenant ${i}`,Array.isArray(s)?`(${s.length} items)`:"(object)");try{await this.persistTenantDocument(t,s,r),De(t,s,r),["website_config","theme_config","products"].includes(t)&&(await os(Dt.tenantBootstrap(i)),console.log(`[DataService] Invalidated bootstrap cache for ${i} after ${t} save`)),console.log(`[DataService] Saved ${t}`)}catch(p){console.error(`Failed to persist ${t}`,p)}}async listTenants(t=!1){if(!t){const s=Ce("tenants","global");if(s&&s.length)return console.log("[DataService] Using cached tenant list"),s}try{const s=await this.requestTenantApi("/api/tenants"),l=(Array.isArray(s?.data)?s.data.map(i=>this.normalizeTenantDocument(i)):[]).sort((i,p)=>(p.createdAt||"").localeCompare(i.createdAt||""));return De("tenants",l,"global"),l}catch(s){console.warn("Unable to load tenants from backend API",s)}return this.fetchMockTenants()}async resolveTenantBySubdomain(t){if(!t)return null;const s=Ce(`tenant_resolve_${t}`,"global");if(s)return console.log("[DataService] Using cached tenant resolution for:",t),s;try{const l=(await this.requestTenantApi(`/api/tenants/resolve/${encodeURIComponent(t)}`))?.data,i=l?.id??l?._id,p=i!=null?String(i):"";if(p){const g={id:p,name:String(l?.name??""),subdomain:String(l?.subdomain??t)};return De(`tenant_resolve_${t}`,g,"global"),g}}catch(r){console.warn("[DataService] Failed to resolve tenant by subdomain:",t,r)}return null}async seedTenant(t){if(!t?.name||!t?.subdomain||!t?.contactEmail)throw new Error("name, subdomain and contactEmail are required");if(!t?.adminEmail||!t?.adminPassword)throw new Error("adminEmail and adminPassword are required");const s=this.sanitizeTenantSlug(t.subdomain);if(!s)throw new Error("Subdomain must contain letters, numbers, or dashes.");if(Jn.includes(s))throw new Error("This subdomain is reserved. Choose another.");if((await this.listTenants()).some(v=>this.sanitizeTenantSlug(v.subdomain)===s))throw new Error("Subdomain already in use. Pick a different slug.");const i=t.adminEmail.trim().toLowerCase(),p=t.adminPassword.trim();if(!/\S+@\S+\.\S+/.test(i))throw new Error("Provide a valid admin email");if(p.length<6)throw new Error("Admin password must be at least 6 characters");const g=new Date().toISOString(),u=this.omitUndefined({name:t.name.trim(),subdomain:s,customDomain:void 0,contactEmail:t.contactEmail.trim(),contactName:t.contactName?.trim()||void 0,adminEmail:i,adminPassword:p,plan:t.plan||"starter",status:"trialing",createdAt:g,updatedAt:g,onboardingCompleted:!1,locale:"en-US",currency:"USD",branding:{},settings:{}}),f={name:u.name,subdomain:s,contactEmail:u.contactEmail,contactName:u.contactName,adminEmail:i,adminPassword:p,plan:u.plan},w=await this.requestTenantApi("/api/tenants",{method:"POST",body:JSON.stringify(f)});if(w?.data)return this.normalizeTenantDocument(w.data);throw new Error("Unable to create tenant. Backend API is unavailable.")}async deleteTenant(t){if(!t)throw new Error("tenantId is required");await this.requestTenantApi(`/api/tenants/${t}`,{method:"DELETE"})}async getProductReviews(t,s){return(await this.requestTenantApi(`/api/reviews/product/${t}`,{headers:{"x-tenant-id":s}})).reviews||[]}async submitReview(t,s){const r=this.getToken();if(!r)throw new Error("Authentication required. Please login to submit a review.");return(await this.requestTenantApi("/api/reviews",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`,"x-tenant-id":s},body:JSON.stringify({...t,tenantId:s})})).review}getToken(){if(typeof window>"u")return null;try{return localStorage.getItem("admin_auth_token")||sessionStorage.getItem("admin_auth_token")||localStorage.getItem("customer_auth_token")||sessionStorage.getItem("customer_auth_token")||localStorage.getItem("store_auth_token")||sessionStorage.getItem("store_auth_token")||localStorage.getItem("user_auth_token")||sessionStorage.getItem("user_auth_token")||null}catch{return null}}async getMyReviews(t){const s=this.getToken();if(!s)throw new Error("Authentication required");const r=t?`/api/reviews/user/my-reviews?tenantId=${t}`:"/api/reviews/user/my-reviews";return(await this.requestTenantApi(r,{headers:{Authorization:`Bearer ${s}`}})).reviews||[]}async updateReview(t,s){const r=this.getToken();if(!r)throw new Error("Authentication required");return(await this.requestTenantApi(`/api/reviews/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(s)})).review}async deleteReview(t){const s=this.getToken();if(!s)throw new Error("Authentication required");await this.requestTenantApi(`/api/reviews/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}})}async markReviewHelpful(t){await this.requestTenantApi(`/api/reviews/${t}/helpful`,{method:"PATCH"})}async getAllReviewsForTenant(t,s){const r=this.getToken();if(!r)throw new Error("Authentication required");const l=new URLSearchParams;s?.status&&l.append("status",s.status),s?.page&&l.append("page",s.page.toString()),s?.limit&&l.append("limit",s.limit.toString());const i=`/api/reviews/${t}/all${l.toString()?"?"+l.toString():""}`,p=await this.requestTenantApi(i,{headers:{Authorization:`Bearer ${r}`}});return{reviews:p.reviews||[],pagination:p.pagination}}async updateReviewStatus(t,s,r){const l=this.getToken();if(!l)throw new Error("Authentication required");return(await this.requestTenantApi(`/api/reviews/${t}/${s}/status`,{method:"PATCH",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({status:r})})).review}async replyToReview(t,s,r){const l=this.getToken();if(!l)throw new Error("Authentication required");return(await this.requestTenantApi(`/api/reviews/${t}/${s}/reply`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({reply:r})})).review}}const Es=new no,Wl=async(a,t,s=1,r=20)=>{const l=new URLSearchParams;l.append("page",s.toString()),l.append("limit",r.toString());const i=await fetch(`${ct}/api/landing-page?${l}`,{headers:{...At(),"Content-Type":"application/json","x-tenant-id":a}});if(!i.ok)throw new Error(`Failed to fetch offer pages: ${i.statusText}`);return i.json()},Ul=async(a,t,s=!0)=>{const r=new URLSearchParams;r.append("tenantId",t),s&&r.append("incrementViews","true");const l=await fetch(`${ct}/api/landing-page/slug/${a}?${r}`,{headers:{"Content-Type":"application/json"}});if(!l.ok)throw new Error(`Failed to fetch offer page: ${l.statusText}`);return l.json()},Vl=async(a,t)=>{const s=await fetch(`${ct}/api/landing-page`,{method:"POST",headers:{...At(),"Content-Type":"application/json","x-tenant-id":a},body:JSON.stringify(t)});if(!s.ok){const r=await s.json().catch(()=>({}));throw console.error("[createOfferPage] Validation error details:",r),new Error(r.error||`Failed to create offer page: ${s.statusText}`)}return s.json()},Hl=async(a,t,s)=>{const r=await fetch(`${ct}/api/landing-page/${t}`,{method:"PUT",headers:{...At(),"Content-Type":"application/json","x-tenant-id":a},body:JSON.stringify(s)});if(!r.ok){const l=await r.json().catch(()=>({}));throw new Error(l.error||`Failed to update offer page: ${r.statusText}`)}return r.json()},ql=async(a,t)=>{const s=await fetch(`${ct}/api/landing-page/${t}`,{method:"DELETE",headers:{...At(),"Content-Type":"application/json","x-tenant-id":a}});if(!s.ok)throw new Error(`Failed to delete offer page: ${s.statusText}`)},Kl=async a=>{await fetch(`${ct}/api/landing-page/${a}/increment-orders`,{method:"POST",headers:{"Content-Type":"application/json"}})},Ra="opbd";let js=null;const Ba=async()=>js||(js=await rr(()=>import("./pkg-toast-Dpd4iwUK.js"),__vite__mapDeps([4,5,6,7])),js),yt={success:a=>Ba().then(t=>t.toast.success(a)),error:a=>Ba().then(t=>t.toast.error(a))};function oo(){const[a,t]=n.useState([]),[s,r]=n.useState(!1),[l,i]=n.useState(!1),[p,g]=n.useState(null),u=n.useMemo(()=>tn(),[]),[f]=n.useState(u),[w,v]=n.useState(null),[k,S]=n.useState(()=>{if(u&&u!==Sa){const C=sn(u);return C||""}if(typeof window<"u")try{const C=window.localStorage.getItem(an);if(C){const d=JSON.parse(C),Z=d?.tenantId||d?.tenant?.id||d?.tenant?._id;if(Z)return Z}const A=window.localStorage.getItem(Vs);if(A)return A}catch{}return Ra}),F=n.useRef(null),G=n.useRef([]),q=n.useRef(f),$=n.useRef(!1),_=n.useRef(k);n.useEffect(()=>{G.current=a},[a]),n.useEffect(()=>{_.current=k},[k]),n.useEffect(()=>{q.current=f},[f]),n.useEffect(()=>{if(!(typeof window>"u")&&!(f&&f!==Sa))try{k?window.localStorage.setItem(Vs,k):window.localStorage.removeItem(Vs)}catch{}},[k,f]);const j=n.useCallback(C=>{t(C);const A=q.current?us(q.current):"",d=A?C.find(ne=>us(ne.subdomain||"")===A):void 0;v(d?d.id:null),A&&!d&&!$.current&&(yt.error(`No storefront configured for ${A}.`),$.current=!0);const Z=_.current,D=C.some(ne=>ne.id===Z);if(d){d.id!==Z&&S(d.id);return}!D&&C.length&&S(C[0].id)},[]),z=n.useCallback(async()=>{const C=await Es.listTenants(!0);return j(C),C},[j]);n.useEffect(()=>{if(!f||w)return;const C=us(f);if(!C)return;const A=a.find(d=>us(d.subdomain||"")===C);A&&(v(A.id),A.id!==_.current&&S(A.id))},[f,w,a]);const L=n.useCallback((C,A={})=>{if(!(!C||C===k)){if(w&&C!==w){yt.error("This subdomain is locked to its storefront. Use the primary admin domain to switch tenants.");return}F.current=C,r(!0),A.onResetChat?.(),S(C),A.setAdminSection?.("dashboard"),A.setSelectedProduct?.(null),A.setSelectedLandingPage?.(null),A.setUser&&A.setUser(d=>d?{...d,tenantId:C}:null)}},[k,w]),T=n.useCallback(async(C,A={activate:!0},d)=>{i(!0);try{const Z=await Es.seedTenant(C);let D=Z;try{const de=(await z())?.find(pe=>pe.id===Z.id||pe.subdomain===Z.subdomain);de&&(D=de)}catch(ne){console.warn("Unable to refresh tenants after creation",ne),t(de=>{const pe=de.filter(K=>K.id!==Z.id);return[Z,...pe]})}return A.activate&&D?.id&&d&&d(D.id),yt.success(`${D.name} is ready`),D}catch(Z){console.error("Failed to create tenant",Z);const D=Z instanceof Error?Z.message:"Unable to create tenant";throw yt.error(D),Z}finally{i(!1)}},[z]),I=n.useCallback(async(C,A)=>{if(C){g(C);try{await Es.deleteTenant(C);let d=null;try{d=(await z())?.[0]?.id||null}catch(Z){console.warn("Unable to refresh tenants after deletion",Z);let D=null;t(ne=>{const de=ne.filter(pe=>pe.id!==C);return D=de[0]?.id||null,de}),d=D}C===k&&(d&&A?A(d):S(Ra)),yt.success("Tenant removed")}catch(d){const Z=d instanceof Error?d.message:"Unable to delete tenant";throw yt.error(Z),d}finally{g(null)}}},[k,z]),E=n.useCallback(C=>{if(F.current&&F.current===k){if(r(!1),C)yt.error("Unable to switch tenants. Please try again.");else{const A=G.current.find(d=>d.id===k);yt.success(`Now viewing ${A?.name||"selected tenant"}`)}F.current=null}},[k]),W=n.useMemo(()=>a.find(A=>A.id===k||A._id===k)?.subdomain||"",[a,k]);return{tenants:a,setTenants:t,activeTenantId:k,activeTenantSubdomain:W,setActiveTenantId:S,hostTenantId:w,setHostTenantId:v,hostTenantSlug:f,isTenantSwitching:s,setIsTenantSwitching:r,isTenantSeeding:l,deletingTenantId:p,applyTenantList:j,refreshTenants:z,handleTenantChange:L,handleCreateTenant:T,handleDeleteTenant:I,completeTenantSwitch:E,tenantsRef:G,activeTenantIdRef:_}}const lo=n.createContext(void 0),Gl=({children:a,tenantId:t})=>{const[s,r]=n.useState("en");n.useEffect(()=>{const p=localStorage.getItem(`language_${t||"default"}`);(p==="en"||p==="bn")&&r(p)},[t]);const l=p=>{r(p),localStorage.setItem(`language_${t||"default"}`,p),document.documentElement.lang=p==="bn"?"bn":"en"},i=p=>(s==="bn"?co:io)[p]||p;return e.jsx(lo.Provider,{value:{language:s,setLanguage:l,t:i},children:a})},io={dashboard:"Dashboard",welcome:"Welcome back",overview:"Business Overview",total_orders:"Total Orders",products_on_hand:"Products on Hand",pending_orders:"Pending Orders",confirmed_orders:"Confirmed Orders",low_stock:"Low Stock",visits:"Visits",revenue:"Revenue",language:"Language",reserved_price:"Reserved Price",to_be_reviewed:"To be Reviewed",pending:"Pending",confirmed:"Confirmed",processing:"Processing",shipped:"Shipped",delivered:"Delivered",cancelled:"Cancelled",returned:"Returned",on_hold:"On Hold",sent_to_courier:"Sent to Courier",products:"Products",add_product:"Add Product",product_name:"Product Name",price:"Price",stock:"Stock",category:"Category",in_stock:"In Stock",out_of_stock:"Out of Stock",orders:"Orders",order_id:"Order ID",customer:"Customer",date:"Date",status:"Status",total:"Total",actions:"Actions",view_details:"View Details",search:"Search",filter:"Filter",export:"Export",print:"Print",edit:"Edit",delete:"Delete",save:"Save",cancel:"Cancel",submit:"Submit",close:"Close",loading:"Loading...",no_data:"No data available",business_report:"Business Report",expenses:"Expenses",income:"Income",profit_loss:"Profit / Loss",total_expense:"Total Expense",total_income:"Total Income",home:"Home",shop:"Shop",cart:"Cart",checkout:"Checkout",my_account:"My Account",contact:"Contact",about_us:"About Us",today:"Today",yesterday:"Yesterday",this_week:"This Week",this_month:"This Month",this_year:"This Year",success:"Success",error:"Error",warning:"Warning",info:"Info"},co={dashboard:"ড্যাশবোর্ড",welcome:"স্বাগতম",overview:"ব্যবসায়িক সংক্ষিপ্ত বিবরণ",total_orders:"মোট অর্ডার",products_on_hand:"মজুদ পণ্য",pending_orders:"অপেক্ষমাণ অর্ডার",confirmed_orders:"নিশ্চিত অর্ডার",low_stock:"কম স্টক",visits:"ভিজিট",revenue:"আয়",language:"ভাষা",reserved_price:"সংরক্ষিত মূল্য",to_be_reviewed:"পর্যালোচনা করতে হবে",pending:"অপেক্ষমাণ",confirmed:"নিশ্চিত",processing:"প্রক্রিয়াধীন",shipped:"পাঠানো হয়েছে",delivered:"ডেলিভারি সম্পন্ন",cancelled:"বাতিল",returned:"ফেরত",on_hold:"আটকে আছে",sent_to_courier:"কুরিয়ারে পাঠানো",products:"পণ্য",add_product:"পণ্য যোগ করুন",product_name:"পণ্যের নাম",price:"মূল্য",stock:"স্টক",category:"ক্যাটাগরি",in_stock:"স্টকে আছে",out_of_stock:"স্টক নেই",orders:"অর্ডার",order_id:"অর্ডার আইডি",customer:"ক্রেতা",date:"তারিখ",status:"অবস্থা",total:"মোট",actions:"কার্যক্রম",view_details:"বিস্তারিত দেখুন",search:"খুঁজুন",filter:"ফিল্টার",export:"রপ্তানি",print:"প্রিন্ট",edit:"সম্পাদনা",delete:"মুছুন",save:"সংরক্ষণ",cancel:"বাতিল",submit:"জমা দিন",close:"বন্ধ করুন",loading:"লোড হচ্ছে...",no_data:"কোনো তথ্য নেই",business_report:"ব্যবসায়িক রিপোর্ট",expenses:"খরচ",income:"আয়",profit_loss:"লাভ / ক্ষতি",total_expense:"মোট খরচ",total_income:"মোট আয়",home:"হোম",shop:"দোকান",cart:"কার্ট",checkout:"চেকআউট",my_account:"আমার অ্যাকাউন্ট",contact:"যোগাযোগ",about_us:"আমাদের সম্পর্কে",today:"আজ",yesterday:"গতকাল",this_week:"এই সপ্তাহ",this_month:"এই মাস",this_year:"এই বছর",success:"সফল",error:"ত্রুটি",warning:"সতর্কতা",info:"তথ্য"};var ts={};const xo=()=>typeof process<"u"&&ts?.VITE_API_BASE_URL?ts.VITE_API_BASE_URL:typeof process<"u"&&ts?.API_BASE_URL?ts.API_BASE_URL:typeof window<"u"?window.location.origin:`http://0.0.0.0:${ts?.PORT||"3000"}`;class po{constructor(){this.socket=null,this.listeners=new Set,this.tenantId=null,this.apiBaseUrl=xo()}connect(t){this.socket?.connected&&this.tenantId===t||(this.disconnect(),this.tenantId=t,this.socket=en(this.apiBaseUrl,{withCredentials:!0,transports:["polling","websocket"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,timeout:2e4}),this.socket.on("connect",()=>{console.log("[NotificationService] Connected to server"),this.socket?.emit("join-tenant",t)}),this.socket.on("new-notification",s=>{console.log("[NotificationService] New notification:",s),this.listeners.forEach(r=>r(s))}),this.socket.on("disconnect",()=>{console.log("[NotificationService] Disconnected from server")}),this.socket.on("connect_error",s=>{console.error("[NotificationService] Connection error:",s)}))}disconnect(){this.socket&&(this.tenantId&&this.socket.emit("leave-tenant",this.tenantId),this.socket.disconnect(),this.socket=null,this.tenantId=null)}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}async getNotifications(t,s){const r=new URLSearchParams;s?.unreadOnly&&r.append("unreadOnly","true"),s?.limit&&r.append("limit",s.limit.toString());const l=r.toString(),i=`${this.apiBaseUrl}/api/notifications/${t}${l?`?${l}`:""}`,p=await fetch(i,{credentials:"include"});if(!p.ok)throw new Error("Failed to fetch notifications");return p.json()}async markAsRead(t,s){if(!(await fetch(`${this.apiBaseUrl}/api/notifications/${t}/mark-read`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({notificationIds:s})})).ok)throw new Error("Failed to mark notifications as read")}async createNotification(t,s){const r=await fetch(`${this.apiBaseUrl}/api/notifications`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tenantId:t,...s})});if(!r.ok)throw new Error("Failed to create notification");return(await r.json()).data}async cleanupOldNotifications(t){const s=await fetch(`${this.apiBaseUrl}/api/notifications/${t}/cleanup`,{method:"DELETE",credentials:"include"});if(!s.ok)throw new Error("Failed to cleanup notifications");return(await s.json()).deleted}isConnected(){return this.socket?.connected??!1}}const kt=new po,mo=()=>{const a=n.useContext(ja);return a||{user:null,isAuthenticated:!1}},ho=(a={})=>{const{autoConnect:t=!0,unreadOnly:s=!1,limit:r=50,autoFetch:l=!0,pollingInterval:i=0,tenantId:p}=a,{user:g,isAuthenticated:u}=mo(),f=p||g?.tenantId,[w,v]=n.useState([]),[k,S]=n.useState(0),[F,G]=n.useState(!1),[q,$]=n.useState(null),[_,j]=n.useState(!1),z=n.useRef(!1),L=n.useRef(null),T=n.useRef(f),I=n.useRef(s),E=n.useRef(r);n.useEffect(()=>{T.current=f,I.current=s,E.current=r},[f,s,r]);const W=n.useRef(!0),C=n.useCallback(async()=>{const U=T.current;if(U){G(!0),$(null);try{const ee=await kt.getNotifications(U,{unreadOnly:I.current,limit:E.current});W.current&&(v(ee.data),S(ee.unreadCount))}catch(ee){W.current&&$(ee instanceof Error?ee.message:"Failed to fetch notifications")}finally{W.current&&G(!1)}}},[]),A=n.useCallback(async U=>{const ee=T.current;if(ee)try{await kt.markAsRead(ee,U),W.current&&(v(X=>X.map(oe=>!U||U.includes(oe._id)?{...oe,isRead:!0}:oe)),S(U?X=>Math.max(0,X-U.length):0))}catch(X){W.current&&$(X instanceof Error?X.message:"Failed to mark as read")}},[]),d=n.useCallback(async()=>{await A()},[]),Z=n.useCallback(async U=>{const ee=T.current;if(!ee)return null;try{return await kt.createNotification(ee,U)}catch(X){return W.current&&$(X instanceof Error?X.message:"Failed to create notification"),null}},[]),D=n.useCallback(async()=>{if(!f)return 0;try{const U=await kt.cleanupOldNotifications(f);return await C(),U}catch(U){return W.current&&$(U instanceof Error?U.message:"Failed to cleanup notifications"),0}},[]),ne=n.useCallback(()=>{const U=T.current;U&&(kt.connect(U),z.current=!0,j(!0))},[]),de=n.useCallback(()=>{kt.disconnect(),z.current=!1,j(!1)},[]),pe=n.useCallback(()=>{$(null)},[]),K=n.useCallback(()=>{try{const U=new(window.AudioContext||window.webkitAudioContext),ee=U.createOscillator(),X=U.createGain();ee.connect(X),X.connect(U.destination),ee.frequency.setValueAtTime(830,U.currentTime),ee.frequency.setValueAtTime(1046,U.currentTime+.1),ee.type="sine",X.gain.setValueAtTime(.3,U.currentTime),X.gain.exponentialRampToValueAtTime(.01,U.currentTime+.3),ee.start(U.currentTime),ee.stop(U.currentTime+.3)}catch(U){console.warn("Could not play notification sound:",U)}},[]);n.useEffect(()=>kt.subscribe(ee=>{W.current&&(v(X=>[ee,...X]),ee.isRead||(S(X=>X+1),K()))}),[K]);const V=f&&(u||p);return n.useEffect(()=>{if(t&&V&&f)return ne(),()=>{}},[t,V,f]),n.useEffect(()=>{l&&V&&f&&C()},[l,V,f]),n.useEffect(()=>{if(i>0&&V&&f)return L.current=setInterval(C,i),()=>{L.current&&(clearInterval(L.current),L.current=null)}},[i,V,f]),n.useEffect(()=>(W.current=!0,()=>{W.current=!1,L.current&&clearInterval(L.current)}),[]),n.useEffect(()=>{u||(de(),v([]),S(0))},[u,de]),{notifications:w,unreadCount:k,isLoading:F,error:q,isConnected:_,refresh:C,markAsRead:A,markAllAsRead:d,createNotification:Z,cleanupOldNotifications:D,connect:ne,disconnect:de,clearError:pe}},uo={orders:"orders",products:"products",catalog:"catalog",catalog_categories:"catalog",catalog_subcategories:"catalog",catalog_childcategories:"catalog",catalog_brands:"catalog",catalog_tags:"catalog",inventory:"inventory",customers_reviews:"customers",customization:"customization",website_content:"customization",website_content_carousel:"customization",website_content_banners:"customization",website_content_popups:"landing_pages",website_content_landing_page:"landing_pages",gallery:"gallery",business_report:"business_report",settings:"settings",admin_control:"admin_control",activity_log:"activity_log",billing:"billing"},go=[{id:"dashboard",label:"Dashboard",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/dashboard-square-01.webp",alt:"Dashboard",className:"w-5 h-5 object-contain"})},{id:"orders",label:"Orders",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/invoice.webp",alt:"Orders",className:"w-5 h-5 object-contain"})},{id:"products",label:"Products",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/icon-park_ad-product.webp",alt:"Products",className:"w-5 h-5 object-contain"})},{id:"catalog",label:"Catalog",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/hugeicons_catalogue.webp",alt:"Catalog",className:"w-5 h-5 object-contain"}),hasDropdown:!0,children:[{id:"catalog_categories",label:"Category",icon:e.jsx(qe,{className:"w-4 h-4"})},{id:"catalog_subcategories",label:"Sub Category",icon:e.jsx(qe,{className:"w-4 h-4"})},{id:"catalog_childcategories",label:"Child Category",icon:e.jsx(qe,{className:"w-4 h-4"})},{id:"catalog_brands",label:"Brands",icon:e.jsx(qe,{className:"w-4 h-4"})},{id:"catalog_tags",label:"Tags",icon:e.jsx(qe,{className:"w-4 h-4"})}]},{id:"inventory",label:"Inventory",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/note.webp",alt:"Inventory",className:"w-5 h-5 object-contain"})},{id:"customers_reviews",label:"Customers & review",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/user-group.webp",alt:"Customers & review",className:"w-5 h-5 object-contain"})},{id:"customization",label:"Customization",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/arcticons_galaxy-themes.webp",alt:"Customization",className:"w-5 h-5 object-contain"})},{id:"website_content",label:"Website Content",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/fluent_content-view-gallery-28-regular.webp",alt:"Website Content",className:"w-5 h-5 object-contain"}),hasDropdown:!0,children:[{id:"website_content_carousel",label:"Carousal",icon:e.jsx(qe,{className:"w-4 h-4"})},{id:"website_content_banners",label:"Banners",icon:e.jsx(qe,{className:"w-4 h-4"})},{id:"website_content_popups",label:"Popups",icon:e.jsx(qe,{className:"w-4 h-4"})},{id:"website_content_landing_page",label:"Landing Page",icon:e.jsx(qe,{className:"w-4 h-4"})}]},{id:"gallery",label:"Gallery",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/solar_gallery-linear.webp",alt:"Gallery",className:"w-5 h-5 object-contain"})},{id:"business_report",label:"Business Report",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/icon-park_table-report.webp",alt:"Business Report",className:"w-5 h-5 object-contain"})},{id:"settings",label:"Settings",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/ci_settings.webp",alt:"Settings",className:"w-5 h-5 object-contain"})},{id:"admin_control",label:"Admin Control",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/hugeicons_microsoft-admin.webp",alt:"Admin Control",className:"w-5 h-5 object-contain"})},{id:"activity_log",label:"Activity Log",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/transaction-history.webp",alt:"Activity Log",className:"w-5 h-5 object-contain"})},{id:"billing",label:"Billing & Subscription",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/solar_card-linear.webp",alt:"Billing & Subscription",className:"w-5 h-5 object-contain"})},{id:"support",label:"Support",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/pasted_1770763342068.webp",alt:"Support",className:"w-5 h-5 object-contain"})},{id:"tutorial",label:"Tutorial",icon:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/pasted_1770763376612.webp",alt:"Tutorial",className:"w-5 h-5 object-contain"})}],fo=({activeItem:a="dashboard",onNavigate:t,onLogoutClick:s,className:r="",userRole:l,permissions:i})=>{const[p,g]=n.useState([]),u=j=>{if(["dashboard","support","tutorial"].includes(j)||!l||l==="super_admin"||l==="admin"||l==="tenant_admin")return!0;if(l==="staff"){const z=uo[j];return z?i&&i[z]?i[z].includes("read"):!1:!0}return!1},f=n.useMemo(()=>go.filter(j=>u(j.id)?j.children&&j.children.length>0?j.children.filter(L=>u(L.id)).length!==0:!0:!1).map(j=>j.children&&j.children.length>0?{...j,children:j.children.filter(z=>u(z.id))}:j),[l,i]),w=["dashboard","orders","products","catalog","inventory","customers_reviews"],v=["customization","website_content","gallery","business_report"],k=["settings","admin_control","activity_log","billing","support","tutorial"],S=f.filter(j=>w.includes(j.id)),F=f.filter(j=>v.includes(j.id)),G=f.filter(j=>k.includes(j.id)),q=j=>{g(z=>z.includes(j)?z.filter(L=>L!==j):[...z,j])},$=(j,z,L)=>{if(z&&L&&L.length>0){q(j);return}t?.(j)},_=j=>{const z=j.id==="catalog"?a.startsWith("catalog_"):j.id==="website_content"?a.startsWith("website_content_"):a===j.id,L=p.includes(j.id),T=j.children&&j.children.length>0;return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>$(j.id,j.hasDropdown,j.children),className:`w-full flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all duration-200 group font-['Poppins'] ${z?"bg-gradient-to-r from-sky-400 to-blue-500 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:z?"text-white":"text-gray-500 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-200",children:j.icon}),e.jsx("span",{className:"flex-1 text-left text-sm font-medium",children:j.label}),j.badge&&e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${z?"bg-white/20 text-white":"bg-orange-100 text-orange-600"}`,children:j.badge}),T&&e.jsx(_e,{className:`w-4 h-4 transition-transform duration-200 ${L?"rotate-180":""} ${z?"text-white":"text-gray-400"}`})]}),T&&L&&e.jsx("div",{className:"ml-4 mt-1 space-y-1 border-l-2 border-gray-100 dark:border-gray-700",children:j.children.map(I=>{const E=a===I.id;return e.jsxs("button",{onClick:()=>t?.(I.id),className:`w-full flex items-center gap-2 pl-4 pr-4 py-2 rounded-r-lg transition-all duration-200 font-['Poppins'] ${E?"text-sky-500 bg-sky-50 dark:bg-sky-900/20 font-medium":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:E?"text-sky-500":"text-gray-400",children:I.icon}),e.jsx("span",{className:"text-sm",children:I.label})]},I.id)})})]},j.id)};return e.jsxs("nav",{className:`space-y-1 ${r}`,children:[S.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"px-4 mb-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider font-['Poppins']",children:"Main Menu"}),e.jsx("div",{className:"space-y-1",children:S.map(_)})]}),F.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"px-4 mb-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider font-['Poppins']",children:"Configuration"}),e.jsx("div",{className:"space-y-1",children:F.map(_)})]}),G.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"px-4 mb-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider font-['Poppins']",children:"System"}),e.jsx("div",{className:"space-y-1",children:G.map(_)})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700",children:e.jsxs("button",{onClick:()=>s?.(),className:"w-full flex items-center gap-3 px-4 py-2.5 text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors font-['Poppins']",children:[e.jsx(nn,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})})]})},bo=a=>{switch(a){case"order":return e.jsx(Ut,{className:"w-4 h-4 text-blue-500"});case"review":return e.jsx(hn,{className:"w-4 h-4 text-yellow-500"});case"customer":return e.jsx(mn,{className:"w-4 h-4 text-green-500"});case"inventory":return e.jsx(pn,{className:"w-4 h-4 text-orange-500"});case"system":return e.jsx(xn,{className:"w-4 h-4 text-gray-500"});default:return e.jsx(ma,{className:"w-4 h-4 text-gray-500"})}},yo=a=>{const t=new Date(a),r=new Date().getTime()-t.getTime(),l=Math.floor(r/6e4),i=Math.floor(l/60),p=Math.floor(i/24);return l<1?"Just now":l<60?`${l}m ago`:i<24?`${i}h ago`:p<7?`${p}d ago`:t.toLocaleDateString()},Wa={dashboard:"https://www.youtube.com/watch?v=59b9ptwx0Js",orders:"https://www.youtube.com/watch?v=xxxxxxxxx",products:"https://www.youtube.com/watch?v=xxxxxxxxx",inventory:"https://www.youtube.com/watch?v=xxxxxxxxx",customers_reviews:"https://www.youtube.com/watch?v=xxxxxxxxx",customization:"https://www.youtube.com/watch?v=xxxxxxxxx",landing_pages:"https://www.youtube.com/watch?v=xxxxxxxxx",store_studio:"https://www.youtube.com/watch?v=xxxxxxxxx",gallery:"https://www.youtube.com/watch?v=xxxxxxxxx",admin_control:"https://www.youtube.com/watch?v=xxxxxxxxx",business_report:"https://www.youtube.com/watch?v=xxxxxxxxx",activity_log:"https://www.youtube.com/watch?v=xxxxxxxxx",support:"https://www.youtube.com/watch?v=xxxxxxxxx",settings:"https://www.youtube.com/watch?v=xxxxxxxxx",default:"https://www.youtube.com/watch?v=59b9ptwx0Js"},jo=a=>a?window.location.hostname.includes("localhost")?`http://${a}.localhost:3000`:`https://${a}.allinbangla.com`:"#",wo=[{id:"dashboard",label:"Dashboard",keywords:["home","overview","stats","analytics"],category:"Main Menu"},{id:"orders",label:"Orders",keywords:["order","purchase","sales","invoice"],category:"Main Menu"},{id:"products",label:"All Products",keywords:["product","item","listing","merchandise"],category:"Products"},{id:"product-upload",label:"Add New Product",keywords:["add product","upload","new product","create product","insert product"],category:"Products"},{id:"inventory",label:"Inventory",keywords:["stock","warehouse","quantity","manage stock"],category:"Main Menu"},{id:"customers_reviews",label:"Customers & Reviews",keywords:["customer","review","feedback","user","buyer","rating"],category:"Main Menu"},{id:"catalog_categories",label:"Categories",keywords:["category","product category","section"],category:"Catalog"},{id:"catalog_subcategories",label:"Sub Categories",keywords:["subcategory","sub category","child category"],category:"Catalog"},{id:"catalog_childcategories",label:"Child Categories",keywords:["child category","nested category"],category:"Catalog"},{id:"catalog_brands",label:"Brands",keywords:["brand","manufacturer","company"],category:"Catalog"},{id:"catalog_tags",label:"Tags",keywords:["tag","label","keyword"],category:"Catalog"},{id:"customization",label:"Customization",keywords:["customize","theme","design","appearance","look"],category:"Configuration"},{id:"store_studio",label:"Store Studio",keywords:["studio","builder","page builder","design"],category:"Configuration"},{id:"landing_pages",label:"Landing Pages",keywords:["landing","page","offer page","promo page","campaign"],category:"Configuration"},{id:"popups",label:"Popups",keywords:["popup","modal","notification popup","announcement"],category:"Configuration"},{id:"gallery",label:"Gallery",keywords:["image","photo","media","upload image","files"],category:"Configuration"},{id:"business_report_expense",label:"Business Report",keywords:["report","analytics","expense","income","profit","loss"],category:"Reports"},{id:"business_report_purchase",label:"Purchase Report",keywords:["purchase","buy","procurement"],category:"Reports"},{id:"business_report_income",label:"Income Report",keywords:["income","revenue","earning"],category:"Reports"},{id:"business_report_due_book",label:"Due Book",keywords:["due","pending","receivable","payable"],category:"Reports"},{id:"business_report_profit_loss",label:"Profit & Loss",keywords:["profit","loss","margin","earning"],category:"Reports"},{id:"activity_log",label:"",keywords:["activity","log","history","audit","actions"],category:"System"},{id:"support",label:"Support",keywords:["help","support","ticket","contact","assistance"],category:"System"},{id:"tutorial",label:"Tutorial",keywords:["tutorial","guide","help","learn","video"],category:"System"},{id:"profile",label:"Profile",keywords:["profile","account","my account","user info"],category:"System"},{id:"settings",label:"Settings",keywords:["settings","configuration","preferences","setup"],category:"System"},{id:"admin_control",label:"Admin Control",keywords:["admin","control","staff","roles","permissions"],category:"System"},{id:"billing",label:"Billing & Subscription",keywords:["billing","subscription","payment","plan","upgrade"],category:"System"}],vo=()=>{const{isDarkMode:a,toggleDarkMode:t}=qn();return e.jsx("button",{onClick:t,className:"p-1.5 sm:p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md sm:rounded-lg transition-all",title:a?"Switch to Light Mode":"Switch to Dark Mode",children:a?e.jsx(cn,{className:"w-4 h-4 sm:w-5 sm:h-5"}):e.jsx(dn,{className:"w-4 h-4 sm:w-5 sm:h-5"})})},No=({tenantId:a,tenantSubdomain:t,currentPage:s="dashboard",user:r,searchQuery:l,onSearchChange:i,onSearch:p,onNavigate:g,notificationCount:u=0,onNotificationClick:f,notifications:w=[],onMarkNotificationRead:v,onOrderNotificationClick:k,unreadChatCount:S=0,onChatClick:F})=>{const[G,q]=n.useState(!1),[$,_]=n.useState(!1),[j,z]=n.useState(!1),[L,T]=n.useState(""),[I,E]=n.useState(0),W=n.useRef(null),C=n.useRef(null),A=n.useRef(null),d=Xr.useMemo(()=>{if(!L.trim())return[];const K=L.toLowerCase();return wo.filter(V=>V.label.toLowerCase().includes(K)||V.keywords.some(U=>U.toLowerCase().includes(K))).slice(0,8)},[L]);n.useEffect(()=>{const K=V=>{C.current&&!C.current.contains(V.target)&&z(!1)};return j&&document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[j]);const Z=K=>{const V=K.target.value;T(V),z(V.length>0),E(0),i?.(V)},D=K=>{if(!(!j||d.length===0))switch(K.key){case"ArrowDown":K.preventDefault(),E(V=>V<d.length-1?V+1:0);break;case"ArrowUp":K.preventDefault(),E(V=>V>0?V-1:d.length-1);break;case"Enter":K.preventDefault(),d[I]&&ne(d[I].id);break;case"Escape":z(!1),A.current?.blur();break}},ne=K=>{z(!1),T(""),g?.(K)};n.useEffect(()=>{const K=V=>{W.current&&!W.current.contains(V.target)&&q(!1)};return G&&document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[G]);const de=()=>{q(!G),f?.()},pe=()=>{v?.(),q(!1)};return e.jsxs("div",{className:"w-full bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 px-2 sm:px-4 md:px-5 lg:px-6 py-2 sm:py-3 md:py-4 transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0 hidden sm:block",children:[e.jsxs("h1",{className:"text-sm sm:text-lg md:text-xl font-semibold text-gray-900 dark:text-white truncate font-['Poppins']",children:["Welcome back, ",r?.name||"Yuvraj"]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-0.5 sm:mt-1 hidden md:block font-['Poppins']",children:"Monitor your business analytics and statistics."})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-3 flex-1 sm:flex-none justify-end",children:[t?e.jsxs("a",{href:jo(t),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 sm:gap-2 bg-gradient-to-r from-sky-400 to-blue-500 text-white px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 rounded-md sm:rounded-lg hover:opacity-90 transition-opacity shadow-sm",children:[e.jsx(La,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium hidden xs:inline font-['Poppins']",children:"View Website"})]}):e.jsxs("span",{className:"flex items-center gap-1 sm:gap-2 bg-gray-300 text-gray-500 px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 rounded-md sm:rounded-lg cursor-not-allowed",title:"Loading store...",children:[e.jsx(La,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium hidden xs:inline font-['Poppins']",children:"Loading..."})]}),e.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-1 sm:gap-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 rounded-md sm:rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(Pa,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-500"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium hidden sm:inline font-['Poppins']",children:"Tutorials"})]}),e.jsxs("div",{className:"relative hidden md:block",ref:C,children:[e.jsxs("div",{className:`relative flex items-center bg-gray-50 dark:bg-gray-700 rounded-md sm:rounded-lg px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 w-40 lg:w-64 xl:w-72 border ${j&&d.length>0?"border-blue-300 ring-2 ring-blue-100 dark:ring-blue-900":"border-gray-100 dark:border-gray-600"}`,children:[e.jsx(it,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400 dark:text-gray-400 mr-2 sm:mr-3"}),e.jsx("input",{ref:A,type:"text",placeholder:"Search pages...",value:L,onChange:Z,onKeyDown:D,onFocus:()=>L&&z(!0),className:"bg-transparent flex-1 text-xs sm:text-sm text-gray-700 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none font-['Poppins']"}),L&&e.jsx("button",{onClick:()=>{T(""),z(!1)},className:"p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:e.jsx(ge,{className:"w-3 h-3 text-gray-400"})})]}),j&&d.length>0&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 z-50 overflow-hidden max-h-80 overflow-y-auto",children:[(()=>{const K={};d.forEach(U=>{K[U.category]||(K[U.category]=[]),K[U.category].push(U)});let V=0;return Object.entries(K).map(([U,ee])=>e.jsxs("div",{children:[e.jsx("div",{className:"px-3 py-1.5 text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider bg-gray-50 dark:bg-gray-900",children:U}),ee.map(X=>{const oe=V++;return e.jsxs("div",{onClick:()=>ne(X.id),className:`flex items-center gap-3 px-3 py-2.5 cursor-pointer transition-colors ${I===oe?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(it,{className:"w-3.5 h-3.5 text-gray-500 dark:text-gray-400"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:`text-sm font-medium truncate ${I===oe?"text-blue-700 dark:text-blue-300":"text-gray-900 dark:text-gray-100"}`,children:X.label})}),I===oe&&e.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded",children:"Enter"})]},oe)})]},U))})(),e.jsxs("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-900 border-t border-gray-100 dark:border-gray-700 flex items-center justify-between text-[10px] text-gray-400 dark:text-gray-500",children:[e.jsx("span",{children:"↑↓ to navigate"}),e.jsx("span",{children:"Enter to select"}),e.jsx("span",{children:"Esc to close"})]})]}),j&&L&&d.length===0&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 z-50 p-4 text-center",children:[e.jsx(it,{className:"w-6 h-6 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:['No pages found for "',L,'"']})]})]}),e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 md:gap-2",children:[e.jsx(vo,{}),e.jsxs("button",{onClick:F,className:"p-1.5 sm:p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md sm:rounded-lg transition-all relative",title:"Messages",children:[e.jsx(on,{className:"w-4 h-4 sm:w-5 sm:h-5"}),S>0&&e.jsx("span",{className:"absolute -top-0.5 sm:-top-1 -right-0.5 sm:-right-1 w-3 h-3 sm:w-4 sm:h-4 bg-red-500 text-white text-[8px] sm:text-[10px] rounded-full flex items-center justify-center",children:S>9?"9+":S})]}),e.jsxs("div",{className:"relative",ref:W,children:[e.jsxs("button",{onClick:de,className:"p-1.5 sm:p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md sm:rounded-lg transition-all relative",title:"Notifications",children:[e.jsx(ma,{className:"w-4 h-4 sm:w-5 sm:h-5"}),u>0&&e.jsx("span",{className:"absolute -top-0.5 sm:-top-1 -right-0.5 sm:-right-1 w-3 h-3 sm:w-4 sm:h-4 bg-blue-500 text-white text-[8px] sm:text-[10px] rounded-full flex items-center justify-center",children:u>9?"9+":u})]}),G&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-100 dark:border-gray-700 z-50 overflow-hidden",children:[e.jsxs("div",{className:"p-3 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between bg-gray-50 dark:bg-gray-900",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:"Notifications"}),u>0&&e.jsxs("button",{onClick:pe,className:"text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(ln,{className:"w-3 h-3"}),"Mark all read"]})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:w.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400 text-sm",children:[e.jsx(ma,{className:"w-8 h-8 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),"No notifications yet"]}):w.slice(0,10).map(K=>e.jsx("div",{className:`p-3 border-b border-gray-50 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors ${K.isRead?"":"bg-blue-50/50 dark:bg-blue-900/20"}`,onClick:()=>{v?.([K._id]),K.type==="order"&&K.data?.orderId&&k&&(k(K.data.orderId),q(!1))},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:bo(K.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm ${K.isRead?"text-gray-700 dark:text-gray-300":"font-medium text-gray-900 dark:text-white"}`,children:K.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 line-clamp-2",children:K.message}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:yo(K.createdAt)})]}),!K.isRead&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1.5"})]})},K._id))}),w.length>10&&e.jsx("div",{className:"p-2 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-center",children:e.jsx("button",{className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:"View all notifications"})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 md:gap-3 ml-1 sm:ml-2 pl-2 sm:pl-3 md:pl-4 border-l border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-gray-400 dark:text-gray-500 font-['Poppins']",children:"Admin"}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white truncate max-w-[60px] sm:max-w-[80px] md:max-w-none font-['Poppins']",children:r?.name||"Yuvraj"})]}),e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-gradient-to-br from-orange-400 to-orange-500 rounded-full flex items-center justify-center overflow-hidden",children:r?.avatar?e.jsx("img",{src:r.avatar,alt:r.name,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-xs sm:text-sm font-bold text-white",children:(r?.name||"Y").charAt(0).toUpperCase()})})]})]})]}),$&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[100] p-4",onClick:()=>_(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl overflow-hidden",onClick:K=>K.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:e.jsx(Pa,{className:"w-5 h-5 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Tutorial Video"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Learn how to use this feature"})]})]}),e.jsx("button",{onClick:()=>_(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ge,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"w-full bg-black",style:{height:"70vh",maxHeight:"600px"},children:e.jsx("iframe",{width:"100%",height:"100%",src:(()=>{const K=Wa[s]||Wa.default;return`https://www.youtube.com/embed/${K.includes("watch?v=")?K.split("watch?v=")[1]?.split("&")[0]:K.split("/").pop()}?autoplay=1&rel=0`})(),title:"Tutorial Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{width:"100%",height:"100%"}})}),e.jsxs("div",{className:"p-4 bg-gray-50 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Need more help? Visit our ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Help Center"})]}),e.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium text-sm",children:"Close"})]})]})})]})},ko=({children:a,sidebarProps:t={},headerProps:s={},className:r=""})=>{const[l,i]=n.useState(!1);n.useEffect(()=>{const g=()=>{window.innerWidth>=1024&&i(!1)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const p=()=>{i(!1)};return e.jsxs("div",{className:`flex min-h-screen bg-[#F8FAFC] dark:bg-gray-900 transition-colors duration-300 ${r}`,children:[l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:p}),e.jsx("div",{className:`
        fixed lg:relative inset-y-0 left-0 z-50
        transform ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0
        transition-transform duration-300 ease-in-out
        flex-shrink-0 w-[250px] bg-white dark:bg-gray-800 shadow-lg lg:shadow-sm border-r border-gray-100 dark:border-gray-700
      `,children:e.jsxs("div",{className:"sticky top-0 h-screen overflow-y-auto",children:[e.jsxs("div",{className:"px-4 sm:px-6 py-4 sm:py-5 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white font-['Poppins']",children:e.jsx("img",{src:"https://hdnfltv.com/image/nitimages/04aad350-812e-4678-a009-7d576378b603.webp",alt:"System Next IT",className:"w-full h-auto"})})}),e.jsx("button",{onClick:()=>i(!1),className:"lg:hidden p-2 -mr-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(ge,{className:"w-5 h-5"})})]}),e.jsx(fo,{...t,className:"p-3 sm:p-4",onNavigate:g=>{t.onNavigate?.(g),window.innerWidth<1024&&i(!1)}})]})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-[#F8FAFC] dark:bg-gray-900",children:[e.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[e.jsx("button",{onClick:()=>i(!0),className:"lg:hidden p-2 sm:p-3 m-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(un,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsx("div",{className:"flex-1",children:e.jsx(No,{searchQuery:"",onSearchChange:()=>{},...s})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"space-y-4 sm:space-y-6",children:a})})]})]})},Yl=({user:a={name:"Yuvraj"},tenantId:t="",tenantSubdomain:s="",orders:r=[],products:l=[],onNavigate:i,onLogoutClick:p,hasUnreadChat:g=!1,onOpenAdminChat:u})=>{const[f,w]=n.useState("en"),[v,k]=n.useState("year"),[S,F]=n.useState(new Date),[G,q]=n.useState("dashboard"),[$,_]=n.useState(s),{hostTenantSlug:j,tenants:z,activeTenantId:L}=oo();n.useEffect(()=>{const re=(()=>{if(s)return s;if(j)return j;const be=z.find(me=>me.id===(t||L)||me._id===(t||L));return be?.subdomain?be.subdomain:""})();re?_(re):t&&Es.listTenants().then(be=>{const me=be.find(Oe=>Oe.id===t||Oe._id===t);me?.subdomain&&_(me.subdomain)}).catch(()=>{})},[s,j,z,L,t]);const{notifications:T,unreadCount:I,markAsRead:E}=ho({tenantId:t,autoFetch:!0,autoConnect:!0,pollingInterval:3e4}),W=M=>{console.log("Navigating to:",M),q(M),i?.(M)},C=l.length,A=r.length,d=r.reduce((M,re)=>M+(re.amount||0),0),Z=l.filter(M=>(M.stock||0)<10).length,D=r.filter(M=>M.status==="Pending").length,ne=r.filter(M=>M.status==="Pending").length,de=r.filter(M=>M.status==="Confirmed").length,pe=r.filter(M=>M.status==="Sent to Courier"||M.status==="Shipped").length,K=r.filter(M=>M.status==="Delivered").length,V=r.filter(M=>M.status==="Cancelled").length,U=r.filter(M=>M.status==="Return"||M.status==="Refund").length,ee=`৳${d.toLocaleString("en-IN")}`,X=n.useMemo(()=>l.slice(0,4).map((M,re)=>({id:String(M.id||re+1)+"-best-"+re,name:M.name||["Apple iPhone 13","Nike Air Jordan","T-shirt","Cross Bag"][re],totalOrder:String([104,56,266,506][re]||100),status:(M.stock||0)>0?"Stock":"Stock out",price:`$${(M.price||999).toFixed(2)}`,image:M.image?.[0]})),[l]),oe=n.useMemo(()=>l.slice(0,5).map((M,re)=>({id:String(M.id||re+1)+"-top-"+re,name:M.name||["Apple iPhone 13","Nike Air Jordan","T-shirt","Assorted Cross Bag","Fur Pom Gloves"][re],itemCode:`#FXZ-${4567+re}`,price:`$${(M.price||[999,72.4,35.4,80,45][re]).toFixed(2)}`,image:M.image?.[0]})),[l]);return e.jsxs(ko,{sidebarProps:{activeItem:G,onNavigate:W,onLogoutClick:p},headerProps:{user:a,tenantId:t,tenantSubdomain:$,searchQuery:"",onSearchChange:M=>console.log("Search:",M),onSearch:()=>console.log("Search submitted"),onNavigate:W,notificationCount:I,notifications:T,onMarkNotificationRead:E,unreadChatCount:g?1:0,onChatClick:u},children:[G==="orders"&&e.jsx("div",{className:"pb-4",children:e.jsx(pr,{orders:r})}),G==="dashboard"&&e.jsxs("div",{className:"space-y-3 sm:space-y-4 pb-4",children:[e.jsx(Lo,{stats:{totalProducts:C,totalOrders:A,totalAmount:ee,lowStock:Z,toReview:D},currentLang:f,onLangChange:w}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 sm:gap-4 px-3 sm:px-4 lg:px-6",children:[e.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:e.jsx(xl,{visitorStats:{onlineNow:0,todayVisitors:0,totalVisitors:0}})}),e.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:e.jsx(hl,{timeFilter:v,onTimeFilterChange:M=>k(M),onDateRangeChange:M=>F(M.start)})})]}),e.jsx(Po,{orderStats:{pending:ne,confirmed:de,courier:pe,delivered:K,canceled:V,returns:U}}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 sm:gap-4 px-3 sm:px-4 lg:px-6",children:[e.jsx("div",{className:"lg:col-span-8",children:e.jsx(ul,{orders:r,timeFilter:v,selectedMonth:S})}),e.jsx("div",{className:"lg:col-span-4",children:e.jsx(fl,{orders:r})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 sm:gap-4 px-3 sm:px-4 lg:px-6",children:[e.jsx("div",{className:"lg:col-span-8",children:e.jsx(pl,{products:X})}),e.jsx("div",{className:"lg:col-span-4",children:e.jsx(ml,{products:oe})})]})]})]})},ss={totalProduct:"https://hdnfltv.com/image/nitimages/streamline-flex_production-belt-time__2_.webp",totalOrder:"https://hdnfltv.com/image/nitimages/lets-icons_order-light__2_.webp",lowStock:"https://hdnfltv.com/image/nitimages/hugeicons_hot-price__5_.webp",totalAmount:"https://hdnfltv.com/image/nitimages/solar_tag-price-linear__2_.webp",toReview:"https://hdnfltv.com/image/nitimages/mage_preview__1_.webp"},as=({title:a,value:t,iconUrl:s})=>e.jsxs("div",{className:"bg-[#F5F5F5] dark:bg-gray-700 h-[68px] rounded-lg overflow-hidden flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("div",{className:"text-black dark:text-white text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[28px] font-medium font-['Poppins'] leading-tight",children:t}),e.jsx("div",{className:"text-black dark:text-gray-300 text-[13px] font-normal font-['Poppins']",children:a})]}),e.jsx("div",{className:"w-11 h-11 bg-white dark:bg-gray-600 rounded-lg overflow-hidden flex items-center justify-center flex-shrink-0 shadow-sm",children:e.jsx("img",{src:s,alt:a,className:"w-8 h-8 object-contain"})})]}),Co=({currentLang:a,onLangChange:t,date:s,dayName:r})=>e.jsxs("div",{className:"flex gap-4 w-full col-span-2 sm:col-span-1",children:[e.jsxs("div",{className:"bg-[#F5F5F5] dark:bg-gray-700 w-[122px] h-[68px] relative rounded-lg overflow-hidden flex-shrink-0",children:[e.jsx("div",{className:"left-[16px] top-[10px] absolute text-black dark:text-gray-300 text-[13px] font-normal font-['Poppins']",children:"Language"}),e.jsxs("div",{className:"w-[92px] h-[26px] left-[16px] top-[32px] absolute rounded-3xl border border-gray-300 dark:border-gray-500 overflow-hidden",children:[e.jsx("button",{onClick:()=>t("en"),className:`w-[43px] h-[18px] left-[4px] top-[4px] absolute rounded-[20px] overflow-hidden transition-all ${a==="en"?"bg-white dark:bg-gray-500 shadow-sm":"bg-transparent"}`,children:e.jsx("span",{className:"left-[11px] top-[3px] absolute text-black dark:text-white text-[10px] font-normal font-['Poppins']",children:"Eng"})}),e.jsx("button",{onClick:()=>t("bn"),className:`w-[43px] h-[18px] right-[2px] top-[4px] absolute rounded-[20px] overflow-hidden transition-all ${a==="bn"?"bg-white dark:bg-gray-500 shadow-sm":"bg-transparent"}`,children:e.jsx("span",{className:"left-[7px] top-[3px] absolute text-black dark:text-white text-[10px] font-normal font-['Poppins']",children:"বাংলা"})})]})]}),e.jsxs("div",{className:"w-[122px] h-[68px] relative bg-[#F5F5F5] dark:bg-gray-700 rounded-lg overflow-hidden flex-shrink-0",children:[e.jsx("div",{className:"w-40 h-40 left-[26px] top-[22px] absolute bg-gradient-to-r from-sky-400 to-blue-500 rounded-full"}),e.jsx("div",{className:"left-[10px] top-[10px] absolute text-black dark:text-white text-[15px] font-medium font-['Poppins'] z-10",children:s}),e.jsx("div",{className:"left-[67px] top-[34px] absolute text-white text-2xl font-medium font-['Poppins'] z-10",children:r})]})]}),So=({title:a,images:t})=>(n.useState(0),e.jsxs("div",{className:"w-full h-full min-h-[144px] relative bg-stone-50 dark:bg-gray-700 rounded-xl overflow-hidden p-4",children:[e.jsx("div",{className:"text-black dark:text-white text-sm font-medium font-['Poppins'] mb-3",children:"Important Notification"}),e.jsx("div",{className:"w-full h-24 bg-white dark:bg-gray-600 rounded-lg overflow-hidden flex items-center justify-center",children:e.jsx("img",{className:"w-full h-full object-contain p-2",src:"https://hdnfltv.com/image/nitimages/pasted_1770753032030.webp",alt:"Notification"})}),e.jsx("div",{className:"flex justify-center items-center gap-1 mt-3",children:e.jsx("div",{className:"w-5 h-2 bg-gradient-to-r from-sky-400 to-blue-500 rounded-full"})})]})),Lo=({stats:a={totalProducts:0,totalOrders:0,totalAmount:"৳0",lowStock:0,toReview:0,totalStock:0},currentLang:t="en",onLangChange:s=()=>{},notificationImages:r})=>{const l=new Date,i=l.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit"}),p=l.toLocaleDateString("en-US",{weekday:"short"});return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl mx-2 sm:mx-4 md:mx-6 p-4 sm:p-6 shadow-sm overflow-hidden",children:[e.jsx("h2",{className:"text-base font-semibold text-black dark:text-white mb-5 font-['Poppins']",children:"Overview"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-stretch",children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-4 min-w-0",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-4",children:[e.jsx(as,{title:"Total Products",value:a.totalProducts||0,iconUrl:ss.totalProduct}),e.jsx(as,{title:"Total Orders",value:(a.totalOrders||0).toLocaleString(),iconUrl:ss.totalOrder}),e.jsx(Co,{currentLang:t,onLangChange:s,date:i,dayName:p})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-4",children:[e.jsx(as,{title:"Low Stock",value:a.lowStock||0,iconUrl:ss.lowStock}),e.jsx(as,{title:"Total Amount",value:a.totalAmount||"৳0",iconUrl:ss.totalAmount}),e.jsx(as,{title:"To be Reviewed",value:a.toReview||0,iconUrl:ss.toReview})]})]}),e.jsx("div",{className:"w-full lg:w-72 xl:w-80 flex-shrink-0 self-stretch",children:e.jsx(So,{title:"Important Notification",images:r})})]})]})},Po=({orderStats:a={pending:0,confirmed:0,courier:0,delivered:0,canceled:0,returns:0}})=>{const t=[{label:"Pending",value:a.pending,bgColor:"bg-amber-100",color:"#EAB308",icon:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#EAB308",strokeWidth:"2"}),e.jsx("path",{d:"M12 7V12L15 14",stroke:"#EAB308",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})},{label:"Confirmed",value:a.confirmed,bgColor:"bg-green-100",color:"#16A34A",icon:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#16A34A",strokeWidth:"2"}),e.jsx("path",{d:"M8 12L11 15L16 9",stroke:"#16A34A",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})},{label:"Courier",value:a.courier,bgColor:"bg-orange-100",color:"#D97706",icon:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M1 3H14V15H1V3Z",fill:"#D97706"}),e.jsx("path",{d:"M14 7H18L21 10V15H14V7Z",fill:"#D97706"}),e.jsx("circle",{cx:"5",cy:"15",r:"2.5",fill:"white",stroke:"#D97706",strokeWidth:"1.5"}),e.jsx("circle",{cx:"17",cy:"15",r:"2.5",fill:"white",stroke:"#D97706",strokeWidth:"1.5"})]})},{label:"Delivered",value:a.delivered,bgColor:"bg-pink-100",color:"#BE185D",icon:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M4 8L12 4L20 8V16L12 20L4 16V8Z",stroke:"#BE185D",strokeWidth:"2",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 12V20",stroke:"#BE185D",strokeWidth:"2"}),e.jsx("path",{d:"M12 12L20 8",stroke:"#BE185D",strokeWidth:"2"}),e.jsx("path",{d:"M12 12L4 8",stroke:"#BE185D",strokeWidth:"2"})]})},{label:"Canceled",value:a.canceled,bgColor:"bg-red-100",color:"#DC2626",icon:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#DC2626",strokeWidth:"2"}),e.jsx("path",{d:"M15 9L9 15M9 9L15 15",stroke:"#DC2626",strokeWidth:"2",strokeLinecap:"round"})]})},{label:"Returns",value:a.returns,bgColor:"bg-blue-100",color:"#1D4ED8",icon:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#1D4ED8",strokeWidth:"2"}),e.jsx("path",{d:"M15 12H9M9 12L12 9M9 12L12 15",stroke:"#1D4ED8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}];return e.jsxs("div",{className:"px-2 sm:px-4 md:px-5 lg:px-6 w-full",children:[e.jsx("h2",{className:"text-black dark:text-white text-base font-semibold mb-3 font-['Poppins']",children:"Order"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2 sm:gap-4",children:t.map((s,r)=>e.jsxs("div",{className:"h-12 bg-white dark:bg-gray-800 rounded-lg shadow-[0px_2px_9.6px_0px_rgba(0,0,0,0.08)] flex items-center px-2",children:[e.jsx("div",{className:`w-8 h-8 ${s.bgColor} rounded-lg flex items-center justify-center flex-shrink-0`,children:s.icon}),e.jsx("div",{className:"flex-1 ml-2 min-w-0",children:e.jsx("div",{className:"text-black dark:text-gray-300 text-[13px] font-normal font-['Poppins'] truncate",children:s.label})}),e.jsx("div",{className:"text-black dark:text-white text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[28px] font-medium font-['Poppins'] flex-shrink-0",children:s.value})]},r))})]})},Do=({visitorData:a=[[0,0],[5,0],[10,0],[16,0],[22,0],[31,0]],orderData:t=[[0,0],[6,0],[12,0],[16,0],[20,0],[24,0],[31,0]]})=>{const[s,r]=n.useState(!1),l=n.useMemo(()=>{const k=a.some(F=>F[1]>0),S=t.some(F=>F[1]>0);return k||S},[a,t]);n.useEffect(()=>{if(l){const k=setTimeout(()=>r(!0),100);return()=>clearTimeout(k)}},[l]);const i=s&&l,p=100,g=(k,S)=>k.map((F,G)=>{const q=F[0]/31*400,$=S?p-F[1]/100*p:p-5;return`${G===0?"M":"L"}${q},${$}`}).join(" "),u=k=>`${k} L400,${p} L0,${p} Z`,f=g(a,i),w=g(t,i),v=[100,75,50,25,0];return e.jsxs("div",{className:"w-full h-full flex flex-col",children:[e.jsxs("div",{className:"relative flex-1 flex",children:[e.jsx("div",{className:"flex flex-col justify-between h-full w-8 pr-2 flex-shrink-0",children:v.map(k=>e.jsx("div",{className:"text-[10px] font-medium text-gray-400 text-right leading-none",children:k},k))}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none",children:v.map((k,S)=>e.jsx("div",{className:"w-full h-px bg-gray-200"},S))}),e.jsxs("svg",{className:"absolute inset-0 w-full h-full overflow-visible",viewBox:"0 0 400 100",preserveAspectRatio:"none",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"visitorArea",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#38BDF8",stopOpacity:"0.4"}),e.jsx("stop",{offset:"100%",stopColor:"#38BDF8",stopOpacity:"0.05"})]}),e.jsxs("linearGradient",{id:"orderArea",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#FF8A00",stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:"#FF8A00",stopOpacity:"0.1"})]})]}),e.jsx("path",{d:u(f),fill:"url(#visitorArea)",style:{transition:"all 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}}),e.jsx("path",{d:u(w),fill:"url(#orderArea)",style:{transition:"all 1.2s cubic-bezier(0.4, 0, 0.2, 1)",transitionDelay:"0.15s"}}),e.jsx("path",{d:f,fill:"none",stroke:"#38BDF8",strokeWidth:"1.5",strokeDasharray:"2,2",style:{transition:"all 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}}),e.jsx("path",{d:w,fill:"none",stroke:"#FF8A00",strokeWidth:"1.5",strokeDasharray:"2,2",style:{transition:"all 1.2s cubic-bezier(0.4, 0, 0.2, 1)",transitionDelay:"0.15s"}})]})]})]}),e.jsx("div",{className:"flex justify-between pl-8 pt-1",children:[1,8,15,22,31].map(k=>e.jsx("div",{className:"text-[9px] font-medium text-gray-400 text-center",children:k},k))})]})},_o=[{title:"G M V",value:"0",subtitle:"Last 7 days",trend:{value:"0%",isPositive:!0}},{title:"AVG Order",value:"৳ 0",subtitle:"Per customer spend",trend:{value:"0%",isPositive:!0}},{title:"Courier Return (COD)",value:"৳0.00",additionalInfo:[{label:"Total Returned",value:"0"},{label:"Demurrage charges",value:"৳0.00"}],showAction:!0}],Ao=({title:a,value:t,subtitle:s,trend:r,additionalInfo:l,showAction:i})=>{const p="relative w-full p-3 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 flex flex-col gap-1 transition-all hover:shadow-md";return l?e.jsxs("article",{className:p,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h2",{className:"font-semibold text-gray-900 text-xs uppercase tracking-wider",children:a}),i&&e.jsx("button",{className:"text-gray-400 hover:text-blue-600 transition-colors",children:e.jsx(gn,{size:16})})]}),e.jsx("div",{className:"flex gap-4",children:l.map((g,u)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-red-600 text-sm leading-tight",children:g.value}),e.jsx("span",{className:"text-[9px] font-medium text-gray-400 uppercase tracking-tight",children:g.label})]},u))})]}):e.jsxs("article",{className:p,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h2",{className:"font-semibold text-gray-900 text-xs uppercase tracking-wider",children:a}),s&&e.jsx("span",{className:"text-[9px] text-gray-400 font-medium bg-gray-50 px-1.5 py-0.5 rounded-full",children:s})]}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("div",{className:"font-bold text-slate-800 text-xl leading-none",children:t}),r&&e.jsxs("div",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded-md ${r.isPositive?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:[r.isPositive?e.jsx(ha,{size:12}):e.jsx(ua,{size:12}),e.jsx("span",{className:"text-[10px] font-bold leading-none",children:r.value})]})]})]})},To=()=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 flex flex-col gap-3 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Business Overview"}),e.jsx("div",{className:"flex flex-col gap-2",children:_o.map((a,t)=>e.jsx(Ao,{...a},t))})]}),ws=()=>{if(typeof window<"u"){const a=window.location.hostname;if(a!=="localhost"&&a!=="127.0.0.1")return window.location.origin}return import.meta?.env?.VITE_API_BASE_URL||"http://localhost:5001"},dr=a=>{if(!a)return"";const t=a.replace(/\D/g,"");return t?t.startsWith("88")&&t.length>11?t.slice(2):!t.startsWith("0")&&t.length===10?`0${t}`:t:""},xr=a=>a.replace(/[^a-zA-Z0-9]/g,"").slice(-20)||`INV-${Date.now()}`,Eo=(a,t)=>{const s={invoice:xr(a.id),recipient_name:a.customer,recipient_phone:dr(a.phone),recipient_address:a.location,recipient_city:a.division||"Dhaka",cod_amount:Math.round(a.amount),note:t.instruction||`Delivery type: ${a.deliveryType||"Regular"}`,delivery_type:a.deliveryType==="Express"?"express":"regular",item_weight:1,requested_delivery_time:a.deliveryType==="Express"?"asap":void 0,product_id:a.productId?String(a.productId):void 0,product_description:a.productName,customer_email:a.email};return Object.fromEntries(Object.entries(s).filter(([,r])=>r!=null))};class vs{static async sendToSteadfast(t,s){if(!s.apiKey||!s.secretKey)throw new Error("Steadfast credentials are missing. Update Courier Settings and try again.");if(!t.phone)throw new Error("Customer phone number is missing for this order.");const r=Eo(t,s);try{const l=await fetch(`${ws()}/api/courier/steadfast/create-order`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({apiKey:s.apiKey.trim(),secretKey:s.secretKey.trim(),orderData:r})}),i=await l.json().catch(()=>({}));if(!l.ok)throw new Error(i?.error||i?.message||"Steadfast API request failed.");const p=i?.tracking_code||i?.consignment?.tracking_code||i?.consignment_id||i?.invoice;if(!p)throw new Error("Steadfast response did not include a tracking ID.");return{trackingId:p,reference:i?.consignment_id||i?.consignment?.consignment_id||i?.invoice,payload:r,response:i}}catch(l){throw l instanceof Error?l:new Error("Unexpected error while contacting Steadfast.")}}static async checkFraudRisk(t,s){if(!s.apiKey||!s.secretKey)throw new Error("Steadfast credentials are missing. Update Courier Settings and try again.");if(!t.phone)throw new Error("Customer phone number is required to run a fraud check.");try{const r=await fetch(`${ws()}/api/courier/steadfast/fraud-check`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({apiKey:s.apiKey.trim(),secretKey:s.secretKey.trim(),phone:t.phone})}),l=await r.json().catch(()=>({}));if(!r.ok)throw new Error(l?.error||l?.message||"Fraud check failed.");const i=l?.delivery_count||0,p=l?.cancel_count||0,g=i+p;let u=0;return g>0&&(u=Math.round(p/g*100)),{status:l?.status||"Unknown",riskScore:u,remarks:`Delivered: ${i}, Cancelled: ${p}${l?.message?` - ${l.message}`:""}`,raw:l?.raw||l}}catch(r){throw r instanceof Error?r:new Error("Unexpected error during Steadfast fraud check.")}}static async sendToPathao(t,s){if(!s.apiKey||!s.secretKey||!s.username||!s.password)throw new Error("Pathao credentials are missing. Update Courier Settings and try again.");if(!s.storeId)throw new Error("Pathao Store ID is missing. Update Courier Settings and try again.");if(!t.phone)throw new Error("Customer phone number is missing for this order.");const r={dhaka:1,chittagong:2,chattogram:2,rajshahi:3,khulna:4,sylhet:5,barisal:6,barishal:6,rangpur:7,mymensingh:8},l=(t.location||"").toLowerCase(),i=(t.division||"").toLowerCase();let p=1;for(const[u,f]of Object.entries(r))if(l.includes(u)||i.includes(u)){p=f;break}const g={invoice:xr(t.id),recipientName:t.customer,recipientPhone:dr(t.phone),recipientAddress:t.location,recipientCity:t.pathaoCity||p,recipientZone:t.pathaoZone||1,recipientArea:t.pathaoArea||1,amountToCollect:Math.round(t.amount),itemDescription:t.productName||"Product",itemQuantity:t.quantity||1,itemWeight:t.weight||.5,itemType:2,deliveryType:t.deliveryType==="Express"?12:48,specialInstruction:s.instruction||`Delivery type: ${t.deliveryType||"Regular"}`};try{const u=await fetch(`${ws()}/api/courier/pathao/create-order`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({apiKey:s.apiKey.trim(),secretKey:s.secretKey.trim(),username:s.username.trim(),password:s.password.trim(),storeId:s.storeId.trim(),orderData:g})}),f=await u.json().catch(()=>({}));if(!u.ok)throw new Error(f?.error||f?.message||"Pathao API request failed.");const w=f?.data?.consignment_id||f?.consignment_id||f?.data?.tracking_code||f?.tracking_code;if(!w)throw new Error("Pathao response did not include a tracking ID.");return{trackingId:w,reference:f?.data?.consignment_id||f?.consignment_id,payload:g,response:f}}catch(u){throw u instanceof Error?u:new Error("Unexpected error while contacting Pathao.")}}static async loadPathaoConfig(t){try{const s=await fetch(`${ws()}/api/courier/pathao/config`,{method:"GET",headers:{"Content-Type":"application/json","X-Tenant-Id":t},credentials:"include"});if(!s.ok)return null;const r=await s.json();return{apiKey:r.apiKey||"",secretKey:r.secretKey||"",username:r.username||"",password:r.password||"",storeId:r.storeId||"",instruction:r.instruction||""}}catch{return null}}}const Ua="https://allinbangla.com";function Va(a){const t=localStorage.getItem("admin_auth_token"),s={"Content-Type":"application/json","X-Tenant-Id":a};return t&&(s.Authorization=`Bearer ${t}`),s}const Ns={async deleteOrder(a,t){try{const s=encodeURIComponent(t),r=await fetch(`${Ua}/api/orders/${a}/${s}`,{method:"DELETE",headers:Va(a)});if(r.ok)return{success:!0,orderId:t};{const l=await r.text();return console.error(`[OrderService] Failed to delete order ${t}:`,l),{success:!1,orderId:t,error:l}}}catch(s){return console.error(`[OrderService] Error deleting order ${t}:`,s),{success:!1,orderId:t,error:s.message||"Network error"}}},async bulkDelete(a,t){const s=[];let r=0,l=0;for(const i of t){const p=await this.deleteOrder(a,i);s.push(p),p.success?r++:l++}return{successCount:r,failCount:l,results:s}},async updateOrder(a,t,s){try{const r=encodeURIComponent(t),l=await fetch(`${Ua}/api/orders/${a}/${r}`,{method:"PATCH",headers:Va(a),body:JSON.stringify(s)});if(l.ok)return{success:!0,orderId:t};{const i=await l.text();return console.error(`[OrderService] Failed to update order ${t}:`,i),{success:!1,orderId:t,error:i}}}catch(r){return console.error(`[OrderService] Error updating order ${t}:`,r),{success:!1,orderId:t,error:r.message||"Network error"}}},async bulkUpdate(a,t,s){const r=[];let l=0,i=0;for(const p of t){const g=await this.updateOrder(a,p,s);r.push(g),g.success?l++:i++}return{successCount:l,failCount:i,results:r}},async updateStatus(a,t,s){return this.updateOrder(a,t,{status:s})},async bulkUpdateStatus(a,t,s){return this.bulkUpdate(a,t,{status:s})}},Ha={Pending:"text-orange-600 bg-orange-50 border border-orange-200",Confirmed:"text-blue-600 bg-blue-50 border border-blue-200","On Hold":"text-amber-600 bg-amber-50 border border-amber-200",Processing:"text-cyan-600 bg-cyan-50 border border-cyan-200",Shipped:"text-indigo-600 bg-indigo-50 border border-indigo-200","Sent to Courier":"text-purple-600 bg-purple-50 border border-purple-200",Delivered:"text-emerald-600 bg-emerald-50 border border-emerald-200",Cancelled:"text-red-600 bg-red-50 border border-red-200",Return:"text-yellow-600 bg-yellow-50 border border-yellow-200",Refund:"text-pink-600 bg-pink-50 border border-pink-200","Returned Receive":"text-slate-600 bg-slate-50 border border-slate-200"},qa=["Pending","Confirmed","On Hold","Shipped","Sent to Courier","Delivered"],Ka=["Cancelled","Return","Refund","Returned Receive"],Ot={Pending:"Pending",Confirmed:"Confirmed","On Hold":"On Hold",Processing:"Shipping",Shipped:"Shipping","Sent to Courier":"Sent To Courier",Delivered:"Delivered",Cancelled:"Cancel",Return:"Return",Refund:"Refund","Returned Receive":"Returned Receive"},ks=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"BDT",maximumFractionDigits:0}).format(a),Zs=a=>{if(a.trackingId)return a.trackingId;if(a.courierMeta)return a.courierMeta.tracking_id||a.courierMeta.trackingCode||a.courierMeta.consignment_id||a.courierMeta.invoice},pr=({orders:a=[],courierConfig:t={apiKey:"",secretKey:"",instruction:""},onUpdateOrder:s,onAddOrder:r,products:l=[],tenantId:i,onNewOrder:p,initialSelectedOrderId:g,onClearSelectedOrderId:u})=>{const[f,w]=n.useState("all"),[v,k]=n.useState(1),[S,F]=n.useState(""),[G,q]=n.useState(null);n.useRef(null);const[$,_]=n.useState(new Set),[j,z]=n.useState(null),[L,T]=n.useState(null),[I,E]=n.useState(!1),[W,C]=n.useState(null),[A,d]=n.useState(null),[Z,D]=n.useState(null),[ne,de]=n.useState(!1),[pe,K]=n.useState(!1),[V,U]=n.useState({customer:"",phone:"",address:"",division:"",productId:"",quantity:1,deliveryCharge:0,notes:""}),ee=i||localStorage.getItem("activeTenantId")||"",X=Array.isArray(l)?l:[],oe=n.useMemo(()=>V.productId&&X.find(c=>String(c.id)===String(V.productId))||null,[V.productId,X]);n.useEffect(()=>{ne&&(console.log("[FigmaOrderList] Add Order Modal opened"),console.log("[FigmaOrderList] products prop:",l),console.log("[FigmaOrderList] safeProducts:",X),console.log("[FigmaOrderList] products count:",X.length),console.log("[FigmaOrderList] tenantId:",ee))},[ne,l,X,ee]);const[M,re]=n.useState(!1),[be,me]=n.useState(!1),[Oe,Le]=n.useState(!1),[fe,We]=n.useState(!1),[Pe,ke]=n.useState(null),[m,N]=n.useState(null),[O,B]=n.useState(null),[te,ae]=n.useState(!1),le=8;n.useEffect(()=>{const c=b=>{(G||Z)&&(b.target.closest("[data-dropdown]")||(q(null),D(null)))};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[G,Z]),n.useEffect(()=>{(async()=>{try{const b=localStorage.getItem("activeTenantId")||"";if(!b)return;const J=await vs.loadPathaoConfig(b);J&&N(J)}catch{}})()},[]),n.useEffect(()=>{if(g&&a.length>0){const c=a.find(b=>b.id===g);c&&(d(c),u?.())}},[g,a,u]);const ie=a,Je=n.useMemo(()=>{let c=ie;if(f!=="all"&&(f==="pending"?c=c.filter(b=>b.status==="Pending"):f==="delivered"?c=c.filter(b=>b.status==="Delivered"):f==="canceled"?c=c.filter(b=>b.status==="Cancelled"):f==="returned"&&(c=c.filter(b=>b.status==="Return"||b.status==="Returned Receive"))),S.trim()){const b=S.toLowerCase();c=c.filter(J=>J.id?.toLowerCase().includes(b)||J.customer?.toLowerCase().includes(b)||J.phone?.toLowerCase().includes(b)||J.productName?.toLowerCase().includes(b))}return c},[ie,f,S]),Ie=Math.ceil(Je.length/le),ye=n.useMemo(()=>{const c=(v-1)*le;return Je.slice(c,c+le)},[Je,v]);n.useEffect(()=>{k(1),_(new Set)},[f,S]);const P=n.useMemo(()=>{const c=ie.length||1,b=ie.filter(ue=>ue.status==="Pending").length,J=ie.filter(ue=>ue.status==="Confirmed").length,Me=ie.filter(ue=>ue.status==="Delivered").length,Be=ie.filter(ue=>ue.status==="Cancelled").length,Qe=ie.filter(ue=>ue.status==="Return"||ue.status==="Returned Receive").length,dt=ie.filter(ue=>ue.status==="Refund").length;return{total:c,pending:{count:b,percent:Math.round(b/c*100)},confirmed:{count:J,percent:Math.round(J/c*100)},delivered:{count:Me,percent:Math.round(Me/c*100)},canceled:{count:Be,percent:Math.round(Be/c*100)},paidReturned:{count:dt,percent:Math.round(dt/c*100)},returned:{count:Qe,percent:Math.round(Qe/c*100)}}},[ie]),se=n.useMemo(()=>{const c=new Date,b=c.getMonth(),J=c.getFullYear(),Me=new Date(J,b+1,0).getDate(),Be={};for(let ue=1;ue<=Me;ue++)Be[ue]=0;ie.forEach(ue=>{const at=new Date(ue.createdAt||ue.date||"");if(at.getMonth()===b&&at.getFullYear()===J){const xt=at.getDate();Be[xt]=(Be[xt]||0)+1}});const Qe=Math.max(...Object.values(Be),1);return Object.entries(Be).map(([ue,at])=>[parseInt(ue),Math.round(at/Qe*100)])},[ie]),xe=n.useMemo(()=>({all:ie.length,pending:ie.filter(c=>c.status==="Pending").length,delivered:ie.filter(c=>c.status==="Delivered").length,canceled:ie.filter(c=>c.status==="Cancelled").length,returned:ie.filter(c=>c.status==="Return"||c.status==="Returned Receive").length}),[ie]),Ze=[{id:"all",label:"All order",count:xe.all},{id:"pending",label:"Pending",count:xe.pending},{id:"delivered",label:"Delivered",count:xe.delivered},{id:"canceled",label:"Canceled",count:xe.canceled},{id:"returned",label:"Returned",count:xe.returned}],jt=n.useCallback(c=>{z(c),T({...c}),ke(null),q(null)},[]),Ue=n.useCallback(()=>{z(null),T(null),re(!1),me(!1),ke(null)},[]);n.useEffect(()=>{const c=b=>{(b.ctrlKey||b.metaKey)&&b.key==="s"&&j&&(b.preventDefault(),je())};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)});const Ee=(c,b)=>{T(J=>J&&{...J,[c]:b})},je=async()=>{if(!(!j||!L||!s)){re(!0);try{const{id:c,...b}=L;s(j.id,b),Q.success("Order updated"),Ue()}catch{Q.error("Unable to update order")}finally{re(!1)}}},x=async c=>{if(!t.apiKey||!t.secretKey){Q.error("Please configure Steadfast API credentials first.");return}me(!0);try{const b=await vs.checkFraudRisk(c,t);ke(b),Q.success("Fraud check completed")}catch{Q.error("Fraud check failed")}finally{me(!1)}},H=async c=>{if(!t.apiKey||!t.secretKey){Q.error("Configure Steadfast API in Courier Settings first.");return}if(!c.phone){Q.error("Customer phone is required.");return}if(c.courierProvider==="Steadfast"&&c.trackingId){Q.error("Already sent to Steadfast.");return}Le(!0);try{const b=await vs.sendToSteadfast(c,t),J={trackingId:b.trackingId,courierProvider:"Steadfast",courierMeta:b.response,status:"Sent to Courier"};s?.(c.id,J),T(Me=>Me&&{...Me,...J}),Q.success(`Sent to Steadfast! Tracking: ${b.trackingId}`)}catch{Q.error("Failed to send to Steadfast")}finally{Le(!1)}},Y=async c=>{if(!m?.apiKey){Q.error("Configure Pathao API in Courier Settings first.");return}if(!c.phone){Q.error("Customer phone is required.");return}if(c.courierProvider==="Pathao"&&c.trackingId){Q.error("Already sent to Pathao.");return}We(!0);try{const b=await vs.sendToPathao(c,m),J={trackingId:b.trackingId,courierProvider:"Pathao",courierMeta:b.response,status:"Sent to Courier"};s?.(c.id,J),T(Me=>Me&&{...Me,...J}),Q.success(`Sent to Pathao! Tracking: ${b.trackingId}`)}catch{Q.error("Failed to send to Pathao")}finally{We(!1)}},ve=c=>{const b=Zs(c)||"";Fn({order:c,courierProvider:c.courierProvider||"",consignmentId:b,shopName:"Your Shop",shopWebsite:"",shopEmail:"",shopPhone:"",shopAddress:""})},Ne=c=>{Q.success("Order duplicated (placeholder)"),q(null)},ce=async c=>{if(window.confirm("Delete this order? This action cannot be undone.")){B(c);try{const b=await Ns.deleteOrder(ee,c);b.success?(Q.success("Order deleted successfully"),window.location.reload()):(Q.error(`Failed to delete order: ${b.error}`),B(null))}catch{Q.error("Failed to delete order"),B(null)}q(null)}},Ge=c=>{d(c),q(null)},Fe=async(c,b)=>{const J=await Ns.updateStatus(ee,c,b);J.success?(s&&s(c,{status:b}),Q.success(`Status updated to ${b}`)):Q.error(`Failed to update status: ${J.error}`),D(null),q(null)},Re=c=>{_(b=>{const J=new Set(b);return J.has(c)?J.delete(c):J.add(c),J})},Ve=()=>{$.size===ye.length?_(new Set):_(new Set(ye.map(c=>c.id)))},Xe=()=>{_(new Set)},et=()=>{const c=ye.filter(b=>$.has(b.id));c.forEach(b=>ve(b)),Q.success(`Printing ${c.length} invoice(s)`),Xe()},Ye=async()=>{if(window.confirm(`Delete ${$.size} selected orders? This action cannot be undone.`)){ae(!0);try{const c=await Ns.bulkDelete(ee,Array.from($));c.successCount>0&&(Q.success(`${c.successCount} order(s) deleted successfully`),window.location.reload()),c.failCount>0&&(Q.error(`Failed to delete ${c.failCount} order(s)`),ae(!1))}catch{Q.error("Failed to delete orders"),ae(!1)}Xe()}},tt=async c=>{ae(!0);try{const b=await Ns.bulkUpdateStatus(ee,Array.from($),c);b.successCount>0&&(b.results.forEach(J=>{J.success&&s&&s(J.orderId,{status:c})}),Q.success(`${b.successCount} order(s) updated to ${c}`)),b.failCount>0&&Q.error(`Failed to update ${b.failCount} order(s)`)}catch{Q.error("Failed to update orders")}ae(!1),Xe()},st=async()=>{if(!V.customer.trim()||!V.phone.trim()||!V.productId){Q.error("Customer name, phone, and product are required");return}if(!oe){Q.error("Please select a valid product");return}K(!0);const c=`#${Math.floor(1e3+Math.random()*9e3)}`,J=(oe.price||0)*V.quantity+V.deliveryCharge,Me={id:c,tenantId:ee,customer:V.customer.trim(),location:V.address.trim(),phone:V.phone.trim(),customerPhone:V.phone.trim(),division:V.division,amount:J,total:J,grandTotal:J,date:new Date().toLocaleString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),status:"Pending",productId:oe.id,productName:oe.name,productImage:oe.image,quantity:V.quantity,deliveryCharge:V.deliveryCharge,source:"admin",createdAt:new Date().toISOString(),items:[],weight:0,pathaoArea:0,pathaoZone:0,pathaoCity:0,sku:oe.sku||""};try{const Qe=await fetch(`https://allinbangla.com/api/orders/${ee}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Me)});if(Qe.ok){const ue=(await Qe.json()).data||Me;p&&p(ue),Q.success(`Order ${c} created successfully!`),de(!1),U({customer:"",phone:"",address:"",division:"",productId:"",quantity:1,deliveryCharge:0,notes:""})}else{const dt=await Qe.json();Q.error(dt.message||"Failed to create order")}}catch(Be){console.error("Error creating order:",Be),Q.error("Failed to create order")}finally{K(!1)}},bt=(c,b)=>{s&&(s(c,{courierProvider:b,status:"Sent to Courier"}),Q.success(`Courier assigned: ${b}`),E(!1),C(null))},Et=(c=>{if(!c)return null;const b=(c.status||"").toLowerCase();return["pass","safe","low"].some(J=>b.includes(J))?{label:c.status,color:"text-emerald-600",icon:e.jsx(nr,{size:16})}:["review","medium","warn"].some(J=>b.includes(J))?{label:c.status,color:"text-amber-600",icon:e.jsx(Aa,{size:16})}:{label:c.status,color:"text-rose-600",icon:e.jsx(vn,{size:16})}})(Pe),ds=[{label:"Pending",percentage:P.pending.percent,color:"#26007e",bgColor:"bg-[#26007e]"},{label:"Confirmed",percentage:P.confirmed.percent,color:"#7ad100",bgColor:"bg-[#7ad100]"},{label:"Delivered",percentage:P.delivered.percent,color:"#1883ff",bgColor:"bg-[#1883ff]"},{label:"Canceled",percentage:P.canceled.percent,color:"#fab300",bgColor:"bg-[#fab300]"},{label:"Paid Returned",percentage:P.paidReturned.percent,color:"#c71cb6",bgColor:"bg-[#c71cb6]"},{label:"Returned",percentage:P.returned.percent,color:"#da0000",bgColor:"bg-[#da0000]"}],zs=c=>(c.paymentMethod||"").match(/bKash|Nagad|Card|Paid/i)?"bg-green-50 text-green-600":"bg-orange-50 text-orange-600",Yt=[{id:"steadfast",name:"Steadfast",logo:"/icons/steadfast.png"},{id:"pathao",name:"Pathao",logo:"/icons/pathao.png"},{id:"redx",name:"RedX",logo:"/icons/redx.png"}];return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl mx-1 xxs:mx-2 sm:mx-4 md:mx-6 p-2 xxs:p-3 sm:p-6 shadow-sm font-['Poppins']",children:[e.jsxs("div",{className:"flex flex-col xxs:flex-row items-start xxs:items-center justify-between gap-2 xxs:gap-3 sm:gap-0 mb-4 xxs:mb-6",children:[e.jsx("h1",{className:"text-base xxs:text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:"Order List"}),e.jsxs("button",{onClick:()=>de(!0),className:"flex items-center gap-1 xxs:gap-2 px-2 xxs:px-3 sm:px-4 py-1.5 xxs:py-2 bg-gradient-to-r from-sky-400 to-blue-500 text-white rounded-lg text-xs xxs:text-sm font-medium hover:from-sky-500 hover:to-blue-600 transition-all w-full xxs:w-auto justify-center",children:[e.jsx(ot,{className:"w-3 h-3 xxs:w-4 xxs:h-4"}),"Add Order"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 xxs:gap-4 mb-4 xxs:mb-6 dark:bg-gray-800",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-3 xxs:p-4 sm:p-5 flex flex-col h-full",children:[e.jsx("h3",{className:"text-xs xxs:text-sm font-medium text-gray-700 mb-3 xxs:mb-4",children:"Order Summary"}),e.jsxs("div",{className:"flex flex-col xxs:flex-row items-center justify-center gap-3 xxs:gap-4 lg:gap-6 flex-1",children:[e.jsxs("div",{className:"relative w-[140px] h-[140px] xxs:w-[160px] xxs:h-[160px] sm:w-[180px] sm:h-[180px] flex-shrink-0",children:[e.jsx(On,{data:ds,total:P.total}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[e.jsx("span",{className:"text-gray-400 dark:text-gray-300 text-[8px] xxs:text-[9px] font-bold uppercase tracking-widest",children:"Total"}),e.jsx("span",{className:"text-black dark:text-white font-extrabold text-2xl xxs:text-3xl leading-none my-1",children:ie.length}),e.jsx("span",{className:"text-gray-400 dark:text-gray-300 text-[8px] xxs:text-[9px] font-bold uppercase tracking-widest",children:"Orders"})]})]}),e.jsx("div",{className:"flex flex-wrap xxs:flex-col justify-center gap-1 xxs:gap-2 text-xs xxs:text-sm",children:ds.map((c,b)=>e.jsxs("div",{className:"flex items-center gap-1 xxs:gap-2",children:[e.jsx("span",{className:`w-2 h-2 xxs:w-3 xxs:h-3 rounded-full ${c.bgColor}`}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300 font-medium text-[10px] xxs:text-sm",children:c.label}),e.jsxs("span",{style:{color:c.color},className:"text-[10px] xxs:text-sm",children:["(",c.percentage,"%)"]})]},b))})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-3 xxs:p-4 sm:p-5 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-3 xxs:gap-4 mb-2 xxs:mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1 text-[10px] xxs:text-xs font-semibold text-[#FF8A00]",children:[e.jsx("span",{className:"w-1.5 h-1.5 xxs:w-2 xxs:h-2 rounded-full bg-[#FF8A00]"}),"Visitors"]}),e.jsxs("span",{className:"flex items-center gap-1 text-[10px] xxs:text-xs font-semibold text-[#38BDF8]",children:[e.jsx("span",{className:"w-1.5 h-1.5 xxs:w-2 xxs:h-2 rounded-full bg-[#38BDF8]"}),"Orders"]})]}),e.jsx("div",{className:"flex-1 min-h-[140px] xxs:min-h-[160px] sm:min-h-[180px]",children:e.jsx(Do,{orderData:se})})]}),e.jsx(To,{})]}),e.jsx("div",{className:"flex gap-1 xxs:gap-2 mb-4 xxs:mb-6 border-b border-gray-200 overflow-x-auto -mx-2 xxs:mx-0 px-2 xxs:px-0 scrollbar-thin",children:Ze.map(c=>e.jsxs("button",{onClick:()=>w(c.id),className:`px-2 xxs:px-3 sm:px-4 py-2 xxs:py-3 text-xs xxs:text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${f===c.id?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[c.label," (",c.count,")"]},c.id))}),e.jsxs("div",{className:"flex flex-col xxs:flex-row flex-wrap gap-2 xxs:gap-3 mb-4 xxs:mb-6",children:[e.jsxs("div",{className:"flex-1 relative min-w-0",children:[e.jsx(it,{className:"absolute left-2 xxs:left-3 top-2.5 xxs:top-3 w-4 h-4 xxs:w-5 xxs:h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search orders...",value:S,onChange:c=>F(c.target.value),className:"w-full pl-8 xxs:pl-10 pr-3 xxs:pr-4 py-2 border border-gray-200 rounded-lg text-xs xxs:text-sm focus:outline-none focus:border-blue-500"})]}),e.jsx("button",{className:"p-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors self-end xxs:self-auto",children:e.jsx(fn,{className:"w-4 h-4 xxs:w-5 xxs:h-5 text-gray-600"})})]}),$.size>0&&e.jsxs("div",{className:"flex flex-col xxs:flex-row flex-wrap items-start xxs:items-center gap-2 xxs:gap-3 mb-3 xxs:mb-4 p-2 xxs:p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("span",{className:"text-xs xxs:text-sm font-medium text-blue-700",children:[$.size," order",$.size>1?"s":""," selected"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1 xxs:gap-2 w-full xxs:w-auto xxs:ml-auto",children:[e.jsxs("button",{onClick:et,className:"flex items-center gap-1 xxs:gap-1.5 px-2 xxs:px-3 py-1 xxs:py-1.5 bg-white border border-gray-200 rounded-md text-xs xxs:text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(ns,{size:14,className:"xxs:w-4 xxs:h-4"}),e.jsx("span",{className:"hidden xxs:inline",children:"Print"})]}),e.jsxs("button",{onClick:()=>tt("Confirmed"),disabled:te,className:"flex items-center gap-1 xxs:gap-1.5 px-2 xxs:px-3 py-1 xxs:py-1.5 bg-emerald-500 text-white rounded-md text-xs xxs:text-sm font-medium hover:bg-emerald-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[te?e.jsx(nt,{size:14,className:"animate-spin xxs:w-4 xxs:h-4"}):e.jsx(Vt,{size:14,className:"xxs:w-4 xxs:h-4"}),e.jsx("span",{className:"hidden xxs:inline",children:"Confirm"})]}),e.jsxs("button",{onClick:()=>tt("Sent to Courier"),disabled:te,className:"flex items-center gap-1 xxs:gap-1.5 px-2 xxs:px-3 py-1 xxs:py-1.5 bg-purple-500 text-white rounded-md text-xs xxs:text-sm font-medium hover:bg-purple-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[te?e.jsx(nt,{size:14,className:"animate-spin xxs:w-4 xxs:h-4"}):e.jsx(_s,{size:14,className:"xxs:w-4 xxs:h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Courier"})]}),e.jsxs("button",{onClick:()=>tt("Cancelled"),disabled:te,className:"flex items-center gap-1 xxs:gap-1.5 px-2 xxs:px-3 py-1 xxs:py-1.5 bg-orange-500 text-white rounded-md text-xs xxs:text-sm font-medium hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[te?e.jsx(nt,{size:14,className:"animate-spin xxs:w-4 xxs:h-4"}):e.jsx(ge,{size:14,className:"xxs:w-4 xxs:h-4"}),e.jsx("span",{className:"hidden xxs:inline",children:"Cancel"})]}),e.jsxs("button",{onClick:Ye,disabled:te,className:"flex items-center gap-1 xxs:gap-1.5 px-2 xxs:px-3 py-1 xxs:py-1.5 bg-red-500 text-white rounded-md text-xs xxs:text-sm font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[te?e.jsx(nt,{size:14,className:"animate-spin xxs:w-4 xxs:h-4"}):e.jsx(lt,{size:14,className:"xxs:w-4 xxs:h-4"}),e.jsx("span",{className:"hidden xxs:inline",children:"Delete"})]}),e.jsx("button",{onClick:Xe,className:"p-1 xxs:p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",children:e.jsx(ge,{size:16,className:"xxs:w-[18px] xxs:h-[18px]"})})]})]}),e.jsx("div",{className:"overflow-x-auto -mx-2 xxs:mx-0 px-2 xxs:px-0",children:e.jsxs("table",{className:"w-full text-xs xxs:text-sm min-w-[600px]",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-8 xxs:w-10 px-2 xxs:px-3 py-2 xxs:py-3",children:e.jsx("input",{type:"checkbox",checked:ye.length>0&&$.size===ye.length,onChange:Ve,className:"w-3 h-3 xxs:w-4 xxs:h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"})}),e.jsx("th",{className:"w-20 xxs:w-24 px-2 xxs:px-3 py-2 xxs:py-3 text-left font-semibold text-gray-700",children:"Order ID"}),e.jsx("th",{className:"w-32 xxs:w-44 px-2 xxs:px-3 py-2 xxs:py-3 text-left font-semibold text-gray-700",children:"Product"}),e.jsx("th",{className:"w-32 xxs:w-40 px-2 xxs:px-3 py-2 xxs:py-3 text-left font-semibold text-gray-700",children:"Customer"}),e.jsx("th",{className:"w-16 xxs:w-20 px-2 xxs:px-3 py-2 xxs:py-3 text-left font-semibold text-gray-700",children:"Date"}),e.jsx("th",{className:"w-20 xxs:w-24 px-2 xxs:px-3 py-2 xxs:py-3 text-left font-semibold text-gray-700",children:"Price"}),e.jsx("th",{className:"w-14 xxs:w-16 px-2 xxs:px-3 py-2 xxs:py-3 text-left font-semibold text-gray-700",children:"Payment"}),e.jsx("th",{className:"w-24 xxs:w-32 px-2 xxs:px-3 py-2 xxs:py-3 text-left font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"w-10 xxs:w-12 px-2 xxs:px-3 py-2 xxs:py-3 text-center font-semibold text-gray-700",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:ye.length>0?ye.map(c=>e.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${$.has(c.id)?"bg-blue-50":""}`,children:[e.jsx("td",{className:"px-2 xxs:px-3 py-2 xxs:py-3",children:e.jsx("input",{type:"checkbox",checked:$.has(c.id),onChange:()=>Re(c.id),className:"w-3 h-3 xxs:w-4 xxs:h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"})}),e.jsxs("td",{className:"px-2 xxs:px-3 py-2 xxs:py-3 font-medium text-gray-900 whitespace-nowrap text-[10px] xxs:text-sm",children:["#",c.id?.slice(-6)]}),e.jsx("td",{className:"px-2 xxs:px-3 py-2 xxs:py-3",children:e.jsxs("div",{className:"flex items-center gap-1 xxs:gap-2 min-w-0",children:[c.productImage?e.jsx("img",{src:Ke(c.productImage),alt:"",className:"w-6 h-6 xxs:w-8 xxs:h-8 rounded object-cover flex-shrink-0"}):e.jsx("div",{className:"w-6 h-6 xxs:w-8 xxs:h-8 rounded bg-gray-100 flex items-center justify-center flex-shrink-0",children:e.jsx(Hs,{size:12,className:"text-gray-400 xxs:w-[14px] xxs:h-[14px]"})}),e.jsx("span",{className:"text-gray-700 truncate text-[10px] xxs:text-sm max-w-[80px] xxs:max-w-none",title:c.productName||"Custom Order",children:c.productName||"Custom Order"})]})}),e.jsxs("td",{className:"px-2 xxs:px-3 py-2 xxs:py-3",children:[e.jsx("div",{className:"truncate text-gray-900 font-medium text-[10px] xxs:text-sm max-w-[80px] xxs:max-w-none",title:c.customer,children:c.customer}),e.jsx("div",{className:"text-[9px] xxs:text-xs text-gray-500 truncate",children:c.phone||"No phone"})]}),e.jsx("td",{className:"px-2 xxs:px-3 py-2 xxs:py-3 text-gray-700 whitespace-nowrap text-[10px] xxs:text-sm",children:c.date?new Date(c.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short"}):"-"}),e.jsx("td",{className:"px-2 xxs:px-3 py-2 xxs:py-3 font-medium text-gray-900 whitespace-nowrap text-[10px] xxs:text-sm",children:ks(c.amount)}),e.jsx("td",{className:"px-2 xxs:px-3 py-2 xxs:py-3",children:e.jsx("span",{className:`px-1.5 xxs:px-2 py-0.5 xxs:py-1 rounded text-[9px] xxs:text-xs font-medium whitespace-nowrap ${zs(c)}`,children:c.paymentMethod?.match(/bKash|Nagad|Card|Paid/i)?"Paid":"COD"})}),e.jsx("td",{className:"px-2 xxs:px-3 py-2 xxs:py-3",children:e.jsxs("div",{className:"flex items-center gap-1 xxs:gap-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"flex-shrink-0 xxs:w-5 xxs:h-5",children:[e.jsx("path",{d:"M4.25 3.75H13.5C14.4665 3.75 15.25 4.53351 15.25 5.5V6.88965H17.2041C17.7848 6.88978 18.3279 7.1782 18.6533 7.65918L21.1992 11.4238C21.395 11.7132 21.4999 12.0549 21.5 12.4043V17.25H22C22.1381 17.25 22.25 17.3619 22.25 17.5C22.25 17.6381 22.1381 17.75 22 17.75H19.6621L19.5869 18.1582C19.3651 19.3485 18.3198 20.2498 17.0654 20.25C15.8109 20.25 14.7657 19.3487 14.5439 18.1582L14.4678 17.75H9.91211L9.83691 18.1582C9.61515 19.3485 8.56978 20.2498 7.31543 20.25C6.06089 20.25 5.01579 19.3487 4.79395 18.1582L4.71777 17.75H4.25C3.28351 17.75 2.5 16.9665 2.5 16V5.5C2.5 4.5335 3.2835 3.75 4.25 3.75ZM7.31543 15.6201C6.17509 15.6201 5.25023 16.5443 5.25 17.6846C5.25 18.825 6.17495 19.75 7.31543 19.75C8.45571 19.7498 9.37988 18.8249 9.37988 17.6846C9.37965 16.5445 8.45557 15.6203 7.31543 15.6201ZM17.0654 15.6201C15.9251 15.6201 15.0002 16.5443 15 17.6846C15 18.825 15.925 19.75 17.0654 19.75C18.2057 19.7498 19.1299 18.8249 19.1299 17.6846C19.1297 16.5445 18.2055 15.6203 17.0654 15.6201ZM4.25 4.25C3.55965 4.25 3 4.80965 3 5.5V16C3 16.6903 3.55964 17.25 4.25 17.25H4.75977L4.87109 16.9023C5.20208 15.8679 6.17245 15.1201 7.31543 15.1201C8.45822 15.1203 9.42782 15.868 9.75879 16.9023L9.87012 17.25H14.5098L14.6211 16.9023C14.6466 16.8227 14.6762 16.7448 14.709 16.6689L14.75 16.5742V5.5C14.75 4.80964 14.1903 4.25 13.5 4.25H4.25ZM15.25 15.707L15.9648 15.3672C16.2977 15.2089 16.6707 15.1201 17.0654 15.1201C18.2082 15.1203 19.1779 15.8681 19.5088 16.9023L19.6201 17.25H21V12.1953H15.25V15.707ZM15.25 11.6953H20.7793L20.251 10.915L18.2393 7.93945C18.0068 7.5959 17.6189 7.38978 17.2041 7.38965H15.25V11.6953Z",stroke:"#26007F"}),e.jsx("path",{d:"M12 10C12 11.6569 10.6569 13 9 13C7.34315 13 6 11.6569 6 10C6 8.34315 7.34315 7 9 7C9.47068 7 9.91605 7.1084 10.3125 7.30159M11.4375 8.125L8.8125 10.75L8.0625 10",stroke:"#26007F",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("span",{className:`px-1 xxs:px-2 py-0.5 xxs:py-1 rounded-full text-[9px] xxs:text-xs font-medium whitespace-nowrap ${Ha[c.status]||"bg-gray-100 text-gray-600"}`,children:Ot[c.status]||c.status})]})}),e.jsx("td",{className:"px-2 xxs:px-3 py-2 xxs:py-3 text-center relative",children:e.jsxs("div",{"data-dropdown":!0,children:[e.jsx("button",{onClick:()=>q(G===c.id?null:c.id),className:"p-0.5 xxs:p-1 hover:bg-gray-200 rounded transition-colors",children:e.jsx(bn,{className:"w-3 h-3 xxs:w-4 xxs:h-4 text-gray-600"})}),G===c.id&&e.jsx("div",{className:"absolute right-full top-0 mr-1 xxs:mr-2 z-50",children:e.jsxs("div",{style:{width:"160px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",overflow:"visible",padding:"6px 0"},children:[e.jsxs("button",{onClick:()=>jt(c),style:{display:"flex",alignItems:"center",gap:"6px",width:"100%",height:"40px",padding:"0 16px",backgroundColor:"white",border:"none",cursor:"pointer",fontFamily:'"Lato", sans-serif',fontWeight:600,fontSize:"14px",color:"black",whiteSpace:"nowrap"},onMouseEnter:b=>b.currentTarget.style.backgroundColor="#f9f9f9",onMouseLeave:b=>b.currentTarget.style.backgroundColor="white",children:[e.jsx(Da,{size:18,color:"black"}),"Edit"]}),e.jsxs("button",{onClick:()=>{ve(c),q(null)},style:{display:"flex",alignItems:"center",gap:"6px",width:"100%",height:"40px",padding:"0 16px",backgroundColor:"white",border:"none",cursor:"pointer",fontFamily:'"Lato", sans-serif',fontWeight:600,fontSize:"14px",color:"black",whiteSpace:"nowrap"},onMouseEnter:b=>b.currentTarget.style.backgroundColor="#f9f9f9",onMouseLeave:b=>b.currentTarget.style.backgroundColor="white",children:[e.jsx(ns,{size:18,color:"black"}),"Print"]}),e.jsxs("button",{onClick:()=>Ge(c),style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",height:"48px",padding:"0 24px",backgroundColor:"#f4f4f4",border:"none",cursor:"pointer",fontFamily:'"Lato", sans-serif',fontWeight:600,fontSize:"16px",color:"black",whiteSpace:"nowrap"},onMouseEnter:b=>b.currentTarget.style.backgroundColor="#eaeaea",onMouseLeave:b=>b.currentTarget.style.backgroundColor="#f4f4f4",children:[e.jsx(yn,{size:24,color:"black"}),"Details"]}),e.jsxs("button",{onClick:()=>Ne(),style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",height:"48px",padding:"0 24px",backgroundColor:"white",border:"none",cursor:"pointer",fontFamily:'"Lato", sans-serif',fontWeight:600,fontSize:"16px",color:"black",whiteSpace:"nowrap"},onMouseEnter:b=>b.currentTarget.style.backgroundColor="#f9f9f9",onMouseLeave:b=>b.currentTarget.style.backgroundColor="white",children:[e.jsx(ga,{size:24,color:"black"}),"Duplicate"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("button",{onClick:b=>{b.stopPropagation(),D(Z===c.id?null:c.id)},style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",height:"48px",padding:"0 24px",backgroundColor:"white",border:"none",cursor:"pointer",fontFamily:'"Lato", sans-serif',fontWeight:600,fontSize:"16px",color:"black",whiteSpace:"nowrap"},onMouseEnter:b=>b.currentTarget.style.backgroundColor="#f9f9f9",onMouseLeave:b=>b.currentTarget.style.backgroundColor="white",children:[e.jsx(jn,{size:24,color:"black"}),"Order Status"]}),Z===c.id&&e.jsxs("div",{style:{position:"absolute",right:"100%",top:"-50%",width:"180px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",padding:"8px 0",zIndex:100,marginRight:"8px"},children:[qa.map(b=>e.jsx("button",{onClick:J=>{J.stopPropagation(),Fe(c.id,b)},style:{display:"block",width:"100%",padding:"10px 16px",textAlign:"left",backgroundColor:c.status===b?"#f0f0f0":"white",border:"none",cursor:"pointer",fontFamily:'"Lato", sans-serif',fontSize:"14px",color:"black",whiteSpace:"nowrap"},onMouseEnter:J=>J.currentTarget.style.backgroundColor="#f4f4f4",onMouseLeave:J=>J.currentTarget.style.backgroundColor=c.status===b?"#f0f0f0":"white",children:Ot[b]},b)),e.jsx("div",{style:{height:"1px",backgroundColor:"#e5e5e5",margin:"8px 0"}}),Ka.map(b=>e.jsx("button",{onClick:J=>{J.stopPropagation(),Fe(c.id,b)},style:{display:"block",width:"100%",padding:"10px 16px",textAlign:"left",backgroundColor:c.status===b?"#f0f0f0":"white",border:"none",cursor:"pointer",fontFamily:'"Lato", sans-serif',fontSize:"14px",color:"black",whiteSpace:"nowrap"},onMouseEnter:J=>J.currentTarget.style.backgroundColor="#f4f4f4",onMouseLeave:J=>J.currentTarget.style.backgroundColor=c.status===b?"#f0f0f0":"white",children:Ot[b]},b))]})]}),e.jsxs("button",{onClick:()=>ce(c.id),disabled:O===c.id,style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",height:"48px",padding:"0 24px",backgroundColor:"white",border:"none",cursor:O===c.id?"wait":"pointer",fontFamily:'"Lato", sans-serif',fontWeight:600,fontSize:"16px",color:"#da0000",whiteSpace:"nowrap",opacity:O===c.id?.7:1},onMouseEnter:b=>!O&&(b.currentTarget.style.backgroundColor="#f9f9f9"),onMouseLeave:b=>b.currentTarget.style.backgroundColor="white",children:[O===c.id?e.jsx(nt,{size:24,color:"#da0000",className:"animate-spin"}):e.jsx(lt,{size:24,color:"#da0000"}),O===c.id?"Deleting...":"Delete"]})]})})]})})]},c.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:9,className:"px-4 py-12 text-center text-gray-500",children:[e.jsx(Hs,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"font-medium",children:"No orders found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})})})]})}),Je.length>le&&e.jsxs("div",{className:"flex flex-col items-center mt-4 xxs:mt-6 pt-3 xxs:pt-4 border-t border-pink-200",children:[e.jsxs("p",{className:"text-xs xxs:text-sm text-gray-500 mb-2 xxs:mb-3",children:["Showing ",(v-1)*le+1," to ",Math.min(v*le,Je.length)," of ",Je.length]}),e.jsxs("div",{className:"flex items-center gap-0.5 xxs:gap-1 sm:gap-2 flex-wrap justify-center",children:[e.jsxs("button",{onClick:()=>k(c=>Math.max(1,c-1)),disabled:v===1,className:"flex items-center gap-0.5 xxs:gap-1 px-1.5 xxs:px-2 sm:px-3 py-1 xxs:py-1.5 sm:py-2 text-xs xxs:text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-md sm:rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx($s,{size:14,className:"xxs:w-4 xxs:h-4"}),e.jsx("span",{className:"hidden xxs:inline",children:"Prev"})]}),e.jsx("div",{className:"flex items-center gap-0.5 xxs:gap-1 sm:gap-2 mx-0.5 xxs:mx-1 sm:mx-2",children:(()=>{const c=[];if(Ie<=5)for(let b=1;b<=Ie;b++)c.push(b);else if(c.push(1),v<=3){for(let b=2;b<=3;b++)c.push(b);c.push("..."),c.push(Ie)}else if(v>=Ie-2){c.push("...");for(let b=Ie-2;b<=Ie;b++)c.push(b)}else c.push("..."),c.push(v),c.push("..."),c.push(Ie);return c.map((b,J)=>b==="..."?e.jsx("span",{className:"px-1 xxs:px-2 py-1 text-gray-400 text-xs xxs:text-sm",children:"..."},`ellipsis-${J}`):e.jsx("button",{onClick:()=>k(b),className:`min-w-[28px] xxs:min-w-[32px] sm:min-w-[36px] h-7 xxs:h-8 sm:h-9 px-1.5 xxs:px-2 sm:px-3 py-1 xxs:py-1.5 sm:py-2 text-xs xxs:text-sm font-medium rounded-md sm:rounded-lg border transition-all shadow-sm ${v===b?"bg-gradient-to-r from-sky-400 to-blue-500 text-white border-transparent hover:opacity-90":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50 hover:border-gray-300"}`,children:b},b))})()}),e.jsxs("button",{onClick:()=>k(c=>Math.min(Ie,c+1)),disabled:v===Ie,className:"flex items-center gap-0.5 xxs:gap-1 px-1.5 xxs:px-2 sm:px-3 py-1 xxs:py-1.5 sm:py-2 text-xs xxs:text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md sm:rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"hidden xxs:inline",children:"Next"}),e.jsx(qe,{size:14,className:"xxs:w-4 xxs:h-4"})]})]})]}),I&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 bg-gray-50",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Select Courier"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Choose a delivery partner"})]}),e.jsx("div",{className:"p-2",children:Yt.map(c=>e.jsxs("button",{onClick:()=>W&&bt(W,c.name),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-white border flex items-center justify-center",children:e.jsx(_a,{size:20,className:"text-gray-400"})}),e.jsx("span",{className:"font-medium text-gray-900",children:c.name})]}),e.jsx(qe,{size:16,className:"text-gray-400"})]},c.id))}),e.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end",children:e.jsx("button",{onClick:()=>{E(!1),C(null)},className:"px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-200 rounded-lg",children:"Cancel"})})]})}),j&&L&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-5xl h-[90vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 lg:p-6 border-b bg-gray-50",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Order"}),e.jsxs("span",{className:"px-2.5 py-0.5 rounded-full bg-gray-200 text-gray-700 text-xs font-mono",children:["#",j.id?.slice(-6)]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Update order details and send to courier"})]}),e.jsx("button",{onClick:Ue,className:"p-2 text-gray-400 hover:text-gray-700 hover:bg-gray-200 rounded-full",children:e.jsx(ge,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-autop-3 sm:p-4 lg:p-6 lg:p-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-3 sm:p-4 lg:p-6 rounded-xl border",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-5 bg-blue-600 rounded-full"})," Customer Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"block space-y-1.5",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Customer Name"}),e.jsx("input",{className:"w-full px-3 py-2 bg-white border rounded-lg text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",value:L.customer,onChange:c=>Ee("customer",c.target.value)})]}),e.jsxs("label",{className:"block space-y-1.5",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Phone"}),e.jsx("input",{className:"w-full px-3 py-2 bg-white border rounded-lg text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",value:L.phone||"",onChange:c=>Ee("phone",c.target.value)})]}),e.jsxs("label",{className:"block space-y-1.5",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Email"}),e.jsx("input",{className:"w-full px-3 py-2 bg-white border rounded-lg text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",value:L.email||"",onChange:c=>Ee("email",c.target.value)})]}),e.jsxs("label",{className:"block space-y-1.5",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Division"}),e.jsx("input",{className:"w-full px-3 py-2 bg-white border rounded-lg text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",value:L.division||"",onChange:c=>Ee("division",c.target.value)})]})]}),e.jsxs("label",{className:"block space-y-1.5 mt-4",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Delivery Address"}),e.jsx("textarea",{rows:2,className:"w-full px-3 py-2 bg-white border rounded-lg text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none resize-none",value:L.location,onChange:c=>Ee("location",c.target.value)})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 sm:p-4 lg:p-6 rounded-xl border",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-5 bg-emerald-600 rounded-full"})," Order Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"block space-y-1.5",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Amount (BDT)"}),e.jsx("input",{type:"number",className:"w-full px-3 py-2 bg-white border rounded-lg text-sm focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none",value:L.amount,onChange:c=>Ee("amount",Number(c.target.value))})]}),e.jsxs("label",{className:"block space-y-1.5",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Delivery Charge"}),e.jsx("input",{type:"number",className:"w-full px-3 py-2 bg-white border rounded-lg text-sm focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none",value:L.deliveryCharge||0,onChange:c=>Ee("deliveryCharge",Number(c.target.value))})]}),e.jsxs("label",{className:"block space-y-1.5",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Status"}),e.jsxs("select",{className:"w-full px-3 py-2 bg-white border rounded-lg text-sm focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none",value:L.status,onChange:c=>Ee("status",c.target.value),children:[e.jsx("optgroup",{label:"Order Flow",children:qa.map(c=>e.jsx("option",{value:c,children:Ot[c]},c))}),e.jsx("optgroup",{label:"Terminal",children:Ka.map(c=>e.jsx("option",{value:c,children:Ot[c]},c))})]})]}),e.jsxs("label",{className:"block space-y-1.5",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Courier Provider"}),e.jsxs("select",{className:"w-full px-3 py-2 bg-white border rounded-lg text-sm focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none",value:L.courierProvider||"",onChange:c=>Ee("courierProvider",c.target.value||void 0),children:[e.jsx("option",{value:"",children:"Not Assigned"}),e.jsx("option",{value:"Steadfast",children:"Steadfast"}),e.jsx("option",{value:"Pathao",children:"Pathao"})]})]}),e.jsxs("label",{className:"block space-y-1.5",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Tracking ID"}),e.jsx("input",{className:"w-full px-3 py-2 bg-white border rounded-lg text-sm focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none",value:L.trackingId||"",onChange:c=>Ee("trackingId",c.target.value)})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-900 text-gray-300 p-3 sm:p-4 lg:p-6 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-white font-semibold border-b border-gray-700 pb-2",children:[e.jsx(Hs,{size:18})," Order Snapshot"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(wn,{size:16,className:"text-gray-500"})," ",e.jsx("span",{className:"text-gray-200",children:L.productName||"Custom"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Aa,{size:16,className:"text-gray-500"})," ",e.jsxs("span",{children:["Qty: ",e.jsx("span",{className:"text-white font-medium",children:L.quantity||1})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_a,{size:16,className:"text-gray-500"})," ",e.jsxs("span",{className:"truncate",children:["ID: ",Zs(L)||"Pending"]})]})]})]}),e.jsxs("div",{className:"border rounded-xl p-5 bg-white",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:"Fraud Check"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Powered by Steadfast"})]}),Et&&e.jsxs("div",{className:`flex items-center gap-1.5 text-xs font-bold px-2 py-1 rounded border bg-gray-50 ${Et.color}`,children:[Et.icon,e.jsx("span",{className:"uppercase",children:Et.label})]})]}),Pe&&e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded text-sm",children:[e.jsxs("p",{children:["Score: ",e.jsx("span",{className:"font-bold",children:Pe.riskScore??"N/A"})]}),Pe.remarks&&e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:Pe.remarks})]}),e.jsx("button",{onClick:()=>x(L),disabled:be,className:"w-full py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-xs font-bold uppercase",children:be?"Checking...":"Run Analysis"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Quick Actions"}),L.courierProvider==="Steadfast"&&L.trackingId?e.jsxs("div",{className:"w-full p-3 bg-emerald-50 border border-emerald-100 text-emerald-700 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Vt,{size:18})," Sent to Steadfast"]}):e.jsxs("button",{onClick:()=>H(L),disabled:Oe||!t.apiKey,className:"w-full p-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-200 disabled:text-gray-400 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[Oe?e.jsx(nt,{size:18,className:"animate-spin"}):e.jsx(_s,{size:18}),"Send to Steadfast"]}),L.courierProvider==="Pathao"&&L.trackingId?e.jsxs("div",{className:"w-full p-3 bg-emerald-50 border border-emerald-100 text-emerald-700 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Vt,{size:18})," Sent to Pathao"]}):e.jsxs("button",{onClick:()=>Y(L),disabled:fe||!m?.apiKey,className:"w-full p-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-200 disabled:text-gray-400 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[fe?e.jsx(nt,{size:18,className:"animate-spin"}):e.jsx(_s,{size:18}),"Send to Pathao"]}),e.jsxs("button",{onClick:()=>ve(L),className:"w-full p-3 border hover:bg-gray-50 text-gray-700 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(ns,{size:18})," Print Invoice"]})]})]})]})}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-end gap-3",children:[e.jsx("button",{onClick:Ue,className:"px-5 py-2.5 rounded-lg border text-gray-700 font-medium hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:je,disabled:M,className:"px-5 py-2.5 rounded-lg bg-gray-900 text-white font-medium hover:bg-gray-800 disabled:opacity-70 flex items-center gap-2",children:[M&&e.jsx(nt,{size:18,className:"animate-spin"}),M?"Saving...":"Save Changes"]})]})]})}),A&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.25)",width:"100%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 24px",borderBottom:"1px solid #e5e5e5",backgroundColor:"#f9fafb"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontFamily:'"Lato", sans-serif',fontWeight:700,fontSize:"20px",color:"#111827",margin:0},children:"Order Details"}),e.jsxs("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"14px",color:"#6b7280",marginTop:"4px"},children:["Order #",A.id?.slice(-6)]})]}),e.jsx("button",{onClick:()=>d(null),style:{padding:"8px",backgroundColor:"transparent",border:"none",cursor:"pointer",borderRadius:"8px"},onMouseEnter:c=>c.currentTarget.style.backgroundColor="#f3f4f6",onMouseLeave:c=>c.currentTarget.style.backgroundColor="transparent",children:e.jsx(ge,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-semibold ${Ha[A.status]||"bg-gray-100 text-gray-600"}`,children:Ot[A.status]||A.status})}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",borderRadius:"12px",padding:"20px",marginBottom:"16px"},children:[e.jsxs("h3",{style:{fontFamily:'"Lato", sans-serif',fontWeight:700,fontSize:"16px",color:"#374151",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"4px",height:"20px",backgroundColor:"#3b82f6",borderRadius:"2px"}}),"Customer Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"12px",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",marginBottom:"4px"},children:"Name"}),e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"15px",color:"#111827",fontWeight:500},children:A.customer||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"12px",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",marginBottom:"4px"},children:"Phone"}),e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"15px",color:"#111827",fontWeight:500},children:A.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"12px",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",marginBottom:"4px"},children:"Email"}),e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"15px",color:"#111827",fontWeight:500},children:A.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"12px",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",marginBottom:"4px"},children:"Division"}),e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"15px",color:"#111827",fontWeight:500},children:A.division||"N/A"})]})]}),e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"12px",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",marginBottom:"4px"},children:"Delivery Address"}),e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"15px",color:"#111827",fontWeight:500},children:A.location||"N/A"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",borderRadius:"12px",padding:"20px",marginBottom:"16px"},children:[e.jsxs("h3",{style:{fontFamily:'"Lato", sans-serif',fontWeight:700,fontSize:"16px",color:"#374151",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"4px",height:"20px",backgroundColor:"#10b981",borderRadius:"2px"}}),"Product Details"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[A.productImage&&e.jsx("img",{src:Ke(A.productImage),alt:A.productName,style:{width:"64px",height:"64px",borderRadius:"8px",objectFit:"cover",border:"1px solid #e5e7eb"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"16px",fontWeight:600,color:"#111827"},children:A.productName||"N/A"}),e.jsxs("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"14px",color:"#6b7280",marginTop:"4px"},children:["Qty: ",A.quantity||1]})]})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",borderRadius:"12px",padding:"20px"},children:[e.jsxs("h3",{style:{fontFamily:'"Lato", sans-serif',fontWeight:700,fontSize:"16px",color:"#374151",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"4px",height:"20px",backgroundColor:"#f59e0b",borderRadius:"2px"}}),"Order Summary"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontFamily:'"Lato", sans-serif',fontSize:"14px",color:"#6b7280"},children:"Subtotal"}),e.jsx("span",{style:{fontFamily:'"Lato", sans-serif',fontSize:"15px",fontWeight:600,color:"#111827"},children:ks(A.amount||0)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontFamily:'"Lato", sans-serif',fontSize:"14px",color:"#6b7280"},children:"Delivery Charge"}),e.jsx("span",{style:{fontFamily:'"Lato", sans-serif',fontSize:"15px",fontWeight:600,color:"#111827"},children:ks(A.deliveryCharge||0)})]}),e.jsxs("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontFamily:'"Lato", sans-serif',fontSize:"16px",fontWeight:700,color:"#111827"},children:"Total"}),e.jsx("span",{style:{fontFamily:'"Lato", sans-serif',fontSize:"18px",fontWeight:700,color:"#059669"},children:ks((A.amount||0)+(A.deliveryCharge||0))})]})]})]}),(A.paymentMethod||A.transactionId||A.customerPaymentPhone)&&e.jsxs("div",{style:{backgroundColor:"#fffbeb",borderRadius:"12px",padding:"20px",marginTop:"16px",border:"1px solid #fde68a"},children:[e.jsxs("h3",{style:{fontFamily:'"Lato", sans-serif',fontWeight:700,fontSize:"16px",color:"#374151",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"4px",height:"20px",backgroundColor:"#f59e0b",borderRadius:"2px"}}),"Payment Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[A.paymentMethod&&e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"12px",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",marginBottom:"4px"},children:"Payment Method"}),e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"15px",color:"#111827",fontWeight:500},children:A.paymentMethod})]}),A.customerPaymentPhone&&e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"12px",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",marginBottom:"4px"},children:"Payment Number"}),e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"15px",color:"#111827",fontWeight:500},children:A.customerPaymentPhone})]}),A.transactionId&&e.jsxs("div",{style:{gridColumn:"span 2"},children:[e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"12px",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",marginBottom:"4px"},children:"Transaction ID"}),e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"15px",color:"#059669",fontWeight:600,backgroundColor:"#d1fae5",padding:"8px 12px",borderRadius:"8px",display:"inline-block"},children:A.transactionId})]})]})]}),A.courierProvider&&e.jsxs("div",{style:{backgroundColor:"#f9fafb",borderRadius:"12px",padding:"20px",marginTop:"16px"},children:[e.jsxs("h3",{style:{fontFamily:'"Lato", sans-serif',fontWeight:700,fontSize:"16px",color:"#374151",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"4px",height:"20px",backgroundColor:"#8b5cf6",borderRadius:"2px"}}),"Courier Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"12px",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",marginBottom:"4px"},children:"Provider"}),e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"15px",color:"#111827",fontWeight:500},children:A.courierProvider})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"12px",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",marginBottom:"4px"},children:"Tracking ID"}),e.jsx("p",{style:{fontFamily:'"Lato", sans-serif',fontSize:"15px",color:"#111827",fontWeight:500},children:Zs(A)||"N/A"})]})]})]})]}),e.jsxs("div",{style:{padding:"16px 24px",borderTop:"1px solid #e5e5e5",backgroundColor:"#f9fafb",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[e.jsxs("button",{onClick:()=>{ve(A)},style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontFamily:'"Lato", sans-serif',fontWeight:600,fontSize:"14px",color:"#374151"},onMouseEnter:c=>c.currentTarget.style.backgroundColor="#f9fafb",onMouseLeave:c=>c.currentTarget.style.backgroundColor="white",children:[e.jsx(ns,{size:18}),"Print Invoice"]}),e.jsxs("button",{onClick:()=>{d(null),jt(A)},style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",backgroundColor:"#111827",border:"none",borderRadius:"8px",cursor:"pointer",fontFamily:'"Lato", sans-serif',fontWeight:600,fontSize:"14px",color:"white"},onMouseEnter:c=>c.currentTarget.style.backgroundColor="#1f2937",onMouseLeave:c=>c.currentTarget.style.backgroundColor="#111827",children:[e.jsx(Da,{size:18}),"Edit Order"]})]})]})}),ne&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:c=>{c.target===c.currentTarget&&de(!1)},children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg shadow-xl",onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 lg:p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Order"}),e.jsx("button",{onClick:()=>de(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ge,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4 max-h-[60vh] overflow-y-auto",children:[X.length===0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-yellow-800 font-medium",children:"No products available"}),e.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:"Please add products first to create orders."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Customer Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:V.customer,onChange:c=>U(b=>({...b,customer:c.target.value})),placeholder:"Enter customer name",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:V.phone,onChange:c=>U(b=>({...b,phone:c.target.value})),placeholder:"01XXXXXXXXX",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Address"}),e.jsx("input",{type:"text",value:V.address,onChange:c=>U(b=>({...b,address:c.target.value})),placeholder:"Full address",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Division"}),e.jsxs("select",{value:V.division,onChange:c=>U(b=>({...b,division:c.target.value})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",children:[e.jsx("option",{value:"",children:"Select Division"}),e.jsx("option",{value:"Dhaka",children:"Dhaka"}),e.jsx("option",{value:"Chattogram",children:"Chattogram"}),e.jsx("option",{value:"Rajshahi",children:"Rajshahi"}),e.jsx("option",{value:"Khulna",children:"Khulna"}),e.jsx("option",{value:"Barishal",children:"Barishal"}),e.jsx("option",{value:"Sylhet",children:"Sylhet"}),e.jsx("option",{value:"Rangpur",children:"Rangpur"}),e.jsx("option",{value:"Mymensingh",children:"Mymensingh"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Product ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:V.productId,onChange:c=>U(b=>({...b,productId:c.target.value})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",children:[e.jsx("option",{value:"",children:"Select a product"}),X.map((c,b)=>e.jsxs("option",{value:String(c.id),children:[c.name||"Unnamed"," - ৳",(c.price||0).toLocaleString()]},`${c.id}-${b}`))]})]}),oe&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center gap-3",children:[e.jsx("img",{src:oe.image||"/placeholder.png",alt:oe.name||"Product",className:"w-12 h-12 object-cover rounded-lg",onError:c=>{c.target.src="/placeholder.png"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:oe.name||"Unnamed"}),e.jsxs("p",{className:"text-blue-600 font-semibold",children:["৳",(oe.price||0).toLocaleString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",value:V.quantity,onChange:c=>U(b=>({...b,quantity:Math.max(1,parseInt(c.target.value)||1)})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Charge"}),e.jsx("input",{type:"number",min:"0",value:V.deliveryCharge,onChange:c=>U(b=>({...b,deliveryCharge:Math.max(0,parseInt(c.target.value)||0)})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]}),oe&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsxs("span",{className:"font-medium",children:["৳",((oe.price||0)*V.quantity).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Delivery:"}),e.jsxs("span",{className:"font-medium",children:["৳",V.deliveryCharge.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-base font-semibold border-t border-blue-100 pt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total:"}),e.jsxs("span",{className:"text-blue-600",children:["৳",((oe.price||0)*V.quantity+V.deliveryCharge).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-3 sm:p-4 lg:p-6 border-t bg-gray-50 rounded-b-2xl",children:[e.jsx("button",{onClick:()=>de(!1),className:"px-5 py-2.5 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-100 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:st,disabled:pe||X.length===0||!oe,className:"px-5 py-2.5 bg-gradient-to-r from-sky-400 to-blue-500 text-white rounded-lg font-medium hover:from-sky-500 hover:to-blue-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:pe?e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"w-4 h-4"}),"Create Order"]})})]})]})})]})},Jl=Object.freeze(Object.defineProperty({__proto__:null,default:pr},Symbol.toStringTag,{value:"Module"})),Io=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z",stroke:"#7B7B7B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M21 21L16.65 16.65",stroke:"#7B7B7B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Ga=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 7H21",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("path",{d:"M6 12H18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("path",{d:"M10 17H14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),Ya=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M15 3H21V9",stroke:"#070707",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 21H3V15",stroke:"#070707",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M21 3L14 10",stroke:"#070707",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3 21L10 14",stroke:"#070707",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Mo=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 8V16M8 12H16",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z",stroke:"white",strokeWidth:"1.5"})]}),Ja=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"5",r:"1.5",fill:"#1D1A1A"}),e.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"#1D1A1A"}),e.jsx("circle",{cx:"12",cy:"19",r:"1.5",fill:"#1D1A1A"})]}),$o=({products:a=[],categories:t=[],brands:s=[],onAddProduct:r,onEditProduct:l,onDeleteProduct:i,onCloneProduct:p,onBulkDelete:g,onBulkStatusUpdate:u,onBulkFlashSale:f,onBulkDiscount:w,onImport:v,onExport:k,onBulkImport:S})=>{const[F,G]=n.useState(""),[q,$]=n.useState(1),[_,j]=n.useState(new Set),[z,L]=n.useState(null),[T,I]=n.useState("list"),[E,W]=n.useState(!1),[C,A]=n.useState(10),[d,Z]=n.useState(!1),[D,ne]=n.useState(0),[de,pe]=n.useState("all"),[K,V]=n.useState("all"),[U,ee]=n.useState("all"),[X,oe]=n.useState(!1),[M,re]=n.useState(!1),[be,me]=n.useState(!1),[Oe,Le]=n.useState(!1);n.useRef(null);const fe=n.useRef(null),We=n.useCallback(()=>{if(a.length===0){Q.error("No products to export");return}const x=a.map(ce=>({id:ce.id,name:ce.name,price:ce.price,originalPrice:ce.originalPrice||"",sku:ce.sku||"",stock:ce.stock||0,category:ce.category||"",subCategory:ce.subCategory||"",brand:ce.brand||"",status:ce.status||"Active",tags:Array.isArray(ce.tags)?ce.tags.join(", "):"",galleryImages:Array.isArray(ce.galleryImages)?ce.galleryImages.join(";"):"",description:ce.description||""})),H=Ea.unparse(x),Y=new Blob([H],{type:"text/csv;charset=utf-8;"}),ve=URL.createObjectURL(Y),Ne=document.createElement("a");Ne.href=ve,Ne.setAttribute("download",`products_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),Q.success(`Exported ${a.length} products`)},[a]),Pe=n.useCallback(()=>Date.now()+Math.floor(Math.random()*1e4),[]),ke=x=>["Product Name(English)","*Product Name(English)","Product Images1","*Product Images1","Main Description"].some(Y=>x.some(ve=>ve.includes(Y.replace("*","")))),m=(x,H)=>{let Y=Pe();for(;H.has(Y);)Y=Pe();H.add(Y);const ve=["Product Images1","*Product Images1","Product Images2","Product Images3","Product Images4","Product Images5","Product Images6","Product Images7","Product Images8","White Background Image"],Ne=[];ve.forEach(st=>{const bt=x[st];bt&&typeof bt=="string"&&bt.trim()&&Ne.push(bt.trim())});const ce=x["*Product Name(English)"]||x["Product Name(English)"]||x["*Product Name"]||x["Product Name"]||"",Ge=x["Product Name(Bengali)"]||"",Fe=x["Main Description"]||x.Description||"",Re=x.Highlights||"";let Ve=Fe;Ge&&(Ve=`<p><strong>Bengali:</strong> ${Ge}</p>${Ve}`),Re&&Re.trim()&&(Ve=`${Ve}<div class="highlights"><h4>Highlights</h4>${Re}</div>`);const Xe=x.Warranty||"",et=x["Warranty Type"]||"",Ye=x["Warranty Policy"]||"";if(Xe||et||Ye){const st=[Xe,et,Ye].filter(Boolean).join(" - ");Ve=`${Ve}<p><strong>Warranty:</strong> ${st}</p>`}const tt=ce.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").substring(0,100);return{id:Y,name:ce||"Unnamed Product",price:parseFloat(x.Price||x["*Price"]||x["Sale Price"]||"0")||0,originalPrice:parseFloat(x["Original Price"]||x["Regular Price"]||"0")||0,costPrice:0,image:Ne[0]||"",galleryImages:Ne,description:Ve,category:x.Category||x["*Category"]||"",subCategory:x["Sub Category"]||"",childCategory:x["Child Category"]||"",brand:x.Brand||x["*Brand"]||"",sku:x.SKU||x["Product ID"]||`SKU-${Y}`,stock:parseInt(x.Stock||x.Quantity||"0")||0,status:"Active",tags:[],slug:tt||`product-${Y}`}},N=(x,H)=>{let Y=Pe();for(;H.has(Y);)Y=Pe();return H.add(Y),{id:Y,name:x.name||x.Name||x.product_name||"Unnamed Product",price:parseFloat(x.price||x.Price||x.salesPrice||x.sales_price||"0")||0,originalPrice:parseFloat(x.originalPrice||x.original_price||x.regularPrice||x.regular_price||"0")||0,costPrice:parseFloat(x.costPrice||x.cost_price||"0")||0,image:x.image||x.Image||x.mainImage||x.main_image||"",galleryImages:(x.galleryImages||x.gallery_images||"").split(",").filter(Boolean).map(ve=>ve.trim()),description:x.description||x.Description||"",category:x.category||x.Category||"",subCategory:x.subCategory||x.sub_category||"",childCategory:x.childCategory||x.child_category||"",brand:x.brand||x.Brand||"",sku:x.sku||x.SKU||`SKU-${Y}`,stock:parseInt(x.stock||x.Stock||x.quantity||x.Quantity||"0")||0,status:x.status||x.Status||"Active",tags:(x.tags||x.Tags||"").split(",").filter(Boolean).map(ve=>ve.trim()),slug:x.slug||x.Slug||(x.name||x.Name||"").toLowerCase().replace(/\s+/g,"-")}},O=n.useCallback((x,H)=>{try{const Y=new Set(a.map(ce=>ce.id)),ve=ke(H);ve&&console.log("Detected Daraz/Lazada format, using specialized parser");const Ne=x.map(ce=>ve?m(ce,Y):N(ce,Y)).filter(ce=>ce.name!=="Unnamed Product"||ce.price>0||ce.image);if(Ne.length===0){Q.error("No valid products found in file");return}S?(S(Ne),Q.success(`Imported ${Ne.length} products successfully! (${ve?"Daraz format":"Standard format"})`)):(Q.success(`Parsed ${Ne.length} products. Connect onBulkImport handler to save.`),console.log("Import ready:",Ne))}catch(Y){console.error("Error processing file:",Y),Q.error("Failed to process file data")}},[a,S]),B=n.useCallback(x=>{const H=x.target.files?.[0];if(!H)return;if(v){v(),fe.current&&(fe.current.value="");return}const Y=H.name.toLowerCase(),ve=Y.endsWith(".xlsx")||Y.endsWith(".xls"),Ne=Y.endsWith(".tsv");if(ve){const ce=new FileReader;ce.onload=Ge=>{try{const Fe=Ge.target?.result,Re=Rn(Fe,{type:"array"}),Ve=Re.SheetNames[0],Xe=Re.Sheets[Ve],et=Bn.sheet_to_json(Xe,{defval:""}),Ye=Object.keys(et[0]||{});O(et,Ye)}catch(Fe){console.error("Error parsing Excel file:",Fe),Q.error("Failed to parse Excel file")}},ce.onerror=()=>{Q.error("Failed to read Excel file")},ce.readAsArrayBuffer(H)}else Ea.parse(H,{header:!0,skipEmptyLines:!0,delimiter:Ne?"	":void 0,complete:ce=>{const Ge=ce.meta.fields||[];O(ce.data,Ge)},error:ce=>{Q.error("Failed to parse file"),console.error("File parse error:",ce)}});fe.current&&(fe.current.value="")},[v,O]);n.useEffect(()=>{const x=H=>{H.target.closest("[data-dropdown]")||(L(null),oe(!1),re(!1),me(!1),Le(!1))};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const te=n.useMemo(()=>{let x=a;if(F.trim()){const H=F.toLowerCase();x=x.filter(Y=>Y.name?.toLowerCase().includes(H)||Y.sku?.toLowerCase().includes(H)||Y.category?.toLowerCase().includes(H))}return de!=="all"&&(x=x.filter(H=>H.category===de)),K!=="all"&&(x=x.filter(H=>H.brand===K)),U!=="all"&&(x=x.filter(H=>H.status===U)),x},[a,F,de,K,U]),ae=Math.ceil(te.length/C),le=n.useMemo(()=>{const x=(q-1)*C;return te.slice(x,x+C)},[te,q,C]);n.useEffect(()=>{$(1)},[F,de,K,U]);const ie=n.useCallback((x,H)=>x._id||`${x.id}-${H}`,[]),Je=n.useCallback(()=>{if(_.size===le.length)j(new Set);else{const x=le.map((H,Y)=>ie(H,Y));j(new Set(x))}},[_.size,le,ie]),Ie=n.useCallback(x=>{j(H=>{const Y=new Set(H);return Y.has(x)?Y.delete(x):Y.add(x),Y})},[]),ye=n.useCallback(()=>le.filter((x,H)=>_.has(ie(x,H))).map(x=>x.id),[le,_,ie]);n.useCallback(()=>{if(_.size===0){Q.error("Select products to print");return}Q.success(`Printing ${_.size} products`)},[_.size]);const P=n.useCallback(()=>{const x=ye();if(x.length===0){Q.error("Select products to delete");return}g?g(x):Q.success(`Deleted ${x.length} products`),j(new Set)},[ye,g]),se=n.useCallback(()=>{const x=ye();if(x.length===0){Q.error("Select products to publish");return}u?u(x,"Active"):Q.success(`Published ${x.length} products`),j(new Set)},[ye,u]),xe=n.useCallback(()=>{const x=ye();if(x.length===0){Q.error("Select products to draft");return}u?u(x,"Draft"):Q.success(`Moved ${x.length} products to draft`),j(new Set)},[ye,u]),Ze=n.useCallback(x=>{const H=ye();if(H.length===0){Q.error("Select products first");return}f?f(H,x):Q.success(x==="add"?`Added ${H.length} products to Flash Sale`:`Removed ${H.length} products from Flash Sale`),j(new Set)},[ye,f]),jt=n.useCallback(()=>{const x=ye();if(x.length===0){Q.error("Select products first");return}if(D<=0){Q.error("Enter a valid discount percentage");return}w?w(x,D):Q.success(`Applied ${D}% discount to ${x.length} products`),Z(!1),ne(0),j(new Set)},[ye,D,w]),Ue=()=>{const x=[];if(ae<=7)for(let H=1;H<=ae;H++)x.push(H);else{x.push(1),q>3&&x.push("...");for(let H=Math.max(2,q-1);H<=Math.min(ae-1,q+1);H++)x.push(H);q<ae-2&&x.push("..."),x.push(ae)}return x},Ee=n.useMemo(()=>{const x=new Set(a.map(H=>H.category).filter(Boolean));return Array.from(x)},[a]),je=n.useMemo(()=>{const x=new Set(a.map(H=>H.brand).filter(Boolean));return Array.from(x)},[a]);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl mx-1 xxs:mx-2 sm:mx-4 md:mx-6 p-2 xxs:p-3 sm:p-6 shadow-sm font-['Poppins']",children:[e.jsx("input",{type:"file",ref:fe,onChange:B,accept:".csv,.tsv,.xlsx,.xls",className:"hidden"}),e.jsxs("div",{className:"flex flex-col gap-3 xxs:gap-4 mb-4 xxs:mb-5",children:[e.jsx("h1",{className:"text-base xxs:text-lg sm:text-xl lg:text-[22px] font-bold text-[#023337] dark:text-white tracking-[0.11px] font-['Lato']",children:"Products"}),e.jsxs("div",{className:"flex flex-col xxs:flex-row flex-wrap items-stretch xxs:items-center gap-2 xxs:gap-3 sm:gap-4 lg:gap-6 w-full lg:w-auto",children:[e.jsxs("div",{className:"bg-[#f9f9f9] dark:bg-gray-700 h-[32px] xxs:h-[34px] rounded-lg flex items-center px-2 w-full xxs:w-auto xxs:flex-1 sm:w-[200px] md:w-[292px] sm:flex-none",children:[e.jsx(Io,{}),e.jsx("input",{type:"text",placeholder:"Search products...",value:F,onChange:x=>G(x.target.value),className:"bg-transparent text-[11px] xxs:text-[12px] text-[#7b7b7b] dark:text-gray-400 ml-2 flex-1 outline-none min-w-0"})]}),e.jsxs("button",{className:"hidden xs:flex bg-[#f9f9f9] dark:bg-gray-700 h-[34px] rounded-lg items-center gap-2 px-3 sm:px-4",children:[e.jsx(Ga,{}),e.jsx("span",{className:"text-[12px] text-black dark:text-white",children:"Deep Search"})]}),e.jsxs("div",{className:"relative","data-dropdown":!0,children:[e.jsxs("button",{onClick:()=>W(!E),className:"border border-[#ff6a00] h-[36px] xxs:h-[40px] sm:h-[48px] rounded-lg flex items-center justify-between px-2 xxs:px-3 min-w-0 xxs:min-w-[100px] sm:min-w-[140px] w-full xxs:w-auto",children:[e.jsxs("div",{className:"flex flex-col gap-0 xxs:gap-0.5 items-start overflow-hidden",children:[e.jsx("span",{className:"text-[10px] xxs:text-[11px] font-medium text-[#070707] dark:text-white tracking-[-0.24px]",children:"View"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ya,{}),e.jsx("span",{className:"text-[11px] xxs:text-[13px] text-[#070707] dark:text-white tracking-[-0.3px] truncate",children:T==="large"?"Large":T==="small"?"Small":"List"})]})]}),e.jsx(_e,{size:14,className:"text-gray-600 dark:text-gray-400 flex-shrink-0 ml-1"})]}),E&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-600 z-50 py-1 w-[140px] xxs:w-[155px]",children:[e.jsxs("button",{onClick:()=>{I("large"),W(!1)},className:`w-full px-2 xxs:px-3 py-2 text-left text-[12px] xxs:text-[13px] hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 ${T==="large"?"bg-orange-50 text-[#ff6a00]":"dark:text-gray-200"}`,children:[e.jsx(Ya,{}),"Large icons"]}),e.jsxs("button",{onClick:()=>{I("small"),W(!1)},className:`w-full px-2 xxs:px-3 py-2 text-left text-[12px] xxs:text-[13px] hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 ${T==="small"?"bg-orange-50 text-[#ff6a00]":"dark:text-gray-200"}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"})]}),"Small icons"]}),e.jsxs("button",{onClick:()=>{I("list"),W(!1)},className:`w-full px-2 xxs:px-3 py-2 text-left text-[12px] xxs:text-[13px] hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 ${T==="list"?"bg-orange-50 text-[#ff6a00]":"dark:text-gray-200"}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),e.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),"List view"]})]})]}),e.jsxs("button",{onClick:r,className:"bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] h-[36px] xxs:h-[40px] sm:h-[48px] rounded-lg flex items-center justify-center gap-1 px-3 sm:px-4 w-full xxs:w-auto",children:[e.jsx(Mo,{}),e.jsx("span",{className:"text-[13px] xxs:text-[15px] font-bold text-white tracking-[-0.3px] font-['Lato']",children:"Add Product"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 xxs:gap-4 mb-4 xxs:mb-5",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 xxs:gap-3 sm:gap-4",children:[e.jsxs("button",{onClick:()=>fe.current?.click(),className:"flex items-center gap-1 text-[11px] xxs:text-[12px] text-[#161719] dark:text-gray-300 hover:text-[#ff6a00] transition-colors",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"xxs:w-5 xxs:h-5",children:[e.jsx("path",{d:"M14.1667 17.5C13.6611 17.0085 11.6667 15.7002 11.6667 15C11.6667 14.2997 13.6611 12.9915 14.1667 12.5M12.5001 15H18.3334",stroke:"#FF5500",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10.0001 17.5C6.07171 17.5 4.10752 17.5 2.88714 16.2796C1.66675 15.0592 1.66675 13.095 1.66675 9.16667V6.62023C1.66675 5.1065 1.66675 4.34963 1.98368 3.78172C2.2096 3.37689 2.54364 3.04285 2.94846 2.81693C3.51638 2.5 4.27325 2.5 5.78697 2.5C6.75676 2.5 7.24166 2.5 7.66613 2.65917C8.63525 3.0226 9.03491 3.90298 9.47225 4.77761L10.0001 5.83333M6.66675 5.83333H13.9584C15.714 5.83333 16.5917 5.83333 17.2223 6.25466C17.4953 6.43706 17.7297 6.67143 17.9121 6.94441C18.3164 7.54952 18.3327 8.38233 18.3334 10V11.6667",stroke:"#FF5500",strokeWidth:"1.25",strokeLinecap:"round"})]}),"Import"]}),e.jsxs("button",{onClick:We,className:"flex items-center gap-1 text-[11px] xxs:text-[12px] text-[#161719] dark:text-gray-300 hover:text-[#ff6a00] transition-colors",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"xxs:w-5 xxs:h-5",children:[e.jsx("path",{d:"M15.8334 17.5C16.3391 17.0085 18.3334 15.7002 18.3334 15C18.3334 14.2997 16.3391 12.9915 15.8334 12.5M17.5001 15H11.6667",stroke:"#FF5500",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10.0001 17.5C6.07171 17.5 4.10752 17.5 2.88714 16.2796C1.66675 15.0592 1.66675 13.095 1.66675 9.16667V6.62023C1.66675 5.1065 1.66675 4.34963 1.98368 3.78172C2.2096 3.37689 2.54364 3.04285 2.94846 2.81693C3.51638 2.5 4.27325 2.5 5.78697 2.5C6.75676 2.5 7.24166 2.5 7.66613 2.65917C8.63525 3.0226 9.03491 3.90298 9.47225 4.77761L10.0001 5.83333M6.66675 5.83333H13.9584C15.714 5.83333 16.5917 5.83333 17.2223 6.25466C17.4953 6.43706 17.7297 6.67143 17.9121 6.94441C18.3164 7.54952 18.3327 8.38233 18.3334 10V10.8333",stroke:"#FF5500",strokeWidth:"1.25",strokeLinecap:"round"})]}),"Export"]}),e.jsxs("div",{className:"relative","data-dropdown":!0,children:[e.jsxs("button",{onClick:()=>Le(!Oe),className:"bg-[#f9f9f9] dark:bg-gray-700 rounded-lg flex items-center justify-between gap-1 xxs:gap-2 px-2 xxs:px-3 py-1.5 xxs:py-2 w-auto",children:[e.jsx("span",{className:"text-[11px] xxs:text-[12px] text-black dark:text-white",children:C}),e.jsx(_e,{size:12,className:"text-gray-600 dark:text-gray-400 xxs:w-[14px] xxs:h-[14px]"})]}),Oe&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-600 z-50 py-1 w-[80px] xxs:w-[100px]",children:[10,20,50,100].map(x=>e.jsx("button",{onClick:()=>{A(x),Le(!1)},className:"w-full px-2 xxs:px-3 py-1.5 xxs:py-2 text-left text-[11px] xxs:text-[12px] hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-200",children:x},x))})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 xxs:gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 xxs:gap-2",children:[e.jsx(Ga,{}),e.jsx("span",{className:"text-[11px] xxs:text-[12px] text-black dark:text-white",children:"Filter:"})]}),e.jsxs("div",{className:"relative","data-dropdown":!0,children:[e.jsxs("button",{onClick:()=>oe(!X),className:"bg-[#f9f9f9] dark:bg-gray-700 rounded-lg flex items-center justify-between gap-1 xxs:gap-2 px-2 xxs:px-3 py-1.5 xxs:py-2 min-w-0 max-w-[100px] xxs:max-w-[119px]",children:[e.jsx("span",{className:"text-[11px] xxs:text-[12px] text-black dark:text-white truncate",children:de==="all"?"All":de}),e.jsx(_e,{size:12,className:"text-gray-600 dark:text-gray-400 flex-shrink-0 xxs:w-[14px] xxs:h-[14px]"})]}),X&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-600 z-50 py-1 w-[130px] xxs:w-[150px] max-h-[200px] overflow-y-auto",children:[e.jsx("button",{onClick:()=>{pe("all"),oe(!1)},className:"w-full px-2 xxs:px-3 py-1.5 xxs:py-2 text-left text-[11px] xxs:text-[12px] hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-200",children:"All Category"}),Ee.map(x=>e.jsx("button",{onClick:()=>{pe(x),oe(!1)},className:"w-full px-2 xxs:px-3 py-1.5 xxs:py-2 text-left text-[11px] xxs:text-[12px] hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-200 truncate",children:x},x))]})]}),e.jsxs("div",{className:"relative","data-dropdown":!0,children:[e.jsxs("button",{onClick:()=>re(!M),className:"bg-[#f9f9f9] dark:bg-gray-700 rounded-lg flex items-center justify-between gap-1 xxs:gap-2 px-2 xxs:px-3 py-1.5 xxs:py-2 min-w-0 max-w-[90px] xxs:max-w-[110px]",children:[e.jsx("span",{className:"text-[11px] xxs:text-[12px] text-black dark:text-white truncate",children:K==="all"?"All":K}),e.jsx(_e,{size:12,className:"text-gray-600 dark:text-gray-400 flex-shrink-0 xxs:w-[14px] xxs:h-[14px]"})]}),M&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-600 z-50 py-1 w-[130px] xxs:w-[150px] max-h-[200px] overflow-y-auto",children:[e.jsx("button",{onClick:()=>{V("all"),re(!1)},className:"w-full px-2 xxs:px-3 py-1.5 xxs:py-2 text-left text-[11px] xxs:text-[12px] hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-200",children:"All Brands"}),je.map(x=>e.jsx("button",{onClick:()=>{V(x),re(!1)},className:"w-full px-2 xxs:px-3 py-1.5 xxs:py-2 text-left text-[11px] xxs:text-[12px] hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-200 truncate",children:x},x))]})]}),e.jsxs("div",{className:"relative","data-dropdown":!0,children:[e.jsxs("button",{onClick:()=>me(!be),className:"bg-[#f9f9f9] dark:bg-gray-700 rounded-lg flex items-center justify-between gap-1 xxs:gap-2 px-2 xxs:px-3 py-1.5 xxs:py-2 min-w-0",children:[e.jsx("span",{className:"text-[11px] xxs:text-[12px] text-black dark:text-white",children:U==="all"?"All":U}),e.jsx(_e,{size:12,className:"text-gray-600 dark:text-gray-400 xxs:w-[14px] xxs:h-[14px]"})]}),be&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-600 z-50 py-1 w-[100px] xxs:w-[120px]",children:[e.jsx("button",{onClick:()=>{ee("all"),me(!1)},className:"w-full px-2 xxs:px-3 py-1.5 xxs:py-2 text-left text-[11px] xxs:text-[12px] hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-200",children:"All Status"}),e.jsx("button",{onClick:()=>{ee("Active"),me(!1)},className:"w-full px-2 xxs:px-3 py-1.5 xxs:py-2 text-left text-[11px] xxs:text-[12px] hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-200",children:"Publish"}),e.jsx("button",{onClick:()=>{ee("Draft"),me(!1)},className:"w-full px-2 xxs:px-3 py-1.5 xxs:py-2 text-left text-[11px] xxs:text-[12px] hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-200",children:"Draft"})]})]})]})]}),_.size>0&&e.jsxs("div",{className:"bg-gradient-to-r from-[#ff6a00] to-[#ff9500] rounded-xl p-2 xxs:p-3 sm:p-4 mb-4 xxs:mb-5 flex flex-col xxs:flex-row flex-wrap items-start xxs:items-center justify-between gap-2 xxs:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 xxs:gap-3",children:[e.jsxs("span",{className:"text-white font-semibold text-xs xxs:text-sm",children:[_.size," selected"]}),e.jsx("button",{onClick:()=>j(new Set),className:"text-white/80 hover:text-white text-xs xxs:text-sm underline",children:"Clear"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1 xxs:gap-2",children:[e.jsxs("button",{onClick:se,className:"bg-white text-green-600 px-2 xxs:px-3 sm:px-4 py-1.5 xxs:py-2 rounded-lg text-xs xxs:text-sm font-medium hover:bg-green-50 transition-colors flex items-center gap-1 xxs:gap-2",children:[e.jsx(qs,{size:14,className:"xxs:w-4 xxs:h-4"}),e.jsx("span",{className:"hidden xxs:inline",children:"Publish"})]}),e.jsxs("button",{onClick:xe,className:"bg-white text-gray-600 px-2 xxs:px-3 sm:px-4 py-1.5 xxs:py-2 rounded-lg text-xs xxs:text-sm font-medium hover:bg-gray-50 transition-colors flex items-center gap-1 xxs:gap-2",children:[e.jsx(As,{size:14,className:"xxs:w-4 xxs:h-4"}),e.jsx("span",{className:"hidden xxs:inline",children:"Draft"})]}),e.jsxs("button",{onClick:()=>Ze("add"),className:"bg-white text-orange-600 px-2 xxs:px-3 sm:px-4 py-1.5 xxs:py-2 rounded-lg text-xs xxs:text-sm font-medium hover:bg-orange-50 transition-colors flex items-center gap-1 xxs:gap-2",children:["⚡ ",e.jsx("span",{className:"hidden xs:inline",children:"Flash Sale"})]}),e.jsx("button",{onClick:()=>Ze("remove"),className:"hidden sm:flex bg-white text-yellow-600 px-2 xxs:px-3 sm:px-4 py-1.5 xxs:py-2 rounded-lg text-xs xxs:text-sm font-medium hover:bg-yellow-50 transition-colors items-center gap-1 xxs:gap-2",children:"⚡ Remove"}),e.jsx("button",{onClick:()=>Z(!0),className:"bg-white text-purple-600 px-2 xxs:px-3 sm:px-4 py-1.5 xxs:py-2 rounded-lg text-xs xxs:text-sm font-medium hover:bg-purple-50 transition-colors flex items-center gap-1 xxs:gap-2",children:"%"}),e.jsx("button",{onClick:P,className:"bg-white text-red-600 px-2 xxs:px-3 sm:px-4 py-1.5 xxs:py-2 rounded-lg text-xs xxs:text-sm font-medium hover:bg-red-50 transition-colors flex items-center gap-1 xxs:gap-2",children:e.jsx(lt,{size:14,className:"xxs:w-4 xxs:h-4"})})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 xxs:p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-3 xxs:p-4 sm:p-6 w-full max-w-[350px] xxs:max-w-[400px] shadow-2xl",children:[e.jsx("h3",{className:"text-base xxs:text-lg font-semibold mb-3 xxs:mb-4 dark:text-white",children:"Apply Discount"}),e.jsxs("p",{className:"text-xs xxs:text-sm text-gray-600 dark:text-gray-400 mb-3 xxs:mb-4",children:["Apply discount to ",_.size," selected product",_.size>1?"s":""]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3 xxs:mb-4",children:[e.jsx("input",{type:"number",value:D,onChange:x=>ne(Number(x.target.value)),placeholder:"Enter discount %",className:"flex-1 h-9 xxs:h-10 border dark:border-gray-600 rounded-lg px-2 xxs:px-3 text-xs xxs:text-sm outline-none focus:border-[#ff6a00] bg-white dark:bg-gray-700 dark:text-white",min:"0",max:"100"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"%"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{Z(!1),ne(0)},className:"px-3 xxs:px-4 py-1.5 xxs:py-2 text-xs xxs:text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:jt,className:"px-3 xxs:px-4 py-1.5 xxs:py-2 text-xs xxs:text-sm bg-[#ff6a00] text-white rounded-lg hover:bg-[#e55d00]",children:"Apply"})]})]})}),T==="large"&&e.jsx("div",{className:"grid grid-cols-1 xxs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 xxs:gap-3 sm:gap-4",children:le.length>0?le.map((x,H)=>{const Y=ie(x,H);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl p-2 xxs:p-3 sm:p-4 hover:shadow-lg transition-shadow relative group",children:[e.jsx("div",{className:"absolute top-2 xxs:top-3 left-2 xxs:left-3 z-10",children:e.jsx("input",{type:"checkbox",checked:_.has(Y),onChange:()=>Ie(Y),className:"w-4 h-4 xxs:w-5 xxs:h-5 rounded border-gray-300"})}),e.jsxs("div",{className:"absolute top-2 xxs:top-3 right-2 xxs:right-3 z-10","data-dropdown":!0,children:[e.jsx("button",{onClick:()=>L(z===Y?null:Y),className:"p-1 xxs:p-1.5 bg-white/80 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-full transition-colors",children:e.jsx(Ja,{})}),z===Y&&e.jsx("div",{className:"absolute right-0 top-[calc(100%+4px)] z-[9999]",children:e.jsxs("div",{className:"w-[140px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border dark:border-gray-600 overflow-hidden py-1",children:[e.jsxs("button",{onClick:()=>{l?.(x),L(null)},className:"flex items-center gap-2 w-full px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx(As,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>{p?.(x),L(null)},className:"flex items-center gap-2 w-full px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx(ga,{size:14})," Duplicate"]}),e.jsxs("button",{onClick:()=>{window.open(`/product/${x.slug||x.id}`,"_blank"),L(null)},className:"flex items-center gap-2 w-full px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx(qs,{size:14})," View"]}),e.jsxs("button",{onClick:()=>{i?.(x.id),L(null)},className:"flex items-center gap-2 w-full px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm text-red-600",children:[e.jsx(lt,{size:14})," Delete"]})]})}),"&rbrace;"]}),e.jsx("div",{className:"w-full aspect-square rounded-lg overflow-hidden bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] mb-3",children:x.image?e.jsx("img",{src:Ke(x.image),alt:x.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-xs xxs:text-sm",children:"No Image"})}),e.jsx("h3",{className:"text-[11px] xxs:text-xs sm:text-[14px] font-medium text-gray-900 dark:text-white line-clamp-2 mb-1 sm:mb-2",children:x.name}),e.jsx("p",{className:"text-[11px] xxs:text-[13px] text-gray-500 dark:text-gray-400 mb-1 xxs:mb-2",children:x.category||"Uncategorized"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-[13px] xxs:text-[15px] font-bold text-[#1e90ff]",children:["৳",x.price]}),e.jsx("span",{className:`px-1.5 xxs:px-2 py-0.5 rounded-full text-[9px] xxs:text-[11px] font-medium ${x.status==="Active"?"bg-[#c1ffbc] text-[#085e00]":"bg-orange-100 text-orange-700"}`,children:x.status==="Active"?"Publish":"Draft"})]}),x.sku&&e.jsxs("p",{className:"text-[10px] xxs:text-[11px] text-gray-400 dark:text-gray-500 mt-1 xxs:mt-2",children:["SKU: ",x.sku]})]},Y)}):e.jsx("div",{className:"col-span-full py-8 xxs:py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-12 h-12 xxs:w-16 xxs:h-16 rounded-full bg-gray-100 dark:bg-gray-600 flex items-center justify-center mb-2 xxs:mb-3",children:e.jsx(it,{size:20,className:"text-gray-400 dark:text-gray-500 xxs:w-6 xxs:h-6"})}),e.jsx("p",{className:"font-medium text-sm xxs:text-base",children:"No products found"}),e.jsx("p",{className:"text-xs xxs:text-sm",children:"Try adjusting your search or filters"})]})})}),T==="small"&&e.jsx("div",{className:"grid grid-cols-2 xxs:grid-cols-3 md:grid-cols-5 lg:grid-cols-6 gap-2 xxs:gap-3",children:le.length>0?le.map((x,H)=>{const Y=ie(x,H);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-1.5 xxs:p-2 hover:shadow-md transition-shadow relative group",children:[e.jsx("div",{className:"absolute top-1 left-1 z-10",children:e.jsx("input",{type:"checkbox",checked:_.has(Y),onChange:()=>Ie(Y),className:"w-3 h-3 xxs:w-4 xxs:h-4 rounded border-gray-300"})}),e.jsx("div",{className:"w-full aspect-square rounded overflow-hidden bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] mb-1.5 xxs:mb-2 cursor-pointer",onClick:()=>l?.(x),children:x.image?e.jsx("img",{src:Ke(x.image),alt:x.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-[10px] xxs:text-xs",children:"No Img"})}),e.jsx("h3",{className:"text-[10px] xxs:text-[11px] font-medium text-gray-900 dark:text-white line-clamp-1",children:x.name}),e.jsxs("div",{className:"flex items-center justify-between mt-0.5 xxs:mt-1",children:[e.jsxs("span",{className:"text-[11px] xxs:text-[12px] font-bold text-[#1e90ff]",children:["৳",x.price]}),e.jsx("span",{className:`w-1.5 h-1.5 xxs:w-2 xxs:h-2 rounded-full ${x.status==="Active"?"bg-green-500":"bg-orange-400"}`,title:x.status==="Active"?"Published":"Draft"})]})]},Y)}):e.jsx("div",{className:"col-span-full py-8 xxs:py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-12 h-12 xxs:w-16 xxs:h-16 rounded-full bg-gray-100 dark:bg-gray-600 flex items-center justify-center mb-2 xxs:mb-3",children:e.jsx(it,{size:20,className:"text-gray-400 dark:text-gray-500 xxs:w-6 xxs:h-6"})}),e.jsx("p",{className:"font-medium text-sm xxs:text-base",children:"No products found"}),e.jsx("p",{className:"text-xs xxs:text-sm",children:"Try adjusting your search or filters"})]})})}),T==="list"&&e.jsx("div",{className:"overflow-x-auto min-h-[200px] -mx-2 xxs:-mx-3 sm:mx-0 px-2 xxs:px-3 sm:px-0",children:e.jsxs("table",{className:"w-full text-xs xxs:text-sm overflow-visible min-w-[600px] xxs:min-w-[700px] sm:min-w-[900px]",children:[e.jsx("thead",{className:"bg-[#E0F2FE] dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 xxs:px-3 sm:px-4 py-2 xxs:py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:_.size===le.length&&le.length>0,onChange:Je,className:"w-4 h-4 xxs:w-5 xxs:h-5 rounded border-[1.5px] border-[#050605] bg-white dark:bg-gray-600"})}),e.jsx("th",{className:"px-2 xxs:px-3 sm:px-4 py-2 xxs:py-3 text-left font-medium text-black dark:text-white text-[12px] xxs:text-[14px] sm:text-[16px]",children:"SL"}),e.jsx("th",{className:"px-2 xxs:px-3 sm:px-4 py-2 xxs:py-3 text-left font-medium text-black dark:text-white text-[12px] xxs:text-[14px] sm:text-[16px]",children:"Image"}),e.jsx("th",{className:"px-2 xxs:px-3 sm:px-4 py-2 xxs:py-3 text-left font-medium text-black dark:text-white text-[12px] xxs:text-[14px] sm:text-[16px]",children:"Name"}),e.jsx("th",{className:"px-2 xxs:px-3 sm:px-4 py-2 xxs:py-3 text-left font-medium text-black dark:text-white text-[12px] xxs:text-[14px] sm:text-[16px]",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-black dark:text-white text-[16px]",children:"Sub Category"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-black dark:text-white text-[16px]",children:"Priority"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-black dark:text-white text-[16px]",children:"SKU"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-black dark:text-white text-[16px]",children:"Tags"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-black dark:text-white text-[16px]",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-black dark:text-white text-[16px]",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-[#b9b9b9]/50 dark:divide-gray-700 overflow-visible",children:le.length>0?le.map((x,H)=>{const Y=ie(x,H);return e.jsxs("tr",{className:"h-[68px] hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:_.has(Y),onChange:()=>Ie(Y),className:"w-5 h-5 rounded border-[1.5px] border-[#eaf8e7] bg-white dark:bg-gray-600"})}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] dark:text-gray-200 text-center",children:(q-1)*C+H+1}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden bg-gradient-to-r from-[#38bdf8] to-[#1e90ff]",children:x.image?e.jsx("img",{src:Ke(x.image),alt:x.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-xs",children:"No img"})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] dark:text-gray-200 max-w-[200px] line-clamp-2",children:x.name})}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] dark:text-gray-200",children:x.category||"-"}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] dark:text-gray-200",children:x.subCategory||"-"}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] dark:text-gray-200",children:x.rating?`${Math.round(x.rating*10)}%`:"-"}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] dark:text-gray-200",children:x.sku||"-"}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] dark:text-gray-200",children:x.tag||(Array.isArray(x.tags)?x.tags.join(", "):"")||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-[9px] py-0.5 rounded-[30px] text-[12px] font-medium ${x.status==="Active"?"bg-[#c1ffbc] text-[#085e00]":"bg-orange-100 text-orange-700"}`,children:x.status==="Active"?"Publish":"Draft"})}),e.jsx("td",{className:"px-4 py-3 text-center relative",children:e.jsxs("div",{"data-dropdown":!0,children:[e.jsx("button",{onClick:()=>L(z===Y?null:Y),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",children:e.jsx(Ja,{})}),z===Y&&e.jsx("div",{className:"absolute right-4 top-[calc(100%+4px)] z-[9999]",children:e.jsxs("div",{className:"w-[160px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-600 overflow-hidden py-2",children:[e.jsxs("button",{onClick:()=>{l?.(x),L(null)},className:"flex items-center gap-3 w-full h-10 px-4 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(As,{size:16}),"Edit"]}),e.jsxs("button",{onClick:()=>{p?.(x),L(null)},className:"flex items-center gap-3 w-full h-10 px-4 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(ga,{size:16}),"Duplicate"]}),e.jsxs("button",{onClick:()=>{window.open(`/product/${x.slug||x.id}`,"_blank"),L(null)},className:"flex items-center gap-3 w-full h-10 px-4 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(qs,{size:16}),"View"]}),e.jsx("div",{className:"my-1 border-t border-gray-100 dark:border-gray-700"}),e.jsxs("button",{onClick:()=>{i?.(x.id),L(null)},className:"flex items-center gap-3 w-full h-10 px-4 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium text-red-600",children:[e.jsx(lt,{size:16}),"Delete"]})]})})]})})]},Y)}):e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"px-4 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-600 flex items-center justify-center mb-3",children:e.jsx(it,{size:24,className:"text-gray-400 dark:text-gray-500"})}),e.jsx("p",{className:"font-medium",children:"No products found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})})})})]})}),te.length>0&&e.jsx("div",{className:"flex flex-col items-center mt-6 pt-4 gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>$(x=>Math.max(1,x-1)),disabled:q===1,className:"w-9 h-9 flex items-center justify-center border dark:border-gray-600 rounded-lg disabled:opacity-50 hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-300",children:e.jsx($s,{size:16})}),Ue().map((x,H)=>e.jsx("button",{onClick:()=>typeof x=="number"&&$(x),disabled:x==="...",className:`w-9 h-9 flex items-center justify-center rounded-lg text-sm font-medium transition-colors ${q===x?"bg-[#38bdf8] text-white":x==="..."?"cursor-default dark:text-gray-400":"border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-300"}`,children:x},H)),e.jsx("button",{onClick:()=>$(x=>Math.min(ae,x+1)),disabled:q===ae,className:"w-9 h-9 flex items-center justify-center border dark:border-gray-600 rounded-lg disabled:opacity-50 hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-300",children:e.jsx(qe,{size:16})})]})})]})},Zl=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"})),Qs=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M12 8v8M8 12h8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),Za=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M14 2v6h6M16 13H8M16 17H8M10 9H8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),ut=({title:a,subtitle:t,defaultOpen:s=!0,children:r})=>{const[l,i]=n.useState(s);return e.jsxs("div",{className:"bg-white rounded-lg shadow-[0px_4px_11.4px_-2px_rgba(0,0,0,0.08)] px-4 py-5",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i(!l),children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-[20px] font-medium text-black font-['Lato']",children:a}),t&&e.jsx("p",{className:"text-[12px] text-[#a2a2a2] mt-1",children:t})]}),e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:l?e.jsx(or,{size:20}):e.jsx(_e,{size:20})})]}),l&&e.jsx("div",{className:"mt-6",children:r})]})},we=({label:a,required:t,placeholder:s,value:r,onChange:l,type:i="text",rows:p=3,icon:g,rightIcon:u})=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-[16px] text-black font-['Lato']",children:[a,t&&e.jsx("span",{className:"text-[#e30000]",children:"*"})]}),e.jsxs("div",{className:"relative",children:[g&&e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:g}),i==="textarea"?e.jsx("textarea",{value:r,onChange:f=>l(f.target.value),placeholder:s,rows:p,className:"w-full bg-[#f9f9f9] rounded-lg px-3 py-3 text-[14px] text-black placeholder:text-[#a2a2a2] outline-none resize-none"}):e.jsx("input",{type:i,value:r,onChange:f=>l(f.target.value),placeholder:s,className:`w-full h-10 bg-[#f9f9f9] rounded-lg text-[14px] text-black placeholder:text-[#a2a2a2] outline-none ${g?"pl-9 pr-3":"px-3"} ${u?"pr-10":""}`}),u&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:u})]})]}),Xs=({label:a,value:t,onChange:s,labelPosition:r="left"})=>e.jsxs("div",{className:"flex items-center gap-2",children:[r==="left"&&e.jsx("span",{className:"text-[14px] sm:text-[16px] text-black font-['Lato'] whitespace-nowrap",children:a}),e.jsx("button",{onClick:()=>s(!t),className:`w-[38px] h-5 rounded-full transition-colors ${t?"bg-[#ff6a00]":"bg-gray-300"} relative`,children:e.jsx("div",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow transition-transform ${t?"left-[18px]":"left-0.5"}`})}),r==="right"&&e.jsx("span",{className:"text-[14px] sm:text-[16px] text-black font-['Lato'] whitespace-nowrap",children:a})]}),Ct=({label:a,required:t,value:s,onChange:r,options:l,placeholder:i})=>{const[p,g]=n.useState(!1),u=n.useRef(null);n.useEffect(()=>{const w=v=>{u.current&&!u.current.contains(v.target)&&g(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const f=l.find(w=>w.value===s);return e.jsxs("div",{className:"flex flex-col gap-2",ref:u,children:[a&&e.jsxs("label",{className:"text-[16px] text-black font-['Lato']",children:[a,t&&e.jsx("span",{className:"text-[#e30000]",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>g(!p),className:"w-full h-10 bg-[#f9f9f9] rounded-lg px-3 flex items-center justify-between text-[14px] text-black",children:[e.jsx("span",{className:f?"text-black":"text-[#a2a2a2]",children:f?.label||i||"Select..."}),e.jsx(_e,{size:16,className:`transition-transform ${p?"rotate-180":""}`})]}),p&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white rounded-lg shadow-lg border z-50 max-h-60 overflow-auto",children:l.map(w=>e.jsx("button",{onClick:()=>{r(w.value),g(!1)},className:`w-full px-3 py-2 text-left text-[14px] hover:bg-gray-50 ${s===w.value?"bg-blue-50 text-blue-600":""}`,children:w.label},w.value))})]})]})},zo=({categories:a,subCategories:t=[],childCategories:s=[],brands:r,tags:l=[],onAddProduct:i,onBack:p,onNavigate:g,editProduct:u})=>{const{user:f}=Vn(),w=f?.tenantId||"default",v=n.useRef(null),k=n.useRef({}),S=n.useRef(null),[F,G]=n.useState(!1),[q,$]=n.useState(null),[_,j]=n.useState(!1),[z,L]=n.useState(!1),[T,I]=n.useState("category"),[E,W]=n.useState({name:"",parentCategory:"",parentSubCategory:"",image:"",isFlashSale:!1,isMostSales:!1}),[C,A]=n.useState(!1),[d,Z]=n.useState({name:"",slug:"",autoSlug:!0,shopName:"",shortDescription:"",description:"",mainImage:"",videoUrl:"",galleryImages:[],regularPrice:0,salesPrice:0,costPrice:0,quantity:0,priority:0,unitName:"",warranty:"",sku:"",barcode:"",initialSoldCount:0,productionStart:"",expirationEnd:"",variantsMandatory:!1,variants:[{title:"",options:[{attribute:"",extraPrice:0}]}],brandName:"",modelName:"",details:[{type:"",description:""}],affiliateSource:"AliExpress",sourceProductUrl:"",sourceSku:"",useDefaultDelivery:!1,deliveryChargeDefault:120,deliveryByCity:[{city:"Dhaka",charge:80}],keywords:"",seoDescription:"",seoTitle:"",category:"",subCategory:"",childCategory:"",condition:"Used",tag:"",deepSearch:""});n.useEffect(()=>{if(u){const m=u.variantGroups?.map(N=>({title:N.title,options:N.options.map(O=>({attribute:O.attribute,extraPrice:O.extraPrice||0,image:O.image}))}))||[{title:"",options:[{attribute:"",extraPrice:0}]}];Z(N=>({...N,name:u.name||"",description:u.description||"",mainImage:u.image||"",galleryImages:u.galleryImages||[],salesPrice:u.price||0,regularPrice:u.originalPrice||0,costPrice:u.costPrice||0,category:u.category||"",brandName:u.brand||"",sku:u.sku||"",quantity:u.stock||0,variants:m,variantsMandatory:u.variantGroups?.[0]?.isMandatory||!1}))}},[u]);const D=(m,N)=>{Z(O=>({...O,[m]:N}))},ne=[{label:"Item Name",completed:!!d.name?.trim()},{label:"Media",completed:!!d.mainImage},{label:"Product Description",completed:!!d.description?.trim()},{label:"Pricing",completed:d.salesPrice>0},{label:"Inventory",completed:d.quantity>0}],de=[!!d.name?.trim(),!!d.mainImage,!!d.description?.trim(),d.salesPrice>0,d.regularPrice>0,d.costPrice>0,d.quantity>0,!!d.sku?.trim(),!!d.category?.trim(),!!d.subCategory?.trim(),!!d.childCategory?.trim(),!!d.brandName?.trim(),!!d.tag?.trim(),d.galleryImages.length>0,!!d.videoUrl?.trim(),!!d.shortDescription?.trim(),!!d.unitName?.trim(),!!d.warranty?.trim(),!!d.barcode?.trim(),d.initialSoldCount>0,!!d.productionStart,!!d.expirationEnd,d.priority>0,!!d.seoTitle?.trim(),!!d.seoDescription?.trim(),!!d.keywords?.trim(),!!d.affiliateSource?.trim(),!!d.sourceProductUrl?.trim(),!!d.sourceSku?.trim(),d.variantsMandatory,d.useDefaultDelivery,d.deliveryChargeDefault>0,!!d.modelName?.trim()].filter(Boolean).length,pe=Math.min(de*3,100),K=m=>m<30?"bg-yellow-500":m<=80?"bg-green-500":"bg-blue-500",V=async m=>{try{return await $n(m,w)}catch(N){return console.error("Upload error:",N),he.error(N instanceof Error?N.message:"Upload failed"),null}},U=d.mainImage?[d.mainImage,...d.galleryImages]:d.galleryImages,ee=async(m,N,O)=>{const B=`${m}-${N}`;if(!O.type.startsWith("image/")){he.error("Please select an image file");return}if(O.size>4*1024*1024){he.error("Image size should be less than 4MB");return}$(B);try{const te=await V(O);if(te){const ae=[...d.variants];ae[m].options[N].image=te,D("variants",ae),he.success("Variant image uploaded")}}catch{he.error("Failed to upload variant image")}finally{$(null)}},X=(m,N)=>{const O=[...d.variants];O[m].options[N].image=void 0,D("variants",O)},oe=async m=>{const N=m.target.files;if(!N||N.length===0)return;const B=20-U.length;if(B<=0){he.error("Maximum 20 images allowed");return}const te=Array.from(N).slice(0,B);he.loading(`Uploading ${te.length} image(s)...`,{id:"upload"});const ae=[];for(const le of te){if(!le.type.startsWith("image/"))continue;if(le.size>4*1024*1024){he.error(`${le.name} is too large (max 4MB)`);continue}const ie=await V(le);ie&&ae.push(ie)}ae.length>0?(d.mainImage?D("galleryImages",[...d.galleryImages,...ae]):(D("mainImage",ae[0]),ae.length>1&&D("galleryImages",[...d.galleryImages,...ae.slice(1)])),he.success(`${ae.length} image(s) uploaded`,{id:"upload"})):he.error("Failed to upload images",{id:"upload"}),m.target.value=""},M=m=>{if(m===0&&d.mainImage)d.galleryImages.length>0?(D("mainImage",d.galleryImages[0]),D("galleryImages",d.galleryImages.slice(1))):D("mainImage","");else{const N=d.mainImage?m-1:m,O=d.galleryImages.filter((B,te)=>te!==N);D("galleryImages",O)}},re=m=>{if(m===0)return;const N=U[m],O=U.filter((B,te)=>te!==m);d.mainImage&&O.unshift(d.mainImage),D("mainImage",N),D("galleryImages",O.filter(B=>B!==N))},be=m=>{m.preventDefault(),m.stopPropagation(),G(!0)},me=m=>{m.preventDefault(),m.stopPropagation(),G(!1)},Oe=async m=>{m.preventDefault(),m.stopPropagation(),G(!1);const N=m.dataTransfer.files;if(!N||N.length===0)return;const B=20-U.length;if(B<=0){he.error("Maximum 20 images allowed");return}const te=Array.from(N).slice(0,B);he.loading(`Uploading ${te.length} image(s)...`,{id:"upload-drop"});const ae=[];for(const le of te){if(!le.type.startsWith("image/")){he.error(`${le.name} is not an image`);continue}if(le.size>4*1024*1024){he.error(`${le.name} is too large (max 4MB)`);continue}const ie=await V(le);ie&&ae.push(ie)}ae.length>0?(d.mainImage?D("galleryImages",[...d.galleryImages,...ae]):(D("mainImage",ae[0]),ae.length>1&&D("galleryImages",[...d.galleryImages,...ae.slice(1)])),he.success(`${ae.length} image(s) uploaded`,{id:"upload-drop"})):he.error("Failed to upload images",{id:"upload-drop"})},Le=async m=>{if(!m.type.startsWith("image/")){he.error("Please select an image file");return}if(m.size>4*1024*1024){he.error("Image size should be less than 4MB");return}j(!0);try{const N=await V(m);N&&(W(O=>({...O,image:N})),he.success("Image uploaded"))}catch{he.error("Failed to upload image")}finally{j(!1)}},fe=async()=>{if(!E.name.trim()){he.error("Name is required");return}A(!0);try{const m=T==="subcategory"?"subcategories":T==="childcategory"?"childcategories":T==="brand"?"brands":T==="tag"?"tags":"categories",N=await fetch(`/api/tenant-data/${w}/${m}`);let O=[];N.ok&&(O=(await N.json()).data||[]);const B={id:Date.now(),name:E.name.trim(),createdAt:new Date().toISOString()};T==="category"?(B.image=E.image,B.isFlashSale=E.isFlashSale,B.isMostSales=E.isMostSales):T==="subcategory"?(B.categoryId=E.parentCategory,B.categoryName=E.parentCategory,B.image=E.image):T==="childcategory"?(B.subCategoryId=E.parentSubCategory,B.subCategoryName=E.parentSubCategory,B.image=E.image):T==="brand"?B.logo=E.image:T==="tag"&&(B.image=E.image);const te=[...O,B];if(!(await fetch(`/api/tenant-data/${w}/${m}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:te})})).ok)throw new Error("Failed to save");he.success(`${T.charAt(0).toUpperCase()+T.slice(1)} added successfully!`),T==="category"?D("category",E.name.trim()):T==="subcategory"?D("subCategory",E.name.trim()):T==="childcategory"?D("childCategory",E.name.trim()):T==="tag"?D("tag",E.name.trim()):T==="brand"&&D("brandName",E.name.trim()),W({name:"",parentCategory:"",parentSubCategory:"",image:"",isFlashSale:!1,isMostSales:!1}),L(!1)}catch(m){console.error("Error saving catalog item:",m),he.error("Failed to save. Please try again.")}finally{A(!1)}},We=()=>{const m=d.variants.filter(O=>O.title.trim()&&O.options.some(B=>B.attribute.trim())).map(O=>({title:O.title.trim(),isMandatory:d.variantsMandatory,options:O.options.filter(B=>B.attribute.trim()).map(B=>({attribute:B.attribute.trim(),extraPrice:B.extraPrice||0,image:B.image}))})),N={id:u?.id||Date.now(),name:d.name||"Untitled Draft",slug:d.slug||`draft-${Date.now()}`,description:d.description,image:d.mainImage,galleryImages:d.galleryImages,price:d.salesPrice||0,originalPrice:d.regularPrice||0,costPrice:d.costPrice||0,category:d.category,subCategory:d.subCategory,childCategory:d.childCategory,brand:d.brandName,sku:d.sku,stock:d.quantity||0,status:"Draft",tags:d.tag?[d.tag]:[],tenantId:w,shopName:d.shopName,variantGroups:m.length>0?m:void 0};i(N),he.success("Draft saved!"),p?.()},Pe=()=>{if(!d.name||!d.category||!d.salesPrice){he.error("Please fill required fields");return}const m=d.variants.filter(O=>O.title.trim()&&O.options.some(B=>B.attribute.trim())).map(O=>({title:O.title.trim(),isMandatory:d.variantsMandatory,options:O.options.filter(B=>B.attribute.trim()).map(B=>({attribute:B.attribute.trim(),extraPrice:B.extraPrice||0,image:B.image}))})),N={id:u?.id||Date.now(),name:d.name,slug:d.slug||d.name.toLowerCase().replace(/\s+/g,"-"),description:d.description,image:d.mainImage,galleryImages:d.galleryImages,price:d.salesPrice,originalPrice:d.regularPrice,costPrice:d.costPrice,category:d.category,subCategory:d.subCategory,childCategory:d.childCategory,brand:d.brandName,sku:d.sku,stock:d.quantity,status:"Active",tags:d.tag?[d.tag]:[],tenantId:w,shopName:d.shopName,variantGroups:m.length>0?m:void 0};i(N),he.success(u?"Product updated!":"Product added!"),p?.()},ke=[{value:"AliExpress",label:"AliExpress (marketplace)",color:"#ff6a00"},{value:"Amazon",label:"Amazon (marketplace)",color:"#ff9900"},{value:"Alibaba",label:"Alibaba (marketplace)",color:"#ff6a00"},{value:"Other",label:"Other",color:"#666"}];return e.jsxs("div",{className:"min-h-screen bg-[#f9f9f9] pb-6 xxs:pb-8 font-['Lato']",children:[e.jsx("div",{className:"px-2 xxs:px-3 sm:px-4 lg:px-6 py-3 xxs:py-4 sm:py-6",children:e.jsx("h1",{className:"text-base xxs:text-lg sm:text-xl lg:text-[24px] font-bold text-black",children:"Product Upload"})}),e.jsxs("div",{className:"px-2 xxs:px-3 sm:px-4 lg:px-6 flex flex-col lg:flex-row gap-3 xxs:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-3 xxs:space-y-4",children:[e.jsx(ut,{title:"General Information",children:e.jsxs("div",{className:"space-y-3 xxs:space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-1.5 xxs:gap-2",children:[e.jsxs("div",{className:"flex flex-col xxs:flex-row xxs:items-center justify-between gap-1 xxs:gap-2",children:[e.jsxs("label",{className:"text-[14px] xxs:text-[16px] text-black",children:["Item Name",e.jsx("span",{className:"text-[#e30000]",children:"*"})]}),e.jsx(Xs,{label:"Auto Slug",value:d.autoSlug,onChange:m=>D("autoSlug",m)})]}),e.jsx("input",{type:"text",value:d.name,onChange:m=>{D("name",m.target.value),d.autoSlug&&D("slug",m.target.value.toLowerCase().replace(/\s+/g,"-"))},placeholder:"Ex: Samsung Galaxy S25 Ultra",className:"w-full h-9 xxs:h-10 bg-[#f9f9f9] rounded-lg px-2 xxs:px-3 text-[13px] xxs:text-[14px] placeholder:text-[#a2a2a2] outline-none"})]}),e.jsxs("div",{className:"flex flex-col gap-1.5 xxs:gap-2",children:[e.jsx("label",{className:"text-[14px] xxs:text-[16px] text-black",children:"Shop Name"}),e.jsx("input",{type:"text",value:d.shopName,onChange:m=>D("shopName",m.target.value),placeholder:"Enter your shop name",className:"w-full h-9 xxs:h-10 bg-[#f9f9f9] rounded-lg px-2 xxs:px-3 text-[13px] xxs:text-[14px] placeholder:text-[#a2a2a2] outline-none"})]}),e.jsxs("div",{className:"flex flex-col gap-1.5 xxs:gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"text-[14px] xxs:text-[16px] font-medium text-black",children:["Media",e.jsx("span",{className:"text-[#da0000]",children:"*"})]}),e.jsx(or,{size:18,className:"xxs:w-5 xxs:h-5"})]}),e.jsxs("div",{className:`rounded-lg p-2 xxs:p-3 sm:p-4 transition-colors border-2 ${F?"bg-blue-50 border-blue-400 border-dashed":"bg-[#f9f9f9] border-transparent hover:bg-gray-50"}`,onDragOver:be,onDragLeave:me,onDrop:Oe,children:[U.length>0?e.jsxs("div",{className:"space-y-3 xxs:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs xxs:text-sm text-gray-600",children:[U.length,"/20 images"]}),U.length<20&&e.jsxs("button",{type:"button",onClick:()=>v.current?.click(),className:"text-xs xxs:text-sm text-[#ff9f1c] hover:underline flex items-center gap-1",children:[e.jsx(ot,{size:12,className:"xxs:w-[14px] xxs:h-[14px]"})," Add More"]})]}),e.jsxs("div",{className:"grid grid-cols-3 xxs:grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-2 xxs:gap-3",children:[U.map((m,N)=>e.jsxs("div",{className:`relative group aspect-square rounded-lg overflow-hidden border-2 ${N===0?"border-[#ff9f1c] ring-2 ring-[#ff9f1c]/20":"border-gray-200"}`,children:[e.jsx("img",{src:Ke(m),alt:`Product ${N+1}`,className:"w-full h-full object-cover"}),N===0&&e.jsx("div",{className:"absolute top-0.5 xxs:top-1 left-0.5 xxs:left-1 bg-[#ff9f1c] text-white text-[8px] xxs:text-[10px] px-1 xxs:px-1.5 py-0.5 rounded",children:"Main"}),e.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-1 xxs:gap-2",children:[N!==0&&e.jsx("button",{type:"button",onClick:O=>{O.stopPropagation(),re(N)},className:"w-5 h-5 xxs:w-7 xxs:h-7 bg-white text-gray-700 rounded-full flex items-center justify-center text-[10px] xxs:text-xs hover:bg-[#ff9f1c] hover:text-white transition-colors",title:"Set as Main",children:"★"}),e.jsx("button",{type:"button",onClick:O=>{O.stopPropagation(),M(N)},className:"w-5 h-5 xxs:w-7 xxs:h-7 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",title:"Remove",children:e.jsx(ge,{size:12,className:"xxs:w-[14px] xxs:h-[14px]"})})]})]},N)),U.length<20&&e.jsxs("div",{onClick:()=>v.current?.click(),className:"aspect-square rounded-lg border-2 border-dashed border-gray-300 flex flex-col items-center justify-center cursor-pointer hover:border-[#ff9f1c] hover:bg-orange-50 transition-colors",children:[e.jsx(ot,{size:20,className:"text-gray-400 xxs:w-6 xxs:h-6"}),e.jsx("span",{className:"text-[9px] xxs:text-[10px] text-gray-400 mt-0.5 xxs:mt-1",children:"Add"})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center py-3 xxs:py-4 sm:py-6 cursor-pointer",onClick:()=>v.current?.click(),children:[e.jsx("div",{className:"w-[50px] h-[50px] xxs:w-[60px] xxs:h-[60px] sm:w-[76px] sm:h-[76px] mb-2 xxs:mb-3",children:e.jsx(Mt,{className:"w-full h-full text-[#a2a2a2]"})}),e.jsx("p",{className:"text-[13px] xxs:text-[14px] sm:text-[16px] text-[#a2a2a2] text-center",children:"Drag & drop images, or click to add."}),e.jsx("p",{className:"text-[10px] xxs:text-[11px] sm:text-[12px] text-[#a2a2a2] text-center mt-1",children:"JPG, PNG (max 4MB). Up to 20 images."}),e.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),v.current?.click()},className:"mt-3 xxs:mt-4 bg-[#ff9f1c] text-white px-3 xxs:px-4 py-1.5 xxs:py-2 rounded-lg text-[12px] xxs:text-[14px] font-semibold",children:"Add Images"})]}),e.jsx("input",{ref:v,type:"file",accept:"image/*",multiple:!0,onChange:oe,className:"hidden"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ta,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#a2a2a2]"}),e.jsx("input",{type:"text",value:d.videoUrl,onChange:m=>D("videoUrl",m.target.value),placeholder:"Past YouTube Video Link (Optional)",className:"w-full h-10 bg-[#f9f9f9] rounded-lg pl-9 pr-3 text-[14px] placeholder:text-[#a2a2a2] outline-none"})]})]}),e.jsx(we,{label:"Short Description",value:d.shortDescription,onChange:m=>D("shortDescription",m),placeholder:"Ex: Short Description",type:"textarea",rows:3}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-[16px] text-black",children:["Product Description",e.jsx("span",{className:"text-[#da0000]",children:"*"})]}),e.jsxs("div",{className:"bg-[#f9f9f9] h-10 rounded-lg flex items-center gap-5 px-3",children:[e.jsx("span",{className:"text-[14px] font-semibold text-[#4f4d4d]",children:"Normal"}),e.jsx(_e,{size:10}),e.jsx(Nn,{size:14,className:"text-[#4f4d4d] cursor-pointer"}),e.jsx(kn,{size:14,className:"text-[#4f4d4d] cursor-pointer"}),e.jsx(Cn,{size:14,className:"text-[#4f4d4d] cursor-pointer"}),e.jsx("span",{className:"text-[14px] text-[#4f4d4d]",children:'"'}),e.jsx("span",{className:"text-[14px] underline text-[#4f4d4d]",children:"A"}),e.jsx(Sn,{size:16,className:"text-[#4f4d4d] cursor-pointer"}),e.jsx(Ln,{size:16,className:"text-[#4f4d4d] cursor-pointer"}),e.jsx(Pn,{size:16,className:"text-[#4f4d4d] cursor-pointer"}),e.jsx(Dn,{size:16,className:"text-[#4f4d4d] cursor-pointer"}),e.jsx(fa,{size:16,className:"text-[#4f4d4d] cursor-pointer"}),e.jsx(_n,{size:16,className:"text-[#4f4d4d] cursor-pointer"}),e.jsx(Ta,{size:16,className:"text-[#4f4d4d] cursor-pointer"}),e.jsx(An,{size:16,className:"text-[#4f4d4d] cursor-pointer"})]}),e.jsx("textarea",{value:d.description,onChange:m=>D("description",m.target.value),placeholder:"Ex: Description",rows:5,className:"w-full bg-[#f9f9f9] rounded-lg p-3 text-[14px] placeholder:text-[#a2a2a2] outline-none resize-none"})]})]})}),e.jsx(ut,{title:"Pricing",children:e.jsxs("div",{className:"grid grid-cols-1 xxs:grid-cols-2 sm:grid-cols-3 gap-2 xxs:gap-3 sm:gap-4 lg:gap-6",children:[e.jsx(we,{label:"Sell/Current Price",required:!0,value:d.salesPrice,onChange:m=>D("salesPrice",parseFloat(m)||0),placeholder:"0",type:"number"}),e.jsx(we,{label:"Regular/Old Price",required:!0,value:d.regularPrice,onChange:m=>D("regularPrice",parseFloat(m)||0),placeholder:"0",type:"number"}),e.jsx(we,{label:"Cost Price (Optional)",value:d.costPrice,onChange:m=>D("costPrice",parseFloat(m)||0),placeholder:"0",type:"number"})]})}),e.jsx(ut,{title:"Inventory",children:e.jsxs("div",{className:"space-y-3 xxs:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 xxs:grid-cols-2 sm:grid-cols-3 gap-2 xxs:gap-3 sm:gap-4 lg:gap-6",children:[e.jsx(we,{label:"Product Priority",value:d.priority,onChange:m=>D("priority",parseFloat(m)||0),placeholder:"0%",type:"number"}),e.jsx(we,{label:"Quantity (Stock)",value:d.quantity,onChange:m=>D("quantity",parseInt(m)||0),placeholder:"50",type:"number"}),e.jsx(we,{label:"Unit Name",value:d.unitName,onChange:m=>D("unitName",m),placeholder:"Piece, kg, liter, meter etc."})]}),e.jsxs("div",{className:"grid grid-cols-1 xxs:grid-cols-2 sm:grid-cols-3 gap-2 xxs:gap-3 sm:gap-4 lg:gap-6",children:[e.jsx(we,{label:"Warranty",value:d.warranty,onChange:m=>D("warranty",m),placeholder:"12 month"}),e.jsx(we,{label:"SKU / Product Code",value:d.sku,onChange:m=>D("sku",m),placeholder:"ABC-XYZ-123"}),e.jsx(we,{label:"Bar Code",value:d.barcode,onChange:m=>D("barcode",m),placeholder:"2154645786216",rightIcon:e.jsx(Tn,{size:18,className:"text-gray-400 xxs:w-5 xxs:h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 xxs:grid-cols-2 sm:grid-cols-3 gap-2 xxs:gap-3 sm:gap-4 lg:gap-6",children:[e.jsx(we,{label:"Initial Sold Count",value:d.initialSoldCount,onChange:m=>D("initialSoldCount",parseInt(m)||0),placeholder:"0",type:"number"}),e.jsx(we,{label:"Production Start",value:d.productionStart,onChange:m=>D("productionStart",m),placeholder:"DD-MM-YYYY",rightIcon:e.jsx(ba,{size:18,className:"text-gray-400 xxs:w-5 xxs:h-5"})}),e.jsx(we,{label:"Expiration End",value:d.expirationEnd,onChange:m=>D("expirationEnd",m),placeholder:"DD-MM-YYYY",rightIcon:e.jsx(ba,{size:18,className:"text-gray-400 xxs:w-5 xxs:h-5"})})]})]})}),e.jsx(ut,{title:"Product Variants",subtitle:"You can add multiple variant for a single product here. Like Size, Color, and Weight etc.",children:e.jsxs("div",{className:"space-y-4",children:[d.variants.map((m,N)=>e.jsxs("div",{className:"border border-[#38bdf8] rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[20px] font-medium",children:"Make this variant mandatory"}),e.jsx("p",{className:"text-[12px] text-[#a2a2a2]",children:"Toggle this on if you want your customer to select at least one of the variant options"})]}),e.jsx(Xs,{label:"[No]",value:d.variantsMandatory,onChange:O=>D("variantsMandatory",O)})]}),e.jsx(we,{label:"Title",value:m.title,onChange:O=>{const B=[...d.variants];B[N].title=O,D("variants",B)},placeholder:"Enter the name of variant (e.g., Colour, Size, Material)"}),m.options.map((O,B)=>e.jsxs("div",{className:"flex items-end gap-2 mt-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",ref:te=>{k.current[`${N}-${B}`]=te},onChange:te=>{const ae=te.target.files?.[0];ae&&ee(N,B,ae),te.target.value=""},className:"hidden"}),e.jsx("div",{onClick:()=>k.current[`${N}-${B}`]?.click(),className:"w-[67px] h-[67px] bg-[#f9f9f9] rounded-lg flex items-center justify-center cursor-pointer hover:bg-gray-100 overflow-hidden border-2 border-dashed border-gray-300 hover:border-[#38bdf8] transition-colors",children:q===`${N}-${B}`?e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-[#38bdf8] border-t-transparent rounded-full"}):O.image?e.jsx("img",{src:Ke(O.image),alt:"Variant",className:"w-full h-full object-cover"}):e.jsx(Mt,{size:24,className:"text-gray-400"})}),O.image&&e.jsx("button",{onClick:te=>{te.stopPropagation(),X(N,B)},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600",children:e.jsx(ge,{size:12})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[16px] text-black",children:"Attribute"}),e.jsx("input",{value:O.attribute,onChange:te=>{const ae=[...d.variants];ae[N].options[B].attribute=te.target.value,D("variants",ae)},placeholder:"Enter variant Option (e.g., Red, Large, Cotton)",className:"w-full h-10 bg-[#f9f9f9] rounded-lg px-3 text-[14px] placeholder:text-[#999] outline-none mt-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[16px] text-black",children:"Extra Price"}),e.jsx("input",{type:"number",value:O.extraPrice,onChange:te=>{const ae=[...d.variants];ae[N].options[B].extraPrice=parseFloat(te.target.value)||0,D("variants",ae)},placeholder:"Enter Extra price for this option",className:"w-full h-10 bg-[#f9f9f9] rounded-lg px-3 text-[14px] placeholder:text-[#999] outline-none mt-2"})]})]}),e.jsx("button",{onClick:()=>{const te=[...d.variants];te[N].options=te[N].options.filter((ae,le)=>le!==B),D("variants",te)},className:"w-10 h-10 bg-red-50 rounded-lg flex items-center justify-center text-red-500",children:e.jsx(ge,{size:24})})]},B)),e.jsxs("button",{onClick:()=>{const O=[...d.variants];O[N].options.push({attribute:"",extraPrice:0}),D("variants",O)},className:"mt-4 h-10 bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] text-white rounded-lg px-4 flex items-center gap-3",children:[e.jsx(Qs,{}),e.jsx("span",{className:"text-[14px] font-semibold",children:"Add More Option"})]})]},N)),e.jsxs("button",{onClick:()=>{D("variants",[...d.variants,{title:"",options:[{attribute:"",extraPrice:0}]}])},className:"h-10 bg-[#f4f4f4] rounded-lg px-4 flex items-center gap-3",children:[e.jsx(ot,{size:24}),e.jsx("span",{className:"text-[14px] font-semibold text-black",children:"Add a new variant"})]})]})}),e.jsxs(ut,{title:"Brand",subtitle:"You can add multiple product details for a single product here. Like Brand, Model, Serial Number, Fabric Type, and EMI etc.",children:[e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsx(we,{label:"Brand Name",value:d.brandName,onChange:m=>D("brandName",m),placeholder:"Samsung"}),e.jsx(we,{label:"Model Name",value:d.modelName,onChange:m=>D("modelName",m),placeholder:"S25 Ultra"})]}),e.jsx("button",{className:"w-10 h-10 bg-red-50 rounded-lg flex items-center justify-center text-red-500",children:e.jsx(ge,{size:24})})]}),e.jsxs("button",{className:"mt-4 h-10 bg-[#f4f4f4] rounded-lg px-4 flex items-center gap-3",children:[e.jsx(ot,{size:24}),e.jsx("span",{className:"text-[14px] font-semibold text-black",children:"Create a new Brand"})]})]}),e.jsxs(ut,{title:"Product Details",subtitle:"You can add multiple product details for a single product here. Like Brand, Model, Serial Number, Fabric Type, and EMI etc.",children:[d.details.map((m,N)=>e.jsxs("div",{className:"flex items-end gap-2 mb-4",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsx(we,{label:"Detail Type",value:m.type,onChange:O=>{const B=[...d.details];B[N].type=O,D("details",B)},placeholder:"Ram"}),e.jsx(we,{label:"Detail Description",value:m.description,onChange:O=>{const B=[...d.details];B[N].description=O,D("details",B)},placeholder:"16 GB"})]}),e.jsx("button",{onClick:()=>D("details",d.details.filter((O,B)=>B!==N)),className:"w-10 h-10 bg-red-50 rounded-lg flex items-center justify-center text-red-500",children:e.jsx(ge,{size:24})})]},N)),e.jsxs("button",{onClick:()=>D("details",[...d.details,{type:"",description:""}]),className:"h-10 bg-[#f4f4f4] rounded-lg px-4 flex items-center gap-3",children:[e.jsx(ot,{size:24}),e.jsx("span",{className:"text-[14px] font-semibold text-black",children:"Add More"})]})]}),e.jsx(ut,{title:"Affiliate",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ct,{label:"Product Source (Optional)",value:d.affiliateSource,onChange:m=>D("affiliateSource",m),options:ke,placeholder:"Select source"}),e.jsx("p",{className:"text-[12px] text-[#a2a2a2]",children:"Select if this product is sourced from an external supplier or marketplace"}),d.affiliateSource&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-[#fff8ef] h-[60px] rounded-lg flex items-center px-4 gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded flex items-center justify-center text-orange-500 font-bold",children:"A"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[14px] font-bold text-black",children:d.affiliateSource}),e.jsxs("p",{className:"text-[10px] text-[#009ade]",children:["www.",d.affiliateSource.toLowerCase(),".com"]})]}),e.jsx("span",{className:"ml-auto bg-[#ff821c] text-white text-[12px] font-semibold px-3 py-1 rounded-full",children:"Marketplace"})]}),e.jsxs("div",{className:"bg-[#fff8ef] rounded-lg p-4 sm:p-6 space-y-4",children:[e.jsx("p",{className:"text-[14px] font-bold text-black",children:"Source Product Details (Optional)"}),e.jsxs("div",{children:[e.jsx(we,{label:"Source Product URL",value:d.sourceProductUrl,onChange:m=>D("sourceProductUrl",m),placeholder:"www.xyz.com/product/123"}),e.jsx("p",{className:"text-[12px] text-[#a2a2a2] mt-1",children:"Direct link to this product on the source platform"})]}),e.jsxs("div",{children:[e.jsx(we,{label:"Source SKU / Product Code",value:d.sourceSku,onChange:m=>D("sourceSku",m),placeholder:"ABC-XYZ-123"}),e.jsx("p",{className:"text-[12px] text-[#a2a2a2] mt-1",children:"Product identifier from the source (SKU, Product ID, etc.)"})]}),e.jsx("div",{className:"bg-[#fff0dd] rounded-lg p-3",children:e.jsx("p",{className:"text-[12px] text-[#a2a2a2]",children:"💡 Tip: These details help you track and manage products from external sources. You can use the Source URL to quickly access the product page, and the Source SKU for ordering or communication with suppliers."})})]})]})]})}),e.jsx(ut,{title:"Shipping",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[20px] font-medium",children:"Delivery Charge"}),e.jsx("p",{className:"text-[12px] text-[#a2a2a2]",children:"You can add specific delivery charge for this product or use the default charges"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[16px]",children:"Apply default delivery charges"}),e.jsx(Xs,{label:d.useDefaultDelivery?"[Applied]":"[Not Applied]",value:d.useDefaultDelivery,onChange:m=>D("useDefaultDelivery",m)})]}),e.jsx(we,{label:"Delivery Charge (Default)",value:d.deliveryChargeDefault,onChange:m=>D("deliveryChargeDefault",parseFloat(m)||0),placeholder:"120",type:"number"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[16px] text-black",children:"Specific Delivery Charge"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("input",{value:d.deliveryByCity[0]?.city||"",onChange:m=>{const N=[...d.deliveryByCity];N[0]?N[0].city=m.target.value:N.push({city:m.target.value,charge:0}),D("deliveryByCity",N)},placeholder:"Dhaka",className:"flex-1 h-10 bg-[#f9f9f9] rounded-lg px-3 text-[14px] outline-none"}),e.jsx("input",{type:"number",value:d.deliveryByCity[0]?.charge||"",onChange:m=>{const N=[...d.deliveryByCity];N[0]?N[0].charge=parseFloat(m.target.value)||0:N.push({city:"",charge:parseFloat(m.target.value)||0}),D("deliveryByCity",N)},placeholder:"80",className:"w-full sm:w-[213px] h-10 bg-[#f9f9f9] rounded-lg px-3 text-[14px] outline-none"})]})]})]})}),e.jsx(ut,{title:"SEO Info",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(we,{label:"Keyword",value:d.keywords,onChange:m=>D("keywords",m),placeholder:"Seo Keyword"}),e.jsx(we,{label:"SEO Description",value:d.seoDescription,onChange:m=>D("seoDescription",m),placeholder:"Seo Description"}),e.jsx(we,{label:"SEO Title",value:d.seoTitle,onChange:m=>D("seoTitle",m),placeholder:"Seo Title"})]})})]}),e.jsxs("div",{className:"hidden lg:block w-[320px] lg:w-[381px] flex-shrink-0 space-y-4 sticky top-6 self-start",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:We,className:"flex-1 h-10 bg-white rounded-lg flex items-center justify-center gap-2 hover:bg-gray-50",children:[e.jsx(Za,{}),e.jsx("span",{className:"text-[14px] font-semibold text-[#070606]",children:"Draft"})]}),e.jsxs("button",{onClick:Pe,className:"flex-1 h-10 bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] rounded-lg flex items-center justify-center gap-2",children:[e.jsx(Qs,{}),e.jsx("span",{className:"text-[14px] font-semibold text-white",children:u?"Update":"Add Product"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("h3",{className:"text-[20px] font-medium text-black mb-4",children:"Ready To Publish"}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"flex-1 h-2 bg-[#f9f9f9] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${K(pe)} rounded-full transition-all duration-300`,style:{width:`${pe}%`}})}),e.jsxs("span",{className:"text-[14px] font-medium",children:[pe,"%"]})]}),e.jsx("div",{className:"space-y-2",children:ne.map((m,N)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center transition-all ${m.completed?"bg-green-500 border-green-500":"border-gray-300 bg-white"}`,children:m.completed&&e.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`text-[12px] font-medium ${m.completed?"text-black":"text-gray-400"}`,children:m.label})]},N))})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("h3",{className:"text-[20px] font-medium text-black mb-4",children:"Catalog"}),e.jsx(Ct,{value:d.category,onChange:m=>D("category",m),options:a.map(m=>({value:m.name,label:m.name})),placeholder:"Select Category*",required:!0}),e.jsxs("button",{onClick:()=>L(!0),className:"mt-4 h-10 bg-[#f4f4f4] rounded-lg px-4 flex items-center gap-2 ml-auto hover:bg-gray-200 transition-colors",children:[e.jsx(ot,{size:24}),e.jsx("span",{className:"text-[14px] font-semibold text-[#070606]",children:"Add New Category"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("h3",{className:"text-[20px] font-medium text-black mb-4",children:"Tag & Deep Search"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ct,{value:d.tag,onChange:m=>D("tag",m),options:l.map(m=>({value:m.name,label:m.name})),placeholder:"Select Tag"}),e.jsx("input",{value:d.deepSearch,onChange:m=>D("deepSearch",m.target.value),placeholder:"Deep Search. ex.New Mobile, Popular product",className:"w-full h-10 bg-[#f9f9f9] rounded-lg px-3 text-[12px] placeholder:text-[#a2a2a2] outline-none"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("h3",{className:"text-[20px] font-medium text-black mb-4",children:"Condition"}),e.jsx(Ct,{value:d.condition,onChange:m=>D("condition",m),options:[{value:"New",label:"New"},{value:"Used",label:"Used"},{value:"Refurbished",label:"Refurbished"}],placeholder:"Select Condition"})]})]}),e.jsxs("div",{className:"lg:hidden space-y-3 xxs:space-y-4 w-full",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:We,className:"flex-1 h-9 xxs:h-10 bg-white rounded-lg flex items-center justify-center gap-1.5 xxs:gap-2 hover:bg-gray-50 text-xs xxs:text-sm",children:[e.jsx(Za,{}),e.jsx("span",{className:"font-semibold text-[#070606]",children:"Draft"})]}),e.jsxs("button",{onClick:Pe,className:"flex-1 h-9 xxs:h-10 bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] rounded-lg flex items-center justify-center gap-1.5 xxs:gap-2",children:[e.jsx(Qs,{}),e.jsx("span",{className:"text-xs xxs:text-sm font-semibold text-white",children:u?"Update":"Add"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2 xxs:p-3 sm:p-4",children:[e.jsx("h3",{className:"text-sm xxs:text-base sm:text-lg font-medium text-black mb-2 xxs:mb-3",children:"Ready To Publish"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2 xxs:mb-3",children:[e.jsx("div",{className:"flex-1 h-1.5 xxs:h-2 bg-[#f9f9f9] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${K(pe)} rounded-full transition-all duration-300`,style:{width:`${pe}%`}})}),e.jsxs("span",{className:"text-xs xxs:text-sm font-medium",children:[pe,"%"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-1.5 xxs:gap-2",children:ne.map((m,N)=>e.jsxs("div",{className:"flex items-center gap-1.5 xxs:gap-2",children:[e.jsx("div",{className:`w-2.5 h-2.5 xxs:w-3 xxs:h-3 rounded-full border flex items-center justify-center transition-all ${m.completed?"bg-green-500 border-green-500":"border-gray-300 bg-white"}`,children:m.completed&&e.jsx("svg",{className:"w-1.5 h-1.5 xxs:w-2 xxs:h-2 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`text-[10px] xxs:text-xs ${m.completed?"text-black":"text-gray-400"}`,children:m.label})]},N))})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2 xxs:p-3 sm:p-4",children:[e.jsx("h3",{className:"text-sm xxs:text-base sm:text-lg font-medium text-black mb-2 xxs:mb-3",children:"Catalog"}),e.jsx(Ct,{value:d.category,onChange:m=>D("category",m),options:a.map(m=>({value:m.name,label:m.name})),placeholder:"Select Category*",required:!0}),e.jsxs("button",{onClick:()=>L(!0),className:"mt-2 xxs:mt-3 h-8 xxs:h-9 bg-[#f4f4f4] rounded-lg px-2 xxs:px-3 flex items-center gap-1.5 xxs:gap-2 ml-auto hover:bg-gray-200 transition-colors text-xs xxs:text-sm",children:[e.jsx(ot,{size:16,className:"xxs:w-5 xxs:h-5"}),e.jsx("span",{className:"font-semibold text-[#070606]",children:"Add Category"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2 xxs:p-3 sm:p-4",children:[e.jsx("h3",{className:"text-sm xxs:text-base sm:text-lg font-medium text-black mb-2 xxs:mb-3",children:"Tag & Deep Search"}),e.jsxs("div",{className:"space-y-1.5 xxs:space-y-2",children:[e.jsx(Ct,{value:d.tag,onChange:m=>D("tag",m),options:l.map(m=>({value:m.name,label:m.name})),placeholder:"Select Tag"}),e.jsx("input",{value:d.deepSearch,onChange:m=>D("deepSearch",m.target.value),placeholder:"Deep Search. ex.New Mobile, Popular product",className:"w-full h-9 bg-[#f9f9f9] rounded-lg px-3 text-xs placeholder:text-[#a2a2a2] outline-none"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium text-black mb-3",children:"Condition"}),e.jsx(Ct,{value:d.condition,onChange:m=>D("condition",m),options:[{value:"New",label:"New"},{value:"Used",label:"Used"},{value:"Refurbished",label:"Refurbished"}],placeholder:"Select Condition"})]})]})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl w-[95vw] sm:w-[600px] max-w-[600px] max-h-[90vh] overflow-auto shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add Catalog Item"}),e.jsx("button",{onClick:()=>L(!1),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",children:e.jsx(ge,{size:20})})]}),e.jsx("div",{className:"flex border-b overflow-x-auto",children:[{key:"category",label:"Category"},{key:"subcategory",label:"Sub Category"},{key:"childcategory",label:"Child Category"},{key:"brand",label:"Brand"},{key:"tag",label:"Tag"}].map(m=>e.jsx("button",{onClick:()=>{I(m.key),W({name:"",parentCategory:"",parentSubCategory:"",image:"",isFlashSale:!1,isMostSales:!1})},className:`px-4 py-3 text-sm font-medium whitespace-nowrap transition-colors ${T===m.key?"text-[#ff6a00] border-b-2 border-[#ff6a00]":"text-gray-500 hover:text-gray-700"}`,children:m.label},m.key))}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[T==="category"?"Category":T==="subcategory"?"Sub Category":T==="childcategory"?"Child Category":T==="brand"?"Brand":"Tag"," Name *"]}),e.jsx("input",{type:"text",value:E.name,onChange:m=>W(N=>({...N,name:m.target.value})),placeholder:`Enter ${T} name`,className:"w-full h-11 border rounded-lg px-3 text-sm outline-none focus:border-[#ff6a00]"})]}),T==="subcategory"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Category *"}),e.jsxs("select",{value:E.parentCategory,onChange:m=>W(N=>({...N,parentCategory:m.target.value})),className:"w-full h-11 border rounded-lg px-3 text-sm outline-none focus:border-[#ff6a00] bg-white",children:[e.jsx("option",{value:"",children:"Select Parent Category"}),a.map(m=>e.jsx("option",{value:m.name,children:m.name},m.id||m.name))]})]}),T==="childcategory"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Sub Category *"}),e.jsxs("select",{value:E.parentSubCategory,onChange:m=>W(N=>({...N,parentSubCategory:m.target.value})),className:"w-full h-11 border rounded-lg px-3 text-sm outline-none focus:border-[#ff6a00] bg-white",children:[e.jsx("option",{value:"",children:"Select Parent Sub Category"}),t.map(m=>e.jsx("option",{value:m.name,children:m.name},m.id||m.name))]})]}),(T==="category"||T==="brand")&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[T==="brand"?"Brand Logo":"Category Icon/Image"," (Optional)"]}),e.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:m=>{const N=m.target.files?.[0];N&&Le(N),m.target.value=""},className:"hidden"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{onClick:()=>S.current?.click(),className:`w-20 h-20 border-2 border-dashed rounded-xl flex items-center justify-center cursor-pointer transition-colors ${E.image?"border-[#ff6a00] bg-orange-50":"border-gray-300 hover:border-[#ff6a00] bg-gray-50"}`,children:_?e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-[#ff6a00] border-t-transparent rounded-full"}):E.image?e.jsx("img",{src:Ke(E.image),alt:"Preview",className:"w-full h-full object-cover rounded-lg"}):e.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[e.jsx(Mt,{size:24}),e.jsx("span",{className:"text-xs mt-1",children:"Upload"})]})}),E.image&&e.jsxs("button",{onClick:()=>W(m=>({...m,image:""})),className:"text-sm text-red-500 hover:text-red-700 flex items-center gap-1",children:[e.jsx(ge,{size:14})," Remove"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Recommended: Square image, 200x200px or larger"})]}),T==="subcategory"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub Category Icon (Optional)"}),e.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:m=>{const N=m.target.files?.[0];N&&Le(N),m.target.value=""},className:"hidden"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{onClick:()=>S.current?.click(),className:`w-16 h-16 border-2 border-dashed rounded-lg flex items-center justify-center cursor-pointer transition-colors ${E.image?"border-[#ff6a00] bg-orange-50":"border-gray-300 hover:border-[#ff6a00] bg-gray-50"}`,children:_?e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-[#ff6a00] border-t-transparent rounded-full"}):E.image?e.jsx("img",{src:Ke(E.image),alt:"Preview",className:"w-full h-full object-cover rounded-md"}):e.jsx(Mt,{size:20,className:"text-gray-400"})}),E.image&&e.jsx("button",{onClick:()=>W(m=>({...m,image:""})),className:"text-xs text-red-500 hover:text-red-700",children:"Remove"})]})]}),T==="childcategory"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Child Category Icon (Optional)"}),e.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:m=>{const N=m.target.files?.[0];N&&Le(N),m.target.value=""},className:"hidden"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{onClick:()=>S.current?.click(),className:`w-16 h-16 border-2 border-dashed rounded-lg flex items-center justify-center cursor-pointer transition-colors ${E.image?"border-[#ff6a00] bg-orange-50":"border-gray-300 hover:border-[#ff6a00] bg-gray-50"}`,children:_?e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-[#ff6a00] border-t-transparent rounded-full"}):E.image?e.jsx("img",{src:Ke(E.image),alt:"Preview",className:"w-full h-full object-cover rounded-md"}):e.jsx(Mt,{size:20,className:"text-gray-400"})}),E.image&&e.jsx("button",{onClick:()=>W(m=>({...m,image:""})),className:"text-xs text-red-500 hover:text-red-700",children:"Remove"})]})]}),T==="tag"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tag Icon (Optional)"}),e.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:m=>{const N=m.target.files?.[0];N&&Le(N),m.target.value=""},className:"hidden"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{onClick:()=>S.current?.click(),className:`w-14 h-14 border-2 border-dashed rounded-lg flex items-center justify-center cursor-pointer transition-colors ${E.image?"border-[#ff6a00] bg-orange-50":"border-gray-300 hover:border-[#ff6a00] bg-gray-50"}`,children:_?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-[#ff6a00] border-t-transparent rounded-full"}):E.image?e.jsx("img",{src:Ke(E.image),alt:"Preview",className:"w-full h-full object-cover rounded-md"}):e.jsx(Mt,{size:18,className:"text-gray-400"})}),E.image&&e.jsx("button",{onClick:()=>W(m=>({...m,image:""})),className:"text-xs text-red-500 hover:text-red-700",children:"Remove"})]})]}),T==="category"&&e.jsxs("div",{className:"flex gap-3 sm:gap-4 lg:gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.isFlashSale,onChange:m=>W(N=>({...N,isFlashSale:m.target.checked})),className:"w-4 h-4 accent-[#ff6a00]"}),e.jsx("span",{className:"text-sm text-gray-700",children:"⚡ Flash Sale Category"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.isMostSales,onChange:m=>W(N=>({...N,isMostSales:m.target.checked})),className:"w-4 h-4 accent-[#ff6a00]"}),e.jsx("span",{className:"text-sm text-gray-700",children:"🔥 Most Sales Category"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t bg-gray-50",children:[e.jsx("button",{onClick:()=>L(!1),className:"px-5 py-2.5 text-sm text-gray-600 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:fe,disabled:C,className:"px-5 py-2.5 text-sm bg-[#ff6a00] text-white rounded-lg hover:bg-[#e55d00] transition-colors disabled:opacity-50 flex items-center gap-2",children:[C&&e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),C?"Saving...":`Add ${T.charAt(0).toUpperCase()+T.slice(1)}`]})]})]})})]})},Ql=Object.freeze(Object.defineProperty({__proto__:null,default:zo},Symbol.toStringTag,{value:"Module"})),Oo=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z",stroke:"#7B7B7B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M21 21L16.65 16.65",stroke:"#7B7B7B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Fo=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M4 4H10V10H4V4Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M14 4H20V10H14V4Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 14H10V20H4V14Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M14 14H20V20H14V14Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Ro=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 6H21",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("path",{d:"M3 12H15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("path",{d:"M3 18H21",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("path",{d:"M19 10L21 12L19 14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Bo=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M4 5H10V10H4V5Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M14 5H20V10H14V5Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 14H10V19H4V14Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M14 14H20V19H14V14Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Wo=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M6 2L3 6V20C3 20.5304 3.21071 21.0391 3.58579 21.4142C3.96086 21.7893 4.46957 22 5 22H19C19.5304 22 20.0391 21.7893 20.4142 21.4142C20.7893 21.0391 21 20.5304 21 20V6L18 2H6Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3 6H21",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 10C16 11.0609 15.5786 12.0783 14.8284 12.8284C14.0783 13.5786 13.0609 14 12 14C10.9391 14 9.92172 13.5786 9.17157 12.8284C8.42143 12.0783 8 11.0609 8 10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Uo=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M20.59 13.41L13.42 20.58C13.2343 20.766 13.0137 20.9135 12.7709 21.0141C12.5281 21.1148 12.2678 21.1666 12.005 21.1666C11.7422 21.1666 11.4819 21.1148 11.2391 21.0141C10.9963 20.9135 10.7757 20.766 10.59 20.58L2 12V2H12L20.59 10.59C20.9625 10.9647 21.1716 11.4716 21.1716 12C21.1716 12.5284 20.9625 13.0353 20.59 13.41Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 7H7.01",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Vo=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 8V16M8 12H16",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z",stroke:"white",strokeWidth:"1.5"})]}),Ho=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"5",r:"1.5",fill:"#1D1A1A"}),e.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"#1D1A1A"}),e.jsx("circle",{cx:"12",cy:"19",r:"1.5",fill:"#1D1A1A"})]}),Qa=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),qo=({view:a,onNavigate:t,categories:s,subCategories:r,childCategories:l,brands:i,tags:p,onAddCategory:g,onUpdateCategory:u,onDeleteCategory:f,onAddSubCategory:w,onUpdateSubCategory:v,onDeleteSubCategory:k,onAddChildCategory:S,onUpdateChildCategory:F,onDeleteChildCategory:G,onAddBrand:q,onUpdateBrand:$,onDeleteBrand:_,onAddTag:j,onUpdateTag:z,onDeleteTag:L})=>{const[T,I]=n.useState(""),[E,W]=n.useState("all"),[C,A]=n.useState(10),[d,Z]=n.useState(1),[D,ne]=n.useState([]),[de,pe]=n.useState(null),[K,V]=n.useState(null),[U,ee]=n.useState(!1),[X,oe]=n.useState(null),[M,re]=n.useState({}),[be,me]=n.useState(!1),[Oe,Le]=n.useState(!1),fe=n.useRef(null),We=[{id:"catalog_categories",label:"Category",icon:e.jsx(Fo,{}),count:s.length},{id:"catalog_subcategories",label:"Sub Category",icon:e.jsx(Ro,{})},{id:"catalog_childcategories",label:"Child Category",icon:e.jsx(Bo,{})},{id:"catalog_brands",label:"Brand",icon:e.jsx(Wo,{})},{id:"catalog_tags",label:"Tags",icon:e.jsx(Uo,{})}],Pe=()=>{switch(a){case"catalog_categories":return s;case"catalog_subcategories":return r;case"catalog_childcategories":return l;case"catalog_brands":return i;case"catalog_tags":return p;default:return s}},ke=()=>{switch(a){case"catalog_categories":return"Category";case"catalog_subcategories":return"Sub Category";case"catalog_childcategories":return"Child Category";case"catalog_brands":return"Brand";case"catalog_tags":return"Tag";default:return"Category"}},m=n.useMemo(()=>{let P=Pe();if(T.trim()){const se=T.toLowerCase();P=P.filter(xe=>xe.name?.toLowerCase().includes(se))}return E!=="all"&&(P=P.filter(se=>se.status===E)),P},[a,s,r,l,i,p,T,E]),N=Math.ceil(m.length/C),O=n.useMemo(()=>{const P=(d-1)*C;return m.slice(P,P+C)},[m,d,C]);n.useEffect(()=>{Z(1),ne([])},[a,T,E]),n.useEffect(()=>{const P=se=>{se.target.closest("[data-dropdown]")||(pe(null),V(null),me(!1),Le(!1))};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const B=()=>{D.length===O.length?ne([]):ne(O.map(P=>P.id))},te=P=>{ne(se=>se.includes(P)?se.filter(xe=>xe!==P):[...se,P])},ae=P=>{if(oe(P||null),P)re({...P});else{const se={name:"",status:"Active",priority:100};a==="catalog_categories"&&(se.icon=""),a==="catalog_subcategories"&&(se.categoryId=s[0]?.id||""),a==="catalog_childcategories"&&(se.subCategoryId=r[0]?.id||""),a==="catalog_brands"&&(se.logo=""),re(se)}ee(!0)},le=P=>{P.preventDefault();const se=X?X.id:Date.now().toString(),xe={...M,id:se};switch(a){case"catalog_categories":X?u(xe):g(xe);break;case"catalog_subcategories":X?v(xe):w(xe);break;case"catalog_childcategories":X?F(xe):S(xe);break;case"catalog_brands":X?$(xe):q(xe);break;case"catalog_tags":X?z(xe):j(xe);break}ee(!1)},ie=P=>{if(window.confirm("Are you sure you want to delete this item?")){switch(a){case"catalog_categories":f(P);break;case"catalog_subcategories":k(P);break;case"catalog_childcategories":G(P);break;case"catalog_brands":_(P);break;case"catalog_tags":L(P);break}pe(null),V(null)}},Je=async P=>{const se=P.target.files?.[0];if(se){try{const xe=await zn(se,{quality:.8,maxDimension:600});re({...M,[a==="catalog_brands"?"logo":"icon"]:xe})}catch(xe){console.error("Failed to process image",xe),alert("Unable to process this image.")}P.target.value=""}},Ie=()=>{const P=[];if(N<=7)for(let se=1;se<=N;se++)P.push(se);else{for(let se=1;se<=5;se++)P.push(se);P.push("..."),P.push(N)}return P},ye=a==="catalog_categories"||a==="catalog_brands";return e.jsxs("div",{className:"bg-white dark:bg-gray-800 min-h-screen font-['Poppins']",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 mx-4 md:mx-2 sm:mx-4 lg:mx-6 my-5 py-5",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-5",children:[e.jsx("h1",{className:"text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-[22px] font-bold text-[#023337] dark:text-white tracking-[0.11px] font-['Lato']",children:"Catalog"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 lg:gap-3 sm:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"bg-[#f9f9f9] dark:bg-gray-700 h-[34px] rounded-lg flex items-center px-2 w-[292px]",children:[e.jsx(Oo,{}),e.jsx("input",{type:"text",placeholder:`Search ${ke()}`,value:T,onChange:P=>I(P.target.value),className:"bg-transparent text-[12px] text-[#7b7b7b] dark:text-gray-400 ml-2 flex-1 outline-none placeholder:text-[#7b7b7b] dark:placeholder-gray-400"}),e.jsx("button",{className:"text-[12px] text-black dark:text-white font-medium px-2",children:"Search"})]}),e.jsxs("div",{className:"relative","data-dropdown":!0,children:[e.jsxs("button",{onClick:()=>me(!be),className:"bg-[#f9f9f9] dark:bg-gray-700 rounded-lg flex items-center gap-2 px-3 py-2",children:[e.jsx("span",{className:"text-[12px] text-black dark:text-white",children:E==="all"?"All Status":E}),e.jsx(_e,{size:14,className:"text-gray-600 dark:text-gray-400"})]}),be&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-600 z-50 py-1 w-[120px]",children:[e.jsx("button",{onClick:()=>{W("all"),me(!1)},className:"w-full px-3 py-2 text-left text-[12px] text-black dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700",children:"All Status"}),e.jsx("button",{onClick:()=>{W("Active"),me(!1)},className:"w-full px-3 py-2 text-left text-[12px] text-black dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700",children:"Publish"}),e.jsx("button",{onClick:()=>{W("Inactive"),me(!1)},className:"w-full px-3 py-2 text-left text-[12px] text-black dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700",children:"Inactive"})]})]}),e.jsxs("div",{className:"relative","data-dropdown":!0,children:[e.jsxs("button",{onClick:()=>Le(!Oe),className:"bg-[#f9f9f9] dark:bg-gray-700 rounded-lg flex items-center gap-2 px-3 py-2 w-[119px]",children:[e.jsxs("span",{className:"text-[12px] text-black dark:text-white",children:[C," ",ke()]}),e.jsx(_e,{size:14,className:"text-gray-600 dark:text-gray-400"})]}),Oe&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-600 z-50 py-1 w-full",children:[10,20,50,100].map(P=>e.jsxs("button",{onClick:()=>{A(P),Le(!1),Z(1)},className:"w-full px-3 py-2 text-left text-[12px] text-black dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700",children:[P," ",ke()]},P))})]}),e.jsxs("button",{onClick:()=>ae(),className:"bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] h-[48px] rounded-lg flex items-center gap-1 px-4 min-w-[142px]",children:[e.jsx(Vo,{}),e.jsxs("span",{className:"text-[15px] font-bold text-white tracking-[-0.3px] font-['Lato']",children:["Add ",ke()]})]})]})]}),e.jsx("div",{className:"flex gap-0 border-b border-gray-200 dark:border-gray-600 mb-5 overflow-x-auto",children:We.map(P=>{const se=a===P.id;return e.jsxs("button",{onClick:()=>{t?.(P.id),Z(1)},className:`flex items-center gap-1 px-[22px] py-3 h-[48px] whitespace-nowrap transition-colors ${se?"border-b-2 border-[#38bdf8]":""}`,children:[e.jsx("span",{className:se?"text-[#38bdf8]":"text-black dark:text-white",children:P.icon}),e.jsxs("span",{className:`text-[16px] font-medium ${se?"bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] bg-clip-text text-transparent":"text-black dark:text-white"}`,children:[P.label,P.count!==void 0&&se&&`(${P.count})`]})]},P.id)})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-visible",children:e.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:e.jsxs("table",{className:"w-full min-w-[700px] text-sm",children:[e.jsx("thead",{className:"bg-[#E0F2FE] dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left w-[50px]",children:e.jsx("input",{type:"checkbox",checked:D.length===O.length&&O.length>0,onChange:B,className:"w-5 h-5 rounded border-[1.5px] border-[#050605] dark:border-gray-500 bg-white dark:bg-gray-600"})}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-black dark:text-white text-[16px]",children:"SL"}),ye&&e.jsx("th",{className:"px-4 py-3 text-left font-medium text-black dark:text-white text-[16px]",children:"Image/icon"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-black dark:text-white text-[16px]",children:"Name"}),a==="catalog_subcategories"&&e.jsx("th",{className:"px-4 py-3 text-left font-medium text-black dark:text-white text-[16px]",children:"Parent Category"}),a==="catalog_childcategories"&&e.jsx("th",{className:"px-4 py-3 text-left font-medium text-black dark:text-white text-[16px]",children:"Parent Sub Category"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-black dark:text-white text-[16px]",children:"Products"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-black dark:text-white text-[16px]",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-black dark:text-white text-[16px]",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-[#b9b9b9]/50 dark:divide-gray-600",children:O.length>0?O.map((P,se)=>e.jsxs("tr",{className:"h-[68px] hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:D.includes(P.id),onChange:()=>te(P.id),className:"w-5 h-5 rounded border-[1.5px] border-[#eaf8e7] dark:border-gray-500 bg-white dark:bg-gray-600"})}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] dark:text-gray-200 text-center",children:(d-1)*C+se+1}),ye&&e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden bg-gradient-to-r from-[#38bdf8] to-[#1e90ff]",children:P.icon||P.logo?e.jsx("img",{src:Ke(P.icon||P.logo),alt:P.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white",children:e.jsx(fa,{size:16})})})}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] dark:text-gray-200",children:P.name}),a==="catalog_subcategories"&&e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] dark:text-gray-200",children:s.find(xe=>xe.id===P.categoryId)?.name||"-"}),a==="catalog_childcategories"&&e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] dark:text-gray-200",children:r.find(xe=>xe.id===P.subCategoryId)?.name||"-"}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] dark:text-gray-200 text-center",children:P.productCount||5}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-flex px-[9px] py-0.5 rounded-[30px] text-[12px] font-medium ${P.status==="Active"?"bg-[#c1ffbc] text-[#085e00]":"bg-orange-100 text-orange-700"}`,children:P.status==="Active"?"Publish":"Inactive"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("div",{"data-dropdown":!0,children:e.jsx("button",{onClick:xe=>{if(xe.stopPropagation(),de===P.id)pe(null),V(null);else{const Ze=xe.currentTarget.getBoundingClientRect();V({top:Ze.bottom+4,left:Ze.right-160}),pe(P.id)}},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors inline-flex",children:e.jsx(Ho,{})})})})]},P.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-600 flex items-center justify-center mb-3",children:e.jsx(it,{size:24,className:"text-gray-400 dark:text-gray-500"})}),e.jsxs("p",{className:"font-medium",children:["No ",ke().toLowerCase(),"s found"]}),e.jsxs("p",{className:"text-sm",children:["Try adjusting your search or add a new ",ke().toLowerCase()]})]})})})})]})})}),m.length>0&&e.jsxs("div",{className:"flex items-center justify-center gap-[279px] mt-6",children:[e.jsxs("button",{onClick:()=>Z(P=>Math.max(1,P-1)),disabled:d===1,className:"bg-white dark:bg-gray-800 h-[42px] rounded-lg flex items-center gap-1 px-3 shadow-[0px_1px_3px_0px_rgba(0,0,0,0.2)] dark:shadow-[0px_1px_3px_0px_rgba(0,0,0,0.5)] disabled:opacity-50 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx(Qa,{}),e.jsx("span",{className:"text-[15px] font-medium text-black dark:text-white font-['Lato']",children:"Previous"})]}),e.jsx("div",{className:"flex items-center gap-3",children:Ie().map((P,se)=>e.jsx("button",{onClick:()=>typeof P=="number"&&Z(P),disabled:P==="...",className:`w-[36px] h-[36px] flex items-center justify-center rounded text-[15px] font-medium transition-colors ${d===P?"bg-[#dff5ff] dark:bg-gray-600 text-[#1e90ff] font-bold":P==="..."?"cursor-default text-[#023337] dark:text-white font-bold":"border border-[#d1d5db] dark:border-gray-600 text-[#023337] dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:P==="..."?".....":P},se))}),e.jsxs("button",{onClick:()=>Z(P=>Math.min(N,P+1)),disabled:d===N||N===0,className:"bg-white dark:bg-gray-800 h-[42px] rounded-lg flex items-center gap-1 px-3 shadow-[0px_1px_3px_0px_rgba(0,0,0,0.2)] dark:shadow-[0px_1px_3px_0px_rgba(0,0,0,0.5)] disabled:opacity-50 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("span",{className:"text-[15px] font-medium text-black dark:text-white font-['Lato']",children:"Next"}),e.jsx("div",{className:"rotate-180",children:e.jsx(Qa,{})})]})]})]}),de&&K&&(()=>{const P=Pe().find(se=>se.id===de);return P?e.jsxs("div",{"data-dropdown":!0,className:"fixed z-[9999] w-[160px] bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-600 py-2",style:{top:K.top,left:K.left,boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[e.jsxs("button",{onClick:()=>{ae(P),pe(null),V(null)},className:"flex items-center gap-3 w-full px-4 py-2.5 hover:bg-blue-50 dark:hover:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors",children:[e.jsx(As,{size:16,className:"text-blue-500"})," Edit"]}),e.jsxs("button",{onClick:()=>{ie(P.id),V(null)},className:"flex items-center gap-3 w-full px-4 py-2.5 hover:bg-red-50 dark:hover:bg-red-900/30 text-sm font-medium text-red-600 transition-colors",children:[e.jsx(lt,{size:16})," Delete"]})]}):null})(),U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-md p-3 sm:p-4 lg:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[X?"Edit":"Add"," ",ke()]}),e.jsx("button",{onClick:()=>ee(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded text-gray-900 dark:text-white",children:e.jsx(ge,{size:20})})]}),e.jsxs("form",{onSubmit:le,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:M.name||"",onChange:P=>re({...M,name:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-cyan-400 focus:border-transparent outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-400",placeholder:`Enter ${ke().toLowerCase()} name`})]}),a==="catalog_subcategories"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Parent Category *"}),e.jsxs("select",{required:!0,value:M.categoryId||"",onChange:P=>re({...M,categoryId:P.target.value,categoryName:s.find(se=>se.id===P.target.value)?.name}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-cyan-400 focus:border-transparent outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Category"}),s.map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]})]}),a==="catalog_childcategories"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Parent Sub Category *"}),e.jsxs("select",{required:!0,value:M.subCategoryId||"",onChange:P=>re({...M,subCategoryId:P.target.value,subCategoryName:r.find(se=>se.id===P.target.value)?.name}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-cyan-400 focus:border-transparent outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Sub Category"}),r.map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]})]}),ye&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a==="catalog_brands"?"Logo":"Icon"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center overflow-hidden bg-gray-50 dark:bg-gray-700",children:M.icon||M.logo?e.jsx("img",{src:M.icon||M.logo,alt:"preview",className:"w-full h-full object-cover"}):e.jsx(fa,{size:24,className:"text-gray-400 dark:text-gray-500"})}),e.jsx("button",{type:"button",onClick:()=>fe.current?.click(),className:"px-4 py-2 bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 text-sm",children:"Upload Image"}),e.jsx("input",{ref:fe,type:"file",accept:"image/*",onChange:Je,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),e.jsx("input",{type:"number",value:M.priority||100,onChange:P=>re({...M,priority:parseInt(P.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-cyan-400 focus:border-transparent outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:M.status||"Active",onChange:P=>re({...M,status:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-cyan-400 focus:border-transparent outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"Active",children:"Publish"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>ee(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] text-white rounded-lg hover:opacity-90",children:[X?"Update":"Create"," ",ke()]})]})]})]})})]})},Xl=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),Ko=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z",stroke:"#7B7B7B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M21 21L16.65 16.65",stroke:"#7B7B7B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Go=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M21 16V8.00002C20.9996 7.6493 20.9071 7.30483 20.7315 7.00119C20.556 6.69754 20.3037 6.44539 20 6.27002L13 2.27002C12.696 2.09449 12.3511 2.00208 12 2.00208C11.6489 2.00208 11.304 2.09449 11 2.27002L4 6.27002C3.69626 6.44539 3.44398 6.69754 3.26846 7.00119C3.09294 7.30483 3.00036 7.6493 3 8.00002V16C3.00036 16.3508 3.09294 16.6952 3.26846 16.9989C3.44398 17.3025 3.69626 17.5547 4 17.73L11 21.73C11.304 21.9056 11.6489 21.998 12 21.998C12.3511 21.998 12.696 21.9056 13 21.73L20 17.73C20.3037 17.5547 20.556 17.3025 20.7315 16.9989C20.9071 16.6952 20.9996 16.3508 21 16Z",stroke:"#333",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3.27002 6.96002L12 12.01L20.73 6.96002",stroke:"#333",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 22.08V12",stroke:"#333",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Yo=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M4 19.5C4 18.837 4.26339 18.2011 4.73223 17.7322C5.20107 17.2634 5.83696 17 6.5 17H20",stroke:"#38bdf8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M6.5 2H20V22H6.5C5.83696 22 5.20107 21.7366 4.73223 21.2678C4.26339 20.7989 4 20.163 4 19.5V4.5C4 3.83696 4.26339 3.20107 4.73223 2.73223C5.20107 2.26339 5.83696 2 6.5 2Z",stroke:"#38bdf8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Jo=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M10.29 3.86001L1.82002 18C1.64539 18.3024 1.55299 18.6453 1.55201 18.9945C1.55103 19.3437 1.64151 19.6871 1.81445 19.9905C1.98738 20.2939 2.23675 20.5467 2.53773 20.7239C2.83871 20.901 3.18082 20.9962 3.53002 21H20.47C20.8192 20.9962 21.1613 20.901 21.4623 20.7239C21.7633 20.5467 22.0127 20.2939 22.1856 19.9905C22.3585 19.6871 22.449 19.3437 22.448 18.9945C22.4471 18.6453 22.3547 18.3024 22.18 18L13.71 3.86001C13.5318 3.56611 13.2807 3.32313 12.9812 3.15449C12.6817 2.98585 12.3438 2.89726 12 2.89726C11.6563 2.89726 11.3184 2.98585 11.0188 3.15449C10.7193 3.32313 10.4682 3.56611 10.29 3.86001Z",stroke:"#F59E0B",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 9V13",stroke:"#F59E0B",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 17H12.01",stroke:"#F59E0B",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Zo=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M23 6L13.5 15.5L8.5 10.5L1 18",stroke:"#10B981",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M17 6H23V12",stroke:"#10B981",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Qo=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M23 6L13.5 15.5L8.5 10.5L1 18",stroke:"#F97316",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M17 6H23V12",stroke:"#F97316",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Xo=({products:a,tenantId:t,user:s})=>{const[r,l]=n.useState(""),[i,p]=n.useState("stock-low-high"),[g,u]=n.useState(5),[f,w]=n.useState(10),[v,k]=n.useState(!1),S=n.useRef(null);n.useEffect(()=>{(async()=>{if(t)try{const E=await fetch(`/api/tenant-data/${t}/inventory_settings`);if(E.ok){const W=await E.json();W.data&&(W.data.lowStockThreshold&&u(W.data.lowStockThreshold),W.data.expireThreshold&&w(W.data.expireThreshold))}}catch(E){console.error("Failed to load inventory settings:",E)}})()},[t]);const F=n.useCallback(async(I,E)=>{if(!t){console.warn("Cannot save thresholds: tenantId is undefined");return}try{const W=await fetch(`/api/tenant-data/${t}/inventory_settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{lowStockThreshold:I,expireThreshold:E}})});if(W.ok)console.log(`[Inventory] Saved thresholds: lowStock=${I}, expire=${E} for tenant ${t}`),he.success("Threshold settings saved");else{const C=await W.json().catch(()=>({}));console.error("Failed to save settings:",C),he.error("Failed to save settings")}}catch(W){console.error("Failed to save inventory settings:",W),he.error("Failed to save settings")}},[t]),G=I=>{u(I),S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{F(I,f)},1e3)},q=I=>{w(I),S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{F(g,I)},1e3)},$=n.useMemo(()=>{const I=a.length,E=a.reduce((Z,D)=>Z+(D.stock||0),0),W=a.filter(Z=>(Z.stock||0)<g).length,C=a.filter(Z=>(Z.stock||0)===0).length,A=a.reduce((Z,D)=>Z+(D.costPrice||0)*(D.stock||0),0),d=a.reduce((Z,D)=>Z+(D.price||0)*(D.stock||0),0);return{totalProducts:I,totalUnits:E,lowStockCount:W,outOfStockCount:C,inventoryValue:A,inventorySaleValue:d}},[a,g]),_=n.useMemo(()=>{let I=[...a];if(r){const E=r.toLowerCase();I=I.filter(W=>W.name.toLowerCase().includes(E)||W.category?.toLowerCase().includes(E))}switch(i){case"stock-low-high":I.sort((E,W)=>(E.stock||0)-(W.stock||0));break;case"stock-high-low":I.sort((E,W)=>(W.stock||0)-(E.stock||0));break;case"price-low-high":I.sort((E,W)=>(E.price||0)-(W.price||0));break;case"price-high-low":I.sort((E,W)=>(W.price||0)-(E.price||0));break}return I.slice(0,4)},[a,r,i]),j=n.useMemo(()=>a.slice(0,5).map((I,E)=>({...I,expireDays:35+E*30})),[a]),z=$.lowStockCount===0,L=j.filter(I=>I.expireDays<=f).length>0,T=[{value:"stock-low-high",label:"Stock low to high"},{value:"stock-high-low",label:"Stock high to low"},{value:"price-low-high",label:"Price low to high"},{value:"price-high-low",label:"Price high to low"}];return e.jsx("div",{className:"bg-white min-h-screen font-['Poppins']",children:e.jsxs("div",{className:"px-5 py-5",children:[e.jsx("h1",{className:"text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-[22px] font-bold text-[#023337] tracking-[0.11px] font-['Lato'] mb-5",children:"Inventory"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-5",children:[e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg p-4 flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-[16px] font-medium text-black",children:"Products"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-[24px] font-medium text-black",children:$.totalProducts}),e.jsx("p",{className:"text-[12px] text-[#979797]",children:"Category wise"})]})]}),e.jsx("div",{className:"bg-white rounded-lg w-[44px] h-[44px] flex items-center justify-center",children:e.jsx(Go,{})})]}),e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg p-4 flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-[16px] font-medium text-black",children:"Total unit on hand"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-[24px] font-medium text-black",children:$.totalUnits}),e.jsx("p",{className:"text-[12px] text-[#979797]",children:"Products entire shop"})]})]}),e.jsx("div",{className:"bg-white rounded-lg w-[44px] h-[44px] flex items-center justify-center",children:e.jsx(Yo,{})})]}),e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg p-4 flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-[16px] font-medium text-black",children:"Low stock"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-[24px] font-medium text-black",children:$.lowStockCount}),e.jsxs("p",{className:"text-[12px] text-[#979797]",children:[$.outOfStockCount," out / ",$.lowStockCount," low (","<",g,")"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg w-[44px] h-[44px] flex items-center justify-center",children:e.jsx(Jo,{})})]}),e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg p-4 flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-[16px] font-medium text-black",children:"Capital value"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-[24px] font-medium text-black",children:["৳ ",$.inventoryValue.toLocaleString("en-IN")]}),e.jsx("p",{className:"text-[12px] text-[#979797]",children:"Cost Price"})]})]}),e.jsx("div",{className:"bg-white rounded-lg w-[44px] h-[44px] flex items-center justify-center",children:e.jsx(Zo,{})})]}),e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg p-4 flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-[16px] font-medium text-black",children:"Inventory value"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-[24px] font-medium text-black",children:["৳ ",$.inventorySaleValue.toLocaleString("en-IN")]}),e.jsx("p",{className:"text-[12px] text-[#979797]",children:"Selling Price"})]})]}),e.jsx("div",{className:"bg-white rounded-lg w-[44px] h-[44px] flex items-center justify-center",children:e.jsx(Qo,{})})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-5",children:[e.jsxs("div",{className:"bg-[#f9f9f9] h-[34px] rounded-lg flex items-center px-2 flex-1 min-w-[200px] max-w-[300px]",children:[e.jsx(Ko,{}),e.jsx("input",{type:"text",placeholder:"Product Name",value:r,onChange:I=>l(I.target.value),className:"bg-transparent text-[12px] text-[#7b7b7b] ml-2 flex-1 outline-none placeholder:text-[#7b7b7b]"}),e.jsx("button",{className:"text-[12px] text-black font-medium px-2",children:"Search"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[12px] text-[#7b7b7b]",children:"Sort by"}),e.jsxs("div",{className:"relative","data-dropdown":!0,children:[e.jsxs("button",{onClick:()=>k(!v),className:"bg-[#f9f9f9] rounded-lg flex items-center gap-2 px-3 py-2 w-[159px]",children:[e.jsx("span",{className:"text-[12px] text-black",children:T.find(I=>I.value===i)?.label}),e.jsx(_e,{size:14,className:"text-gray-600"})]}),v&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-lg shadow-lg border z-50 py-1 w-full",children:T.map(I=>e.jsx("button",{onClick:()=>{p(I.value),k(!1)},className:"w-full px-3 py-2 text-left text-[12px] hover:bg-gray-50",children:I.label},I.value))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[12px] text-black",children:"Set the low stock threshold at"}),e.jsx("input",{type:"number",value:g,onChange:I=>G(parseInt(I.target.value)||5),className:"bg-[#f9f9f9] h-[32px] w-[80px] rounded-lg text-center text-[12px] text-black outline-none border border-transparent focus:border-[#ff6a00] transition-colors",min:"1"}),e.jsx("span",{className:"text-[12px] text-black",children:"Unit"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[12px] text-black",children:"Set the Low Expire threshold at"}),e.jsx("input",{type:"number",value:f,onChange:I=>q(parseInt(I.target.value)||10),className:"bg-[#f9f9f9] h-[32px] w-[80px] rounded-lg text-center text-[12px] text-black outline-none border border-transparent focus:border-[#ff6a00] transition-colors",min:"1"}),e.jsx("span",{className:"text-[12px] text-black",children:"Days"})]})]}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-3 sm:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[700px] text-sm",children:[e.jsx("thead",{className:"bg-[#E0F2FE]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-medium text-black text-[16px]",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-black text-[16px]",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-black text-[16px]",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-black text-[16px]",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-black text-[16px]",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-[#b9b9b9]/50",children:_.length>0?_.map((I,E)=>e.jsxs("tr",{className:"h-[68px] hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] max-w-[263px]",children:e.jsx("p",{className:"line-clamp-2",children:I.name})}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] text-center",children:I.category||"Uncategorized"}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] text-center",children:I.price||0}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] text-center",children:I.stock||0}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-flex px-[9px] py-0.5 rounded-[30px] text-[12px] font-medium ${I.status==="Active"?"bg-[#c1ffbc] text-[#085e00]":"bg-orange-100 text-orange-700"}`,children:I.status==="Active"?"Publish":"Draft"})})]},`stock-${I.id}-${E}`)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-12 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Ut,{size:40,className:"text-gray-300 mb-3"}),e.jsx("p",{children:"No products found"})]})})})})]})})}),e.jsx("div",{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[700px] text-sm",children:[e.jsx("thead",{className:"bg-[#E0F2FE]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-medium text-black text-[16px]",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-black text-[16px]",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-black text-[16px]",children:"Expire in"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-black text-[16px]",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-black text-[16px]",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-[#b9b9b9]/50",children:j.map((I,E)=>e.jsxs("tr",{className:"h-[68px] hover:bg-gray-50 transition-colors border-b border-[#b9b9b9]/50",children:[e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] max-w-[263px]",children:e.jsx("p",{className:"line-clamp-2",children:I.name})}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] text-center",children:I.category||"Uncategorized"}),e.jsxs("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] text-center",children:[I.expireDays," Days"]}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-[#1d1a1a] text-center",children:I.stock||0}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-flex px-[9px] py-0.5 rounded-[30px] text-[12px] font-medium ${I.status==="Active"?"bg-[#c1ffbc] text-[#085e00]":"bg-orange-100 text-orange-700"}`,children:I.status==="Active"?"Publish":"Draft"})})]},`expiry-${I.id}-${E}`))})]})})})]}),e.jsxs("div",{className:"xl:w-[450px] flex flex-col gap-3 sm:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-[0px_4px_5px_0px_rgba(0,0,0,0.11)] p-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-[16px] font-medium text-black",children:"Inventory alerts"}),e.jsx("p",{className:"text-[12px] text-[#979797]",children:"Review the most critical SKUs and plan replenishment"})]}),e.jsx("div",{className:`p-4 rounded ${z?"bg-[#ecfdf5]":"bg-red-50"}`,children:e.jsx("p",{className:`text-[12px] font-medium text-center ${z?"text-[#00a557]":"text-red-600"}`,children:z?"Inventory looks healthy: No low-stock items.":`${$.lowStockCount} items need attention. ${$.outOfStockCount} out of stock.`})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-[0px_4px_5px_0px_rgba(0,0,0,0.11)] p-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-[16px] font-medium text-black",children:"Expired date alerts"}),e.jsx("p",{className:"text-[12px] text-[#979797]",children:"Review the most critical SKUs and plan replenishment"})]}),e.jsx("div",{className:`p-4 rounded ${L?"bg-amber-50":"bg-[#ecfdf5]"}`,children:e.jsx("p",{className:`text-[12px] font-medium text-center ${L?"text-amber-600":"text-[#00a557]"}`,children:L?`Some items are expiring within ${f} days.`:"Inventory looks healthy: No low-stock items."})})]})]})]})]})})},ei=Object.freeze(Object.defineProperty({__proto__:null,default:Xo},Symbol.toStringTag,{value:"Module"})),ea="https://allinbangla.com",is=new Map,el=60*1e3;function ta(a){const t=is.get(a);return t&&t.expires>Date.now()?t.data:(is.delete(a),null)}function sa(a,t,s=el){is.set(a,{data:t,expires:Date.now()+s})}function Cs(a){for(const t of is.keys())t.includes(a)&&is.delete(t)}let Ht="";function Ss(a){Ht=a}function Ft(a,t){const s=ea.startsWith("http")?ea:`http://${ea}`,r=new URL(a,s);return t&&Object.entries(t).forEach(([l,i])=>{i!=null&&i!==""&&r.searchParams.set(l,String(i))}),r.toString()}function Rt(a){const t={...a};Ht&&(t["X-Tenant-Id"]=Ht);const s=localStorage.getItem("admin_auth_token");return s&&(t.Authorization=`Bearer ${s}`),t}async function Bt(a){if(!a.ok){const t=await a.json().catch(()=>({}));throw new Error(t.message||`Request failed with status ${a.status}`)}return a.json()}const Wt={async list(a={}){const t=`expenses:list:${JSON.stringify(a)}:${Ht}`,s=ta(t);if(s)return s;const r=Ft("/api/expenses",a),l=await fetch(r,{headers:Rt()}),i=await Bt(l);return sa(t,i),i},async summary(a={}){const t=`expenses:summary:${JSON.stringify(a)}:${Ht}`,s=ta(t);if(s)return s;const r=Ft("/api/expenses/summary",a),l=await fetch(r,{headers:Rt()}),i=await Bt(l);return sa(t,i),i},async loadAll(a={}){const[t,s]=await Promise.all([this.list(a),this.summary({from:a.from,to:a.to})]);return{list:t,summary:s}},async getNetProfitReport(a={}){const t=`expenses:profitLoss:${JSON.stringify(a)}:${Ht}`,s=ta(t);if(s)return s;const r=Ft("/api/reports/profit-loss",a),l=await fetch(r,{headers:Rt()}),i=await Bt(l),p=i.productSellingPrice-i.purchaseCost,g=p+i.otherIncome-i.totalExpense,u={...i,profitFromSell:p,netProfit:g};return sa(t,u),u},async create(a){Cs("expenses:");const t=await fetch(Ft("/api/expenses"),{method:"POST",headers:Rt({"Content-Type":"application/json"}),body:JSON.stringify(a)});return Bt(t)},async update(a,t){Cs("expenses:");const s=await fetch(Ft(`/api/expenses/${a}`),{method:"PUT",headers:Rt({"Content-Type":"application/json"}),body:JSON.stringify(t)});return Bt(s)},async remove(a){Cs("expenses:");const t=await fetch(Ft(`/api/expenses/${a}`),{method:"DELETE",headers:Rt()});return Bt(t)},clearCache(){Cs("expenses:")}},tl="https://allinbangla.com",qt=new Map,sl=60*1e3;function aa(a){const t=qt.get(a);return t&&t.expires>Date.now()?t.data:(qt.delete(a),null)}function ra(a,t,s=sl){qt.set(a,{data:t,expires:Date.now()+s})}function rs(a){if(a)for(const t of qt.keys())t.includes(a)&&qt.delete(t);else qt.clear()}let Kt="";function Xa(a){Kt=a}function St(a,t){const s=tl,r=new URL(a,s);return t&&Object.entries(t).forEach(([l,i])=>{i!=null&&r.searchParams.set(l,String(i))}),r.toString()}function Lt(a){const t={...a};Kt&&(t["X-Tenant-Id"]=Kt);const s=localStorage.getItem("admin_auth_token");return s&&(t.Authorization=`Bearer ${s}`),t}const gt={async list(a={}){const t=`incomes:list:${JSON.stringify(a)}:${Kt}`,s=aa(t);if(s)return s;const r=St("/api/incomes",a),l=await fetch(r,{headers:Lt()});if(!l.ok)return{items:[],total:0};const i=await l.json();return ra(t,i),i},async summary(a={}){const t=`incomes:summary:${JSON.stringify(a)}:${Kt}`,s=aa(t);if(s)return s;const r=St("/api/incomes/summary",a),l=await fetch(r,{headers:Lt()});if(!l.ok)return{totalAmount:0,totalTransactions:0,categories:0};const i=await l.json();return ra(t,i),i},async loadAll(a={}){const[t,s,r]=await Promise.all([this.list(a),this.summary({from:a.from,to:a.to}),this.listCategories()]);return{list:t,summary:s,categories:r}},async listCategories(){const a=`incomes:categories:${Kt}`,t=aa(a);if(t)return t;const s=await fetch(St("/api/incomes/categories"),{headers:Lt()});if(!s.ok)return[];const r=await s.json();return ra(a,r,300*1e3),r},async createCategory(a){rs("incomes:categories");const t=await fetch(St("/api/incomes/categories"),{method:"POST",headers:Lt({"Content-Type":"application/json"}),body:JSON.stringify({name:a})});if(!t.ok)throw new Error("Failed to create income category");return t.json()},async create(a){rs("incomes:");const t=await fetch(St("/api/incomes"),{method:"POST",headers:Lt({"Content-Type":"application/json"}),body:JSON.stringify(a)});if(!t.ok)throw new Error("Failed to create income");return t.json()},async update(a,t){rs("incomes:");const s=await fetch(St(`/api/incomes/${a}`),{method:"PUT",headers:Lt({"Content-Type":"application/json"}),body:JSON.stringify(t)});if(!s.ok)throw new Error("Failed to update income");return s.json()},async remove(a){rs("incomes:");const t=await fetch(St(`/api/incomes/${a}`),{method:"DELETE",headers:Lt()});if(!t.ok)throw new Error("Failed to delete income");return t.json()},clearCache(){rs("incomes:")}},al="https://allinbangla.com";let Ms="";function na(a){Ms=a}function Ls(a,t){return new URL(a,al).toString()}function Ps(a){const t={...a};Ms&&(t["X-Tenant-Id"]=Ms);const s=localStorage.getItem("admin_auth_token");return s&&(t.Authorization=`Bearer ${s}`),t}const Ds={async list(){const a=Ls("/api/expenses/categories/list"),t=await fetch(a,{headers:Ps()});if(!t.ok)throw new Error("Failed to fetch categories");return t.json()},async create(a){const t=Ls("/api/expenses/categories/create");console.log("[CategoryService] Creating category at:",t,"with tenantId:",Ms);const s=await fetch(t,{method:"POST",headers:Ps({"Content-Type":"application/json"}),body:JSON.stringify(a)});if(!s.ok){const l=await s.text();throw console.error("[CategoryService] Create failed:",s.status,l),new Error(`Failed to create category: ${s.status} ${l}`)}const r=await s.json();return console.log("[CategoryService] Category created:",r),r},async update(a,t){const s=await fetch(Ls(`/api/expenses/categories/${a}`),{method:"PUT",headers:Ps({"Content-Type":"application/json"}),body:JSON.stringify(t)});if(!s.ok)throw new Error("Failed to update category");return s.json()},async remove(a){const t=await fetch(Ls(`/api/expenses/categories/${a}`),{method:"DELETE",headers:Ps()});if(!t.ok)throw new Error("Failed to delete category");return t.json()}},mr=({isOpen:a,onClose:t,onApply:s,initialDateRange:r})=>{const[l,i]=n.useState("custom"),[p,g]=n.useState(""),[u,f]=n.useState(""),w=n.useRef(null),v=[{id:"custom",label:"Custom"},{id:"yesterday",label:"Yesterday"},{id:"last7days",label:"Last 7 Days"},{id:"last30days",label:"Last 30 Days"},{id:"lastyear",label:"Last Year"}],k=$=>{const _=new Date;switch(_.setHours(0,0,0,0),$){case"yesterday":{const j=new Date(_);return j.setDate(j.getDate()-1),{startDate:j,endDate:j}}case"last7days":{const j=new Date(_);return j.setDate(j.getDate()-7),{startDate:j,endDate:_}}case"last30days":{const j=new Date(_);return j.setDate(j.getDate()-30),{startDate:j,endDate:_}}case"lastyear":{const j=new Date(_.getFullYear()-1,0,1),z=new Date(_.getFullYear()-1,11,31);return{startDate:j,endDate:z}}default:return{startDate:null,endDate:null}}},S=$=>{if(i($),$!=="custom"){const _=k($);_.startDate&&g(F(_.startDate)),_.endDate&&f(F(_.endDate))}},F=$=>{const _=$.getFullYear(),j=String($.getMonth()+1).padStart(2,"0"),z=String($.getDate()).padStart(2,"0");return`${_}-${j}-${z}`},G=$=>{if(!$)return null;const _=new Date($);return isNaN(_.getTime())?null:_},q=()=>{const $={startDate:G(p),endDate:G(u)};s($,l),t()};return n.useEffect(()=>{const $=_=>{w.current&&!w.current.contains(_.target)&&t()};return a&&document.addEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}},[a,t]),n.useEffect(()=>{r&&(r.startDate&&g(F(r.startDate)),r.endDate&&f(F(r.endDate)))},[r]),a?e.jsxs("div",{ref:w,style:{position:"absolute",top:"100%",right:0,marginTop:"8px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0px 4px 11.4px rgba(0, 0, 0, 0.09)",width:"280px",padding:"10px 16px 16px 16px",zIndex:100,fontFamily:'"Poppins", sans-serif'},children:[e.jsxs("div",{style:{display:"flex",gap:"20px"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:v.map($=>e.jsx("button",{onClick:()=>S($.id),style:{display:"flex",alignItems:"center",padding:$.id==="custom"?"4px 8px":"4px 0",backgroundColor:l===$.id&&$.id==="custom"?"#f9f9f9":"transparent",border:"none",borderRadius:"8px",cursor:"pointer",fontFamily:($.id==="custom",'"Poppins", sans-serif'),fontWeight:($.id==="custom",500),fontSize:"12px",color:l===$.id?"#1e90ff":"black",textAlign:"left",transition:"all 0.15s ease"},children:$.label},$.id))}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",flex:1},children:[e.jsx("p",{style:{fontFamily:'"Poppins", sans-serif',fontWeight:300,fontSize:"12px",color:"black",margin:0},children:"Select Date Range"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("label",{style:{fontFamily:'"Poppins", sans-serif',fontWeight:500,fontSize:"12px",color:"black"},children:"Start Date"}),e.jsx("input",{type:"date",value:p,onChange:$=>{g($.target.value),i("custom")},style:{width:"100%",height:"24px",padding:"0 7px",border:"0.7px solid #f8f8f8",borderRadius:"8px",fontFamily:'"Poppins", sans-serif',fontWeight:500,fontSize:"12px",color:p?"black":"#c7c7c7",outline:"none",boxSizing:"border-box"},placeholder:"DD / MM / YYYY"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("label",{style:{fontFamily:'"Poppins", sans-serif',fontWeight:500,fontSize:"12px",color:"black"},children:"End Date"}),e.jsx("input",{type:"date",value:u,onChange:$=>{f($.target.value),i("custom")},style:{width:"100%",height:"24px",padding:"0 7px",border:"0.7px solid #f8f8f8",borderRadius:"8px",fontFamily:'"Poppins", sans-serif',fontWeight:500,fontSize:"12px",color:u?"black":"#c7c7c7",outline:"none",boxSizing:"border-box"},placeholder:"DD / MM / YYYY"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[e.jsx("button",{onClick:t,style:{flex:1,height:"24px",border:"0.5px solid black",borderRadius:"8px",backgroundColor:"transparent",fontFamily:'"Poppins", sans-serif',fontWeight:500,fontSize:"12px",color:"black",cursor:"pointer",transition:"all 0.15s ease"},children:"Cancel"}),e.jsx("button",{onClick:q,disabled:!p||!u,style:{flex:1,height:"24px",border:"none",borderRadius:"8px",background:"linear-gradient(90deg, #38bdf8 0%, #1e90ff 100%)",fontFamily:'"Poppins", sans-serif',fontWeight:500,fontSize:"12px",color:"white",cursor:p&&u?"pointer":"not-allowed",opacity:p&&u?1:.6,transition:"all 0.15s ease"},children:"Apply"})]})]}):null},rl=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 22H21",stroke:"url(#paint0_linear)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M5.59998 18.3999V13.9199",stroke:"url(#paint1_linear)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9.39996 18.4V10.32",stroke:"url(#paint2_linear)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M13.2 18.4001V13.9201",stroke:"url(#paint3_linear)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M17 18.4V10.32",stroke:"url(#paint4_linear)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M5.59998 9.92L8.63998 6L12.44 9.8L17 4",stroke:"url(#paint5_linear)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"paint0_linear",x1:"3",y1:"22",x2:"21",y2:"22",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#38bdf8"}),e.jsx("stop",{offset:"1",stopColor:"#1e90ff"})]}),e.jsxs("linearGradient",{id:"paint1_linear",x1:"5.59998",y1:"13.9199",x2:"5.59998",y2:"18.3999",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#38bdf8"}),e.jsx("stop",{offset:"1",stopColor:"#1e90ff"})]}),e.jsxs("linearGradient",{id:"paint2_linear",x1:"9.39996",y1:"10.32",x2:"9.39996",y2:"18.4",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#38bdf8"}),e.jsx("stop",{offset:"1",stopColor:"#1e90ff"})]}),e.jsxs("linearGradient",{id:"paint3_linear",x1:"13.2",y1:"13.9201",x2:"13.2",y2:"18.4001",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#38bdf8"}),e.jsx("stop",{offset:"1",stopColor:"#1e90ff"})]}),e.jsxs("linearGradient",{id:"paint4_linear",x1:"17",y1:"10.32",x2:"17",y2:"18.4",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#38bdf8"}),e.jsx("stop",{offset:"1",stopColor:"#1e90ff"})]}),e.jsxs("linearGradient",{id:"paint5_linear",x1:"5.59998",y1:"4",x2:"17",y2:"4",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#38bdf8"}),e.jsx("stop",{offset:"1",stopColor:"#1e90ff"})]})]})]}),er=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22 6V8.42C22 10 21 11 19.42 11H16V4.01C16 2.9 16.91 2 18.02 2C19.11 2.01 20.11 2.45 20.83 3.17C21.55 3.9 22 4.9 22 6Z",stroke:"black",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 7V21C2 21.83 2.94 22.3 3.6 21.8L5.31 20.52C5.71 20.22 6.27 20.26 6.63 20.62L8.29 22.29C8.68 22.68 9.32 22.68 9.71 22.29L11.39 20.61C11.74 20.26 12.3 20.22 12.69 20.52L14.4 21.8C15.06 22.29 16 21.82 16 21V4C16 2.9 16.9 2 18 2H7H6C3 2 2 3.79 2 6V7Z",stroke:"black",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 13.01H12",stroke:"black",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 9.01H12",stroke:"black",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M5.99609 13H6.00508",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M5.99609 9H6.00508",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),tr=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"black",strokeWidth:"1.5"}),e.jsx("text",{x:"12",y:"16",textAnchor:"middle",fill:"black",fontSize:"12",fontWeight:"bold",children:"৳"}),e.jsx("path",{d:"M15 5L12 2L9 5",stroke:"black",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),sr=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M7.5 7.67V6.7C7.5 4.45 9.31 2.24 11.56 2.03C14.24 1.77 16.5 3.88 16.5 6.51V7.89",stroke:"black",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 22H15C19.02 22 19.74 20.39 19.95 18.43L20.7 12.43C20.97 9.99 20.27 8 16 8H8C3.73 8 3.03 9.99 3.3 12.43L4.05 18.43C4.26 20.39 4.98 22 9 22Z",stroke:"black",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M15.4955 12H15.5045",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8.49451 12H8.50349",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),nl=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M4 19.5C4 18.837 4.26339 18.2011 4.73223 17.7322C5.20107 17.2634 5.83696 17 6.5 17H20",stroke:"black",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M6.5 2H20V22H6.5C5.83696 22 5.20107 21.7366 4.73223 21.2678C4.26339 20.7989 4 20.163 4 19.5V4.5C4 3.83696 4.26339 3.20107 4.73223 2.73223C5.20107 2.26339 5.83696 2 6.5 2Z",stroke:"black",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),ol=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M8 2V5",stroke:"black",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 2V5",stroke:"black",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M21 8.5V17C21 20 19.5 22 16 22H8C4.5 22 3 20 3 17V8.5C3 5.5 4.5 3.5 8 3.5H16C19.5 3.5 21 5.5 21 8.5Z",stroke:"black",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 11H16",stroke:"black",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 16H12",stroke:"black",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})]}),oa=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M8 12H16",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 16V8",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),la=()=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M5.33 8H10.67",stroke:"#38bdf8",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 10.67V5.33",stroke:"#38bdf8",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M6 14.67H10C13.33 14.67 14.67 13.33 14.67 10V6C14.67 2.67 13.33 1.33 10 1.33H6C2.67 1.33 1.33 2.67 1.33 6V10C1.33 13.33 2.67 14.67 6 14.67Z",stroke:"#38bdf8",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"})]}),ia=()=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M4.67 4.67V2.67C4.67 1.93 5.26 1.33 6 1.33H10C10.74 1.33 11.33 1.93 11.33 2.67V4.67",stroke:"black",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4.67 12H3.33C2.23 12 1.33 11.1 1.33 10V7.33C1.33 6.23 2.23 5.33 3.33 5.33H12.67C13.77 5.33 14.67 6.23 14.67 7.33V10C14.67 11.1 13.77 12 12.67 12H11.33",stroke:"black",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10 9.33H6C5.26 9.33 4.67 9.93 4.67 10.67V13.33C4.67 14.07 5.26 14.67 6 14.67H10C10.74 14.67 11.33 14.07 11.33 13.33V10.67C11.33 9.93 10.74 9.33 10 9.33Z",stroke:"black",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M11.33 10H12C12.37 10 12.67 9.7 12.67 9.33V8.67C12.67 8.3 12.37 8 12 8H11.33",stroke:"black",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"})]}),ca=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"5",r:"1.5",fill:"#1d1a1a"}),e.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"#1d1a1a"}),e.jsx("circle",{cx:"12",cy:"19",r:"1.5",fill:"#1d1a1a"})]}),da=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M15 19L8 12L15 5",stroke:"black",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),xa=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 5L16 12L9 19",stroke:"black",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),ll=({orders:a=[],products:t=[],user:s,onLogout:r,tenantId:l,initialTab:i})=>{const[p,g]=n.useState("profit"),[u,f]=n.useState("month"),[w,v]=n.useState(!1);n.useEffect(()=>{const o=setTimeout(()=>v(!0),100);return()=>clearTimeout(o)},[]);const[k,S]=n.useState(!1),[F,G]=n.useState({startDate:null,endDate:null}),[q,$]=n.useState(new Date),_=n.useMemo(()=>{const o=new Date;switch(o.setHours(23,59,59,999),u){case"day":{const h=new Date(o);return h.setHours(0,0,0,0),{start:h,end:o}}case"month":{const h=new Date(q.getFullYear(),q.getMonth(),1),y=new Date(q.getFullYear(),q.getMonth()+1,0,23,59,59,999);return{start:h,end:y}}case"year":{const h=new Date(o.getFullYear(),0,1),y=new Date(o.getFullYear(),11,31,23,59,59,999);return{start:h,end:y}}case"custom":return{start:F.startDate||new Date(0),end:F.endDate||o};case"all":default:return{start:new Date(0),end:o}}},[u,F,q]),j=o=>{if(!o)return!0;const h=new Date(o),{start:y,end:R}=_;return h>=y&&h<=R},z=()=>{const{start:o}=_,h=y=>y.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});return u==="day"?h(o):u==="month"?o.toLocaleDateString("en-GB",{month:"long",year:"numeric"}):u==="year"?o.getFullYear().toString():u==="custom"&&F.startDate&&F.endDate?`${h(F.startDate)} - ${h(F.endDate)}`:"All Time"},[L,T]=n.useState([]),[I,E]=n.useState([]),[W]=n.useState(!1),[C,A]=n.useState(1),[d,Z]=n.useState(""),[D,ne]=n.useState(!1),[de,pe]=n.useState(!1),[K,V]=n.useState(""),[U,ee]=n.useState(!1),[X,oe]=n.useState(null),[M,re]=n.useState({status:"Published"}),[be,me]=n.useState(new Set),[Oe,Le]=n.useState(null),[fe,We]=n.useState(null),Pe=10;n.useEffect(()=>{l&&(Ss(l),Xa(l),na(l))},[l]),n.useEffect(()=>{if(!l)return;(async()=>{const{start:h,end:y}=_;Wt.list({page:1,pageSize:500,from:h.toISOString(),to:y.toISOString()}).then(R=>{T(R.items)}).catch(console.error),Ds.list().then(R=>{E(R.items)}).catch(console.error),gt.list({page:1,pageSize:500,from:h.toISOString(),to:y.toISOString()}).then(R=>{O(R.items)}).catch(console.error),gt.listCategories().then(R=>{te(R)}).catch(console.error)})()},[l,_]),n.useEffect(()=>{(async()=>{if(p==="expense"&&l){Ss(l),na(l);try{if(I.length===0){const h=await Ds.list();E(h.items)}}catch(h){console.error("Failed to load expense categories:",h)}}})()},[p,l,I.length]);const ke=n.useMemo(()=>{const o=L.reduce((y,R)=>y+R.amount,0),h=new Set(L.map(y=>y.category)).size;return{totalAmount:o,totalTransactions:L.length,categories:h>0?h:I.length}},[L,I]);n.useMemo(()=>{const o=(C-1)*Pe;return L.slice(o,o+Pe)},[L,C]);const m=Math.ceil(L.length/Pe)||1,[N,O]=n.useState([]),[B,te]=n.useState([]),[ae]=n.useState(!1),[le,ie]=n.useState(1),[Je,Ie]=n.useState(""),[ye,P]=n.useState(!1),[se,xe]=n.useState(!1),[Ze,jt]=n.useState(""),[Ue,Ee]=n.useState(null),[je,x]=n.useState({status:"Published"}),[H,Y]=n.useState(new Set),[ve,Ne]=n.useState(null),ce=10;n.useEffect(()=>{(async()=>{if(p==="income"&&l)try{if(B.length===0){const h=await gt.listCategories();te(h)}}catch(h){console.error("Failed to load income categories:",h)}})()},[p,l,B.length]);const Ge=n.useMemo(()=>{const o=N.reduce((y,R)=>y+R.amount,0),h=new Set(N.map(y=>y.category)).size;return{totalAmount:o,totalTransactions:N.length,categories:h>0?h:B.length}},[N,B]),Fe=Math.ceil(N.length/ce)||1,[Re,Ve]=n.useState([]),[Xe,et]=n.useState(!1),[Ye,tt]=n.useState(1),[st,bt]=n.useState(""),[Tt,Et]=n.useState("newest"),[ds,zs]=n.useState(""),[Yt,c]=n.useState(new Set),[b,J]=n.useState(null),[Me,Be]=n.useState(!1),[Qe,dt]=n.useState(""),ue=10;n.useEffect(()=>{(async()=>{if(!(p!=="purchase"||!l))try{et(!0);const{start:h,end:y}=_,R=await fetch(`/api/purchases?startDate=${h.toISOString()}&endDate=${y.toISOString()}`,{headers:{"X-Tenant-Id":l}});if(R.ok){const Te=await R.json(),rt=Array.isArray(Te)?Te:Te?.items||Te?.purchases||[];Ve(rt)}}catch(h){console.error("Failed to load purchases:",h)}finally{et(!1)}})()},[p,l,_]);const at=n.useMemo(()=>{const h=(Array.isArray(Re)?Re:[]).filter(Te=>j(Te.createdAt)),y=h.reduce((Te,rt)=>Te+(rt.totalAmount||0),0),R=new Set(h.map(Te=>Te.supplierName)).size;return{totalAmount:y,totalPurchases:h.length,categories:R}},[Re,_]),xt=n.useMemo(()=>{let h=[...Array.isArray(Re)?Re:[]];if(st.trim()){const y=st.toLowerCase();h=h.filter(R=>R.supplierName?.toLowerCase().includes(y)||R.purchaseNumber?.toLowerCase().includes(y)||R.mobileNumber?.includes(y))}return Tt==="newest"?h.sort((y,R)=>new Date(R.createdAt).getTime()-new Date(y.createdAt).getTime()):Tt==="oldest"?h.sort((y,R)=>new Date(y.createdAt).getTime()-new Date(R.createdAt).getTime()):Tt==="amount"&&h.sort((y,R)=>R.totalAmount-y.totalAmount),h},[Re,st,Tt]),wt=n.useMemo(()=>{const o=(Ye-1)*ue;return xt.slice(o,o+ue)},[xt,Ye]),It=Math.ceil(xt.length/ue)||1,[Jt,xs]=n.useState([]),[Os,Fs]=n.useState([]),[va,Zt]=n.useState([]),[hr,Na]=n.useState(!1),[pt,ur]=n.useState("Customer"),[ps,gr]=n.useState(""),[mt,Rs]=n.useState(null),[fr,ka]=n.useState(!1),[br,Bs]=n.useState(!1);n.useEffect(()=>{l&&ze.setTenantId(l)},[l]),n.useEffect(()=>{l&&(async()=>{try{const[h,y,R]=await Promise.all([ze.getEntities("Customer"),ze.getEntities("Supplier"),ze.getEntities("Employee")]);Fs([...h,...y,...R])}catch(h){console.error("Error loading all entities for summary:",h)}})()},[l]),n.useEffect(()=>{p==="due"&&l&&(async()=>{Na(!0);try{const h=await ze.getEntities(pt,ps||void 0);xs(h),h.length>0&&!mt&&Rs(h[0]._id||null)}catch(h){console.error("Error loading due entities:",h),xs([])}finally{Na(!1)}})()},[p,pt,ps,l]),n.useEffect(()=>{p==="due"&&mt&&l&&(async()=>{try{const h=await ze.getTransactions(mt);Zt(h)}catch(h){console.error("Error loading transactions:",h),Zt([])}})()},[p,mt,l]);const vt=n.useMemo(()=>{const o=Os.reduce((y,R)=>y+(R.totalOwedToMe||0),0),h=Os.reduce((y,R)=>y+(R.totalIOweThemNumber||0),0);return{totalWillGet:o,totalWillGive:h}},[Os]),ms=n.useMemo(()=>Jt.find(o=>o._id===mt)||null,[Jt,mt]),Nt=n.useMemo(()=>va.filter(o=>j(o.transactionDate)),[va,_]),Ca=n.useMemo(()=>{const o=Nt.filter(y=>y.direction==="INCOME").reduce((y,R)=>y+R.amount,0),h=Nt.filter(y=>y.direction==="EXPENSE").reduce((y,R)=>y+R.amount,0);return{totalWillGet:o,totalWillGive:h}},[Nt]),Ae=n.useMemo(()=>{const o=a.filter(He=>j(He.date||He.createdAt)),h=o.filter(He=>He.status==="Delivered"),y=h.reduce((He,$e)=>He+($e.amount||0),0),R=h.reduce((He,$e)=>{const Jr=(Array.isArray($e.items)&&$e.items.length>0?$e.items:[{productId:$e.productId,productName:$e.productName,quantity:$e.quantity||1,price:($e.amount||0)-($e.deliveryCharge||0)}]).reduce((Zr,Qt)=>{const Qr=t.find(Us=>String(Us.id)===String(Qt.productId)||Us._id===Qt.productId||Us.name===Qt.productName)?.costPrice||Qt.price*.6;return Zr+Qr*(Qt.quantity||1)},0);return He+Jr},0),Te=y-R,rt=N.reduce((He,$e)=>He+($e.amount||0),0),hs=L.reduce((He,$e)=>He+($e.amount||0),0),Ws=Te+rt-hs,Kr=y>0?Ws/y*100:0,Gr=Ws>=0,Yr=t.reduce((He,$e)=>He+($e.price||0)*($e.stock||0),0)+y;return{totalRevenue:y,purchaseCost:R,profitFromSell:Te,otherIncome:rt,otherExpenses:hs,netProfit:Ws,netProfitPercent:Kr,isProfit:Gr,businessValue:Yr,ordersCount:o.length,deliveredCount:h.length}},[a,t,N,L,_]),ht=n.useMemo(()=>{const o=vt.totalWillGet||0,h=vt.totalWillGive||0,y=o+h;if(y===0)return{getPercent:50,givePercent:50,youWillGet:0,youWillGive:0};const R=Math.round(o/y*100),Te=Math.round(h/y*100);return{getPercent:R,givePercent:Te,youWillGet:o,youWillGive:h}},[vt]),yr=[{id:"profit",label:"Profit/Loss",icon:rl,active:!0},{id:"expense",label:"Expense",icon:er},{id:"income",label:"Income",icon:tr},{id:"purchase",label:"Purchase info",icon:sr},{id:"due",label:"Due Book",icon:nl},{id:"note",label:"Note",icon:ol}],jr=[{id:"day",label:"Day"},{id:"month",label:"Month"},{id:"year",label:"Year"},{id:"all",label:"All Time"},{id:"custom",label:"Custom"}],wr=()=>e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 pt-4 pb-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h2",{className:"text-[18px] font-bold text-[#023337] tracking-[0.09px] font-['Lato']",children:"Profit/Loss Report"}),e.jsx("p",{className:"text-[12px] text-black font-['Poppins']",children:"Track your business performance and financial health"})]}),e.jsxs("button",{className:"bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] flex items-center gap-1 px-4 py-3 rounded-lg",children:[e.jsx(En,{size:20,className:"text-white"}),e.jsx("span",{className:"text-[15px] font-bold text-white tracking-[-0.3px] font-['Lato']",children:"Download/Print"})]})]}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-5 px-5 pb-5",children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-5",children:[e.jsxs("div",{className:"flex-1 bg-white border border-[#f9f9f9] rounded-[10px] p-[10px]",children:[e.jsx("p",{className:"text-[14px] font-medium text-black font-['Poppins'] mb-2",children:"Revenue & Costs"}),e.jsxs("div",{className:"flex gap-3 sm:gap-4 lg:gap-6 mb-3",children:[e.jsx("span",{className:"text-[14px] font-medium text-[#00c80d] font-['Poppins']",children:"Selling Price"}),e.jsx("span",{className:"text-[14px] font-bold text-[#f59f0a] font-['Poppins']",children:"Cost Price"})]}),e.jsxs("div",{className:"h-[120px] relative",children:[e.jsxs("div",{className:"absolute left-0 top-0 w-[50px] flex flex-col justify-between h-full text-right text-[10px] text-[#131313]/50 font-['Poppins']",children:[e.jsx("span",{children:"$80K"}),e.jsx("span",{children:"$60K"}),e.jsx("span",{children:"$40K"}),e.jsx("span",{children:"$20K"}),e.jsx("span",{children:"$0"})]}),e.jsxs("div",{className:"absolute left-[55px] right-0 top-0 bottom-[20px]",children:[e.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 400 100",preserveAspectRatio:"none",className:"absolute inset-0",children:e.jsx("path",{d:w&&Ae.totalRevenue>0?"M0,80 C50,70 100,50 150,40 C200,30 250,25 300,20 C350,15 400,10 400,10":"M0,95 C50,95 100,95 150,95 C200,95 250,95 300,95 C350,95 400,95 400,95",stroke:"#00c80d",strokeWidth:"2",fill:"none",style:{transition:"all 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})}),e.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 400 100",preserveAspectRatio:"none",className:"absolute inset-0",children:e.jsx("path",{d:w&&Ae.purchaseCost>0?"M0,90 C50,85 100,70 150,60 C200,50 250,45 300,35 C350,30 400,25 400,20":"M0,95 C50,95 100,95 150,95 C200,95 250,95 300,95 C350,95 400,95 400,95",stroke:"#f59f0a",strokeWidth:"2",fill:"none",style:{transition:"all 1.2s cubic-bezier(0.4, 0, 0.2, 1)",transitionDelay:"0.2s"}})})]}),e.jsxs("div",{className:"absolute left-[55px] right-0 bottom-0 flex justify-between text-[10px] text-[#131313]/50 font-['Poppins']",children:[e.jsx("span",{children:"Dec 1"}),e.jsx("span",{children:"Dec 8"}),e.jsx("span",{children:"Dec 15"}),e.jsx("span",{children:"Dec 22"}),e.jsx("span",{children:"Dec 31"})]})]})]}),e.jsxs("div",{className:"flex-1 bg-white border border-[#f9f9f9] rounded-[10px] p-[10px]",children:[e.jsx("p",{className:"text-[14px] font-medium text-black font-['Poppins'] mb-2",children:"Total Profit"}),e.jsx("span",{className:"text-[14px] font-bold bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] bg-clip-text text-transparent font-['Poppins']",children:"Profit"}),e.jsxs("div",{className:"h-[120px] relative mt-3",children:[e.jsxs("div",{className:"absolute left-0 top-0 w-[40px] flex flex-col justify-between h-full text-right text-[10px] text-[#131313]/50 font-['Poppins']",children:[e.jsx("span",{children:"$80K"}),e.jsx("span",{children:"$60K"}),e.jsx("span",{children:"$40K"}),e.jsx("span",{children:"$20K"}),e.jsx("span",{children:"$0"})]}),e.jsx("div",{className:"absolute left-[45px] right-0 top-0 bottom-[20px]",children:e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 400 100",preserveAspectRatio:"none",className:"absolute inset-0",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"profitGradientFigma",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#38bdf8",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#1e90ff",stopOpacity:"0.05"})]}),e.jsxs("linearGradient",{id:"profitLineGradientFigma",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#38bdf8"}),e.jsx("stop",{offset:"100%",stopColor:"#1e90ff"})]})]}),e.jsx("path",{d:w&&Ae.profitFromSell>0?"M0,90 C50,85 100,80 150,75 C200,70 250,60 300,50 C350,40 400,25 400,20 L400,100 L0,100 Z":"M0,95 C50,95 100,95 150,95 C200,95 250,95 300,95 C350,95 400,95 400,95 L400,100 L0,100 Z",fill:"url(#profitGradientFigma)",style:{transition:"all 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}}),e.jsx("path",{d:w&&Ae.profitFromSell>0?"M0,90 C50,85 100,80 150,75 C200,70 250,60 300,50 C350,40 400,25 400,20":"M0,95 C50,95 100,95 150,95 C200,95 250,95 300,95 C350,95 400,95 400,95",stroke:"url(#profitLineGradientFigma)",strokeWidth:"3",fill:"none",style:{transition:"all 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})}),e.jsxs("div",{className:"absolute left-[45px] right-0 bottom-0 flex justify-between text-[10px] text-[#131313]/50 font-['Poppins']",children:[e.jsx("span",{children:"Dec 1"}),e.jsx("span",{children:"Dec 8"}),e.jsx("span",{children:"Dec 15"}),e.jsx("span",{children:"Dec 22"}),e.jsx("span",{children:"Dec 31"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg py-3 px-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-[14px] font-medium text-black font-['Lato']",children:"Product Selling Price"}),e.jsx("span",{className:"text-[10px] text-[#bababa] font-['Poppins']",children:"Total revenue from sales"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[e.jsxs("span",{className:"text-[16px] font-semibold text-[#008c09] font-['Lato']",children:["৳",Ae.totalRevenue.toLocaleString("en-IN")]}),e.jsx("span",{className:"text-[12px] text-[#a1a1a1] font-['Lato']",children:"See Details >"})]})]}),e.jsx("div",{className:"h-px bg-[#e5e5e5] my-2"}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-[14px] font-medium text-black font-['Lato']",children:"Purchase Cost"}),e.jsx("span",{className:"text-[10px] text-[#bababa] font-['Poppins']",children:"Cost of goods sold"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[e.jsxs("span",{className:"text-[16px] font-semibold text-[#f59f0a] font-['Lato']",children:["৳",Ae.purchaseCost.toLocaleString("en-IN")]}),e.jsx("span",{className:"text-[12px] text-[#a1a1a1] font-['Lato']",children:"See Details >"})]})]}),e.jsx("div",{className:"h-px bg-[#e5e5e5] my-2"}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-[14px] font-medium text-black font-['Lato']",children:"Profit From Sell"}),e.jsx("span",{className:"text-[10px] text-[#bababa] font-['Poppins']",children:"Selling Price - Purchase Cost"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[e.jsxs("span",{className:`text-[16px] font-semibold font-['Lato'] ${Ae.profitFromSell>=0?"bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] bg-clip-text text-transparent":"text-[#da0000]"}`,children:["৳",Ae.profitFromSell.toLocaleString("en-IN")]}),e.jsx("span",{className:"text-[12px] text-[#a1a1a1] font-['Lato']",children:"See Details >"})]})]})]}),e.jsx("div",{className:"bg-[#f9f9f9] rounded-lg py-3 px-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-[14px] font-medium text-black font-['Lato']",children:"Income"}),e.jsx("span",{className:"text-[10px] text-[#bababa] font-['Poppins']",children:"Adds to profit (+)"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[e.jsxs("span",{className:"text-[16px] font-semibold text-[#008c09] font-['Lato']",children:["৳",Ae.otherIncome.toLocaleString("en-IN")]}),e.jsx("span",{className:"text-[12px] text-[#a1a1a1] font-['Lato']",children:"See Details >"})]})]})}),e.jsx("div",{className:"bg-[#f9f9f9] rounded-lg py-3 px-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-[14px] font-medium text-black font-['Lato']",children:"Expense"}),e.jsx("span",{className:"text-[10px] text-[#bababa] font-['Poppins']",children:"Subtracts from profit (-)"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[e.jsxs("span",{className:"text-[16px] font-semibold text-[#da0000] font-['Lato']",children:["৳",Ae.otherExpenses.toLocaleString("en-IN")]}),e.jsx("span",{className:"text-[12px] text-[#a1a1a1] font-['Lato']",children:"See Details >"})]})]})}),e.jsx("div",{className:"bg-[#f9f9f9] border border-[#38bdf8] rounded-lg py-3 px-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-[14px] font-medium text-black font-['Lato']",children:"Net Profit"}),e.jsx("span",{className:"text-[10px] text-[#bababa] font-['Poppins']",children:"Profit + Income - Expense"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[Ae.isProfit?e.jsx(ha,{size:18,className:"text-[#21c45d]"}):e.jsx(ua,{size:18,className:"text-[#da0000]"}),e.jsxs("span",{className:`text-[16px] font-semibold font-['Lato'] ${Ae.isProfit?"text-[#21c45d]":"text-[#da0000]"}`,children:["৳",Math.abs(Ae.netProfit).toLocaleString("en-IN")]}),e.jsxs("span",{className:`text-[12px] font-medium font-['Lato'] ${Ae.isProfit?"text-[#21c45d]":"text-[#da0000]"}`,children:["(",Ae.netProfitPercent.toFixed(1),"%)"]})]}),e.jsx("span",{className:"text-[12px] text-[#a1a1a1] font-['Lato']",children:"See Details >"})]})]})})]})]}),e.jsxs("div",{className:"xl:w-[316px] flex flex-col gap-5",children:[e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-[14px] font-medium text-black font-['Lato']",children:"Business Value"}),e.jsx("span",{className:"text-[10px] text-[#bababa] font-['Poppins']",children:"Including Dues and Inventory Value"})]}),e.jsxs("div",{className:"flex items-center",children:[Ae.isProfit?e.jsx(ha,{size:16,className:"text-[#21c45d]"}):e.jsx(ua,{size:16,className:"text-[#da0000]"}),e.jsxs("span",{className:`text-[14px] font-medium font-['Lato'] ml-0.5 ${Ae.isProfit?"text-[#21c45d]":"text-[#da0000]"}`,children:[Ae.netProfitPercent.toFixed(1),"%"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg px-2 py-3 mt-2",children:e.jsxs("span",{className:"text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[32px] font-semibold text-[#085e00] font-['Lato']",children:["৳",Ae.businessValue.toLocaleString("en-IN")]})})]}),e.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",padding:"10px 28px",display:"flex",flexDirection:"column",gap:"25px",alignItems:"center",justifyContent:"center"},children:[e.jsx("p",{style:{fontFamily:"'Poppins', sans-serif",fontWeight:500,fontSize:"14px",color:"#777",margin:0},children:"Due graph"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",alignItems:"center",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("div",{style:{width:"15px",height:"15px",borderRadius:"50%",background:"#E31B23"}}),e.jsx("span",{style:{fontFamily:"'Poppins', sans-serif",fontSize:"12px",color:"#131313",fontWeight:400},children:"You will Give"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("span",{style:{fontFamily:"'Poppins', sans-serif",fontSize:"12px",color:"#131313",fontWeight:400},children:"You will Get"}),e.jsx("div",{style:{width:"15px",height:"15px",borderRadius:"50%",background:"#00A651"}})]})]}),e.jsx("div",{style:{position:"relative",width:"260px",height:"130px"},children:e.jsxs("svg",{width:"260",height:"130",viewBox:"0 0 260 130",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"paint0_linear_green",x1:"260",y1:"65",x2:"0",y2:"65",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#3AA600"}),e.jsx("stop",{offset:"1",stopColor:"#00E82A"})]}),e.jsxs("linearGradient",{id:"paint0_linear_red",x1:"0",y1:"0",x2:"85",y2:"130",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#E31B23"}),e.jsx("stop",{offset:"1",stopColor:"#8B0000"})]})]}),e.jsx("path",{d:"M9.15527e-05 130C9.30452e-05 112.928 3.36263 96.0235 9.89574 80.2511C16.4289 64.4788 26.0046 50.1477 38.0762 38.0761C50.1478 26.0045 64.4789 16.4288 80.2512 9.89569C96.0236 3.36258 112.928 4.74315e-05 130 4.96702e-05C147.072 5.19089e-05 163.977 3.36259 179.749 9.8957C195.521 16.4288 209.852 26.0045 221.924 38.0762C233.996 50.1478 243.571 64.4789 250.104 80.2512C256.637 96.0235 260 112.928 260 130L208.165 130C208.165 119.735 206.143 109.571 202.215 100.088C198.287 90.6043 192.529 81.9875 185.271 74.7292C178.013 67.471 169.396 61.7134 159.912 57.7853C150.429 53.8571 140.265 51.8354 130 51.8354C119.735 51.8354 109.571 53.8571 100.088 57.7853C90.6044 61.7134 81.9876 67.471 74.7293 74.7292C67.471 81.9875 61.7135 90.6043 57.7853 100.088C53.8572 109.571 51.8354 119.735 51.8354 130L9.15527e-05 130Z",fill:"url(#paint0_linear_green)"}),ht.givePercent>=50?e.jsx("path",{d:"M0 130C0 112.928 3.36254 96.0235 9.89565 80.2511C16.4288 64.4788 26.0045 50.1477 38.0761 38.0761C50.1477 26.0045 64.4788 16.4288 80.2511 9.89569C96.0235 3.36258 112.928 0 130 0L130 51.8354C119.735 51.8354 109.571 53.8571 100.088 57.7853C90.6043 61.7134 81.9875 67.471 74.7292 74.7292C67.471 81.9875 61.7134 90.6043 57.7853 100.088C53.8571 109.571 51.8354 119.735 51.8354 130L0 130Z",fill:"url(#paint0_linear_red)"}):ht.givePercent>=30?e.jsx("path",{d:"M0 130C0 112.928 3.36254 96.0235 9.89565 80.2511C16.4288 64.4788 26.0045 50.1477 38.0761 38.0761C50.1477 26.0045 64.4788 16.4288 80.2511 9.89569L100.088 57.7853C90.6043 61.7134 81.9875 67.471 74.7292 74.7292C67.471 81.9875 61.7134 90.6043 57.7853 100.088C53.8571 109.571 51.8354 119.735 51.8354 130L0 130Z",fill:"url(#paint0_linear_red)"}):ht.givePercent>0?e.jsx("path",{d:"M0 130C0 112.928 3.36254 96.0235 9.89565 80.2511C16.4288 64.4788 26.0045 50.1477 38.0761 38.0761L74.7292 74.7292C67.471 81.9875 61.7134 90.6043 57.7853 100.088C53.8571 109.571 51.8354 119.735 51.8354 130L0 130Z",fill:"url(#paint0_linear_red)"}):null,ht.givePercent>5&&e.jsxs("text",{x:"25",y:"90",fill:"white",fontSize:"11",fontFamily:"Lato, sans-serif",fontWeight:"500",children:[ht.givePercent,"%"]}),ht.getPercent>5&&e.jsxs("text",{x:"200",y:"50",fill:"white",fontSize:"11",fontFamily:"Lato, sans-serif",fontWeight:"500",children:[ht.getPercent,"%"]})]})})]}),e.jsxs("div",{style:{background:"white",borderRadius:"8px",display:"flex",gap:"138px",alignItems:"center",justifyContent:"center"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",alignItems:"flex-start",width:"61px"},children:[e.jsx("span",{style:{fontFamily:"'Lato', sans-serif",fontSize:"10px",color:"#131313",fontWeight:400},children:"You will Give"}),e.jsxs("span",{style:{fontFamily:"'Lato', 'Noto Sans Bengali', sans-serif",fontSize:"16px",fontWeight:700,color:"#da0000"},children:["৳",ht.youWillGive.toLocaleString("en-IN")]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",alignItems:"flex-end",justifyContent:"center",width:"61px"},children:[e.jsx("span",{style:{fontFamily:"'Lato', sans-serif",fontSize:"10px",color:"#131313",fontWeight:400},children:"You will Get"}),e.jsxs("span",{style:{fontFamily:"'Lato', 'Noto Sans Bengali', sans-serif",fontSize:"16px",fontWeight:700,color:"#008c09"},children:["৳",ht.youWillGet.toLocaleString("en-IN")]})]})]})]})]})]})]}),vr=async()=>{if(!M.name||!M.category||!M.amount||!M.date){const h=[];M.name||h.push("Name"),M.category||h.push("Category"),M.amount||h.push("Amount"),M.date||h.push("Date"),alert(`Please fill in required fields: ${h.join(", ")}`);return}l&&Ss(l);const o={name:M.name,category:M.category,amount:Number(M.amount),date:M.date,status:M.status||"Published",note:M.note,imageUrl:M.imageUrl};console.log("Saving expense:",o);try{if(X){const h=await Wt.update(X,o);console.log("Updated expense:",h),T(y=>y.map(R=>R.id===X?{...h,id:h.id||X}:R))}else{const h=await Wt.create(o);console.log("Created expense:",h),T(y=>[{...h,id:h.id||Math.random().toString(36).slice(2)},...y])}ne(!1),re({status:"Published"}),oe(null),ee(!1)}catch(h){console.error("Failed to save expense:",h),alert("Failed to save expense. Please try again.")}},Nr=async o=>{if(window.confirm("Delete this expense?")){try{await Wt.remove(o),T(h=>h.filter(y=>y.id!==o))}catch{T(y=>y.filter(R=>R.id!==o))}Le(null)}},kr=async()=>{if(!K.trim()){alert("Please enter a category name");return}const o=l||localStorage.getItem("tenantId")||"";if(!o){console.error("No tenant ID available for category creation"),alert("Error: No tenant ID available. Please refresh the page and try again.");return}na(o);try{console.log("Creating category:",K,"for tenant:",o);const h=await Ds.create({name:K});console.log("Category created:",h),E(y=>[...y,h]),V(""),pe(!1)}catch(h){console.error("Failed to add category:",h),alert("Failed to add category: "+(h?.message||h?.response?.data?.error||"Unknown error"))}},Cr=o=>{me(h=>{const y=new Set(h);return y.has(o)?y.delete(o):y.add(o),y})},Sr=async()=>{if(!window.confirm(`Delete ${be.size} selected expenses? This action cannot be undone.`))return;l&&Ss(l);let o=0,h=0;for(const y of be)try{await Wt.remove(y),o++}catch(R){console.error(`Failed to delete expense ${y}:`,R),h++}T(y=>y.filter(R=>!be.has(R.id))),me(new Set),o>0?alert(`${o} expense(s) deleted successfully${h>0?`, ${h} failed`:""}`):h>0&&alert(`Failed to delete ${h} expense(s)`)},Lr=()=>{const o=window.open("","_blank");if(!o)return;const h=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Expense Report</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: 'Segoe UI', Tahoma, sans-serif; color: #333; padding: 40px; }
          .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #38bdf8; padding-bottom: 20px; }
          .title { font-size: 24px; font-weight: bold; color: #023337; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background: linear-gradient(to right, #38bdf8, #1e90ff); color: white; padding: 12px; text-align: left; }
          td { padding: 12px; border-bottom: 1px solid #eee; }
          .amount { color: #da0000; font-weight: bold; }
          .total { font-size: 18px; font-weight: bold; margin-top: 20px; text-align: right; }
        </style>
      </head>
      <body>
        <div class="header"><div class="title">Expense Report</div></div>
        <div className="overflow-x-auto">
        <table>
          <thead><tr><th>SL</th><th>Name</th><th>Category</th><th>Amount</th><th>Date</th></tr></thead>
          <tbody>
            ${L.map((y,R)=>`
              <tr>
                <td>${L.length-R}</td>
                <td>${y.name}</td>
                <td>${y.category}</td>
                <td class="amount">৳${y.amount.toLocaleString("en-IN")}</td>
                <td>${new Date(y.date).toLocaleDateString("en-GB")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        <div class="total">Total: ৳${ke.totalAmount.toLocaleString("en-IN")}</div>
      </body>
      </html>
    `;o.document.write(h),o.document.close(),o.print()},Pr=async()=>{if(!je.name||!je.category||!je.amount||!je.date)return;const o={name:je.name,category:je.category,amount:Number(je.amount),date:je.date,status:je.status||"Published",note:je.note,imageUrl:je.imageUrl};try{if(Ue){const h=await gt.update(Ue,o);O(y=>y.map(R=>R.id===Ue?{...h,id:h.id||Ue}:R))}else{const h=await gt.create(o);O(y=>[{...h,id:h.id||Math.random().toString(36).slice(2)},...y])}}catch{if(Ue)O(y=>y.map(R=>R.id===Ue?je:R));else{const y={id:Math.random().toString(36).slice(2),...o};O(R=>[y,...R])}}P(!1),x({status:"Published"}),Ee(null)},Dr=async o=>{if(window.confirm("Delete this income?")){try{await gt.remove(o),O(h=>h.filter(y=>y.id!==o))}catch{O(y=>y.filter(R=>R.id!==o))}Ne(null)}},_r=async()=>{if(Ze.trim())try{const o=await gt.createCategory(Ze);te(h=>[...h,o]),jt(""),xe(!1)}catch{alert("Failed to add category")}},Ar=o=>{Y(h=>{const y=new Set(h);return y.has(o)?y.delete(o):y.add(o),y})},Tr=async()=>{if(!window.confirm(`Delete ${H.size} selected incomes? This action cannot be undone.`))return;l&&Xa(l);let o=0,h=0;for(const y of H)try{await gt.remove(y),o++}catch(R){console.error(`Failed to delete income ${y}:`,R),h++}O(y=>y.filter(R=>!H.has(R.id))),Y(new Set),o>0?alert(`${o} income(s) deleted successfully${h>0?`, ${h} failed`:""}`):h>0&&alert(`Failed to delete ${h} income(s)`)},Er=()=>{const o=window.open("","_blank");if(!o)return;const h=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Income Report</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: 'Segoe UI', Tahoma, sans-serif; color: #333; padding: 40px; }
          .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #38bdf8; padding-bottom: 20px; }
          .title { font-size: 24px; font-weight: bold; color: #023337; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background: linear-gradient(to right, #38bdf8, #1e90ff); color: white; padding: 12px; text-align: left; }
          td { padding: 12px; border-bottom: 1px solid #eee; }
          .amount { color: #008c09; font-weight: bold; }
          .total { font-size: 18px; font-weight: bold; margin-top: 20px; text-align: right; color: #008c09; }
        </style>
      </head>
      <body>
        <div class="header"><div class="title">Income Report</div></div>
        <div className="overflow-x-auto">
        <table>
          <thead><tr><th>SL</th><th>Name</th><th>Category</th><th>Amount</th><th>Date</th></tr></thead>
          <tbody>
            ${N.map((y,R)=>`
              <tr>
                <td>${N.length-R}</td>
                <td>${y.name}</td>
                <td>${y.category}</td>
                <td class="amount">৳${y.amount.toLocaleString("en-IN")}</td>
                <td>${new Date(y.date).toLocaleDateString("en-GB")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        <div class="total">Total: ৳${Ge.totalAmount.toLocaleString("en-IN")}</div>
      </body>
      </html>
    `;o.document.write(h),o.document.close(),o.print()},Ir=()=>e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 px-3 sm:px-5 pt-3 pb-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h2",{className:"text-[18px] font-bold text-[#023337] tracking-[0.09px] font-['Lato']",children:"Income"}),e.jsx("p",{className:"text-[12px] text-black font-['Poppins']",children:"Track your other income sources"})]}),e.jsxs("button",{onClick:()=>{x({status:"Published"}),Ee(null),P(!0)},className:"bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] flex items-center gap-1 h-[48px] pl-3 pr-4 py-[6px] rounded-lg",children:[e.jsx(oa,{}),e.jsx("span",{className:"text-[15px] font-bold text-white tracking-[-0.3px] font-['Lato']",children:"Add Income"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 px-3 sm:px-5 mt-4",children:[e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg h-auto min-h-[80px] sm:h-[100px] w-full sm:w-[396px] overflow-hidden px-[18px] py-5",children:[e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[32px] font-bold text-[#008c09] tracking-[0.16px] font-['Lato']",children:["৳",Ge.totalAmount.toLocaleString("en-IN"),".00"]}),e.jsx("p",{className:"text-[12px] text-black font-['Poppins'] mt-2",children:"Total income"})]}),e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg h-auto min-h-[80px] sm:h-[100px] w-[calc(50%-6px)] sm:w-[148px] overflow-hidden px-[18px] py-5",children:[e.jsx("p",{className:"text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[32px] font-bold text-[#022f37] tracking-[0.16px] font-['Lato']",children:Ge.totalTransactions}),e.jsx("p",{className:"text-[12px] text-black font-['Poppins'] mt-2",children:"Total Transactions"})]}),e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg h-auto min-h-[80px] sm:h-[100px] w-[calc(50%-6px)] sm:w-[148px] overflow-hidden px-[18px] py-5",children:[e.jsx("p",{className:"text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[32px] font-bold text-[#022f37] tracking-[0.16px] font-['Lato']",children:Ge.categories}),e.jsx("p",{className:"text-[12px] text-black font-['Poppins'] mt-2",children:"Categories"})]}),e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg h-auto min-h-[100px] w-full sm:flex-1 overflow-hidden px-[18px] py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-[12px] text-black font-['Poppins']",children:"Actions"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>xe(!0),className:"bg-white flex items-center gap-1 px-[6px] py-[6px] rounded",children:[e.jsx(la,{}),e.jsx("span",{className:"text-[12px] text-black font-['Poppins']",children:"Add Category"})]}),e.jsxs("button",{onClick:Er,className:"bg-white flex items-center gap-1 px-[6px] py-[6px] rounded",children:[e.jsx(ia,{}),e.jsx("span",{className:"text-[12px] text-black font-['Poppins']",children:"Print"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-[7px] mt-3",children:[e.jsx("span",{className:"text-[12px] text-black font-['Poppins']",children:"Filter by:"}),e.jsxs("div",{className:"bg-white flex-1 flex items-center justify-between px-3 py-[11px] rounded",children:[e.jsxs("select",{value:Je,onChange:o=>Ie(o.target.value),className:"text-[12px] text-black font-['Poppins'] bg-transparent border-none outline-none flex-1 cursor-pointer",children:[e.jsx("option",{value:"",children:"All Categories"}),B.map(o=>e.jsx("option",{value:o.name,children:o.name},o.id||o.name))]}),e.jsx(_e,{size:18,className:"text-gray-400"})]})]})]})]}),e.jsxs("div",{className:"mt-4 px-2 sm:px-5 overflow-x-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#38bdf8]/10 to-[#1e90ff]/10 h-[48px] flex items-center rounded-t-lg min-w-[700px]",children:[e.jsx("div",{className:"w-[60px] text-center",children:e.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-[#eaf8e7] accent-[#38bdf8]",checked:H.size===N.length&&N.length>0,onChange:()=>{H.size===N.length?Y(new Set):Y(new Set(N.map(o=>o.id)))}})}),H.size>0&&e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs("span",{className:"text-[12px] text-blue-700 font-medium",children:[H.size," selected"]}),e.jsxs("button",{onClick:Tr,className:"flex items-center gap-1 px-2 py-1 bg-red-500 text-white rounded text-[12px] font-medium hover:bg-red-600",children:[e.jsx(lt,{size:14}),"Delete"]}),e.jsxs("button",{onClick:()=>Y(new Set),className:"flex items-center gap-1 px-2 py-1 bg-gray-200 text-gray-700 rounded text-[12px] font-medium hover:bg-gray-300",children:[e.jsx(ge,{size:14}),"Clear"]})]}),e.jsx("div",{className:`w-[80px] ${H.size===0?"":"ml-auto"}`,children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"SL"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Name"})}),e.jsx("div",{className:"w-[150px]",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Category"})}),e.jsx("div",{className:"w-[120px] text-center",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Amount"})}),e.jsx("div",{className:"w-[120px]",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Date"})}),e.jsx("div",{className:"w-[80px] text-center",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Action"})})]}),ae&&N.length===0?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx($t,{className:"animate-spin text-[#38bdf8]",size:24})}):N.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[e.jsx(tr,{}),e.jsx("p",{className:"mt-4 text-[14px]",children:'No income found. Click "Add Income" to create one.'})]}):N.map((o,h)=>e.jsxs("div",{className:"h-[68px] flex items-center border-b border- min-w-[700px] [#b9b9b9]/50 hover:bg-gray-50",children:[e.jsx("div",{className:"w-[60px] text-center",children:e.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-[#eaf8e7] accent-[#38bdf8]",checked:H.has(o.id),onChange:()=>Ar(o.id)})}),e.jsx("div",{className:"w-[80px]",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] font-['Poppins']",children:N.length-h})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] font-['Poppins']",children:o.name})}),e.jsx("div",{className:"w-[150px]",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] font-['Poppins']",children:o.category})}),e.jsx("div",{className:"w-[120px] text-center",children:e.jsxs("p",{className:"text-[12px] text-[#008c09] font-['Poppins']",children:["৳",o.amount.toLocaleString("en-IN")]})}),e.jsx("div",{className:"w-[120px]",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] font-['Poppins']",children:new Date(o.date).toLocaleDateString("en-GB").replace(/\//g,"-")})}),e.jsxs("div",{className:"w-[80px] flex justify-center relative",children:[e.jsx("button",{onClick:()=>{const y=o.id||`income-${h}`;Ne(ve===y?null:y)},className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(ca,{})}),ve===(o.id||`income-${h}`)&&e.jsxs("div",{className:"absolute right-0 top-8 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[120px]",children:[e.jsxs("button",{onClick:()=>{x(o),Ee(o.id),P(!0),Ne(null)},className:"w-full flex items-center gap-2 px-3 py-2 text-[12px] text-gray-700 hover:bg-gray-50",children:[e.jsx(Mn,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>Dr(o.id),className:"w-full flex items-center gap-2 px-3 py-2 text-[12px] text-red-600 hover:bg-gray-50",children:[e.jsx(lt,{size:14})," Delete"]})]})]})]},o.id||`income-${h}`))]}),N.length>0&&e.jsxs("div",{className:"flex items-center justify-center gap-[279px] py-5",children:[e.jsxs("button",{onClick:()=>ie(o=>Math.max(1,o-1)),disabled:le===1,className:"bg-white flex items-center gap-1 h-[42px] pl-2 pr-3 py-[10px] rounded-lg shadow-[0px_1px_3px_0px_rgba(0,0,0,0.2)] disabled:opacity-50",children:[e.jsx(da,{}),e.jsx("span",{className:"text-[15px] font-medium text-black font-['Lato']",children:"Previous"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[Array.from({length:Math.min(5,Fe)},(o,h)=>h+1).map(o=>e.jsx("button",{onClick:()=>ie(o),className:`w-9 h-9 flex items-center justify-center rounded ${le===o?"bg-[#dff5ff] text-[#1e90ff]":"border border-[#d1d5db] text-[#023337]"} text-[15px] font-medium font-['Lato']`,children:o},o)),Fe>5&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"w-9 h-9 flex items-center justify-center border border-[#d1d5db] rounded text-[15px] font-bold text-[#023337] font-['Lato']",children:"....."}),e.jsx("button",{onClick:()=>ie(Fe),className:"w-9 h-9 flex items-center justify-center border border-[#d1d5db] rounded text-[15px] font-medium text-[#023337] font-['Lato']",children:Fe})]})]}),e.jsxs("button",{onClick:()=>ie(o=>Math.min(Fe,o+1)),disabled:le===Fe,className:"bg-white flex items-center gap-1 h-[42px] pl-3 pr-2 py-[10px] rounded-lg shadow-[0px_1px_3px_0px_rgba(0,0,0,0.2)] disabled:opacity-50",children:[e.jsx("span",{className:"text-[15px] font-medium text-black font-['Lato']",children:"Next"}),e.jsx(xa,{})]})]}),ye&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-[8px] p-5 w-full max-w-[548px] overflow-y-auto max-h-[90vh]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-4 sm:mb-5",children:[e.jsx("h3",{className:"text-[16px] font-semibold text-black font-['Poppins']",children:Ue?"Edit Income":"Add Income"}),e.jsx("button",{onClick:()=>{P(!1),Ee(null)},className:"text-gray-500 hover:text-gray-700",children:e.jsx(ge,{size:20})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:["Income Name",e.jsx("span",{className:"text-[#da0000]",children:"*"})]}),e.jsx("input",{type:"text",value:je.name||"",onChange:o=>x(h=>({...h,name:o.target.value})),className:"w-full h-[48px] px-3 py-[10px] bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] text-[15px] text-[#023337] font-['Lato'] placeholder:text-[#aeaeae] outline-none focus:border-[#38bdf8]",placeholder:"Enter income name"})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:["Category",e.jsx("span",{className:"text-[#da0000]",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:je.category||"",onChange:o=>x(h=>({...h,category:o.target.value})),className:"w-full h-[48px] px-3 py-[10px] bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] text-[15px] text-[#023337] font-['Lato'] appearance-none cursor-pointer outline-none focus:border-[#38bdf8]",children:[e.jsx("option",{value:"",className:"text-[#aeaeae]",children:"Select Category"}),B.map(o=>e.jsx("option",{value:o.name,children:o.name},o.id||o.name))]}),e.jsx(_e,{size:20,className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#023337] pointer-events-none"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[e.jsxs("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:["Amount",e.jsx("span",{className:"text-[#da0000]",children:"*"})]}),e.jsx("input",{type:"number",value:je.amount||"",onChange:o=>x(h=>({...h,amount:Number(o.target.value)})),className:"w-full h-[48px] px-3 py-[10px] bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] text-[15px] text-[#023337] font-['Lato'] placeholder:text-[#aeaeae] outline-none focus:border-[#38bdf8]",placeholder:"0.00"})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[e.jsxs("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:["Date",e.jsx("span",{className:"text-[#da0000]",children:"*"})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"date",value:je.date||"",onChange:o=>x(h=>({...h,date:o.target.value})),className:"w-full h-[48px] px-3 py-[10px] bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] text-[15px] text-[#023337] font-['Lato'] placeholder:text-[#aeaeae] outline-none focus:border-[#38bdf8]"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:"Image Upload"}),e.jsx("div",{className:"w-full h-[153px] bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] flex flex-col items-center justify-center gap-4 cursor-pointer hover:border-[#38bdf8] transition-colors",onClick:()=>document.getElementById("income-image-upload")?.click(),children:je.imageUrl?e.jsxs("div",{className:"relative w-full h-full p-2",children:[e.jsx("img",{src:je.imageUrl,alt:"Income",className:"w-full h-full object-contain rounded"}),e.jsx("button",{onClick:o=>{o.stopPropagation(),x(h=>({...h,imageUrl:void 0}))},className:"absolute top-3 right-3 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(ge,{size:14})})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[15px] text-[#aeaeae] font-['Lato']",children:"Upload Doc"}),e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#aeaeae",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"17 8 12 3 7 8"}),e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})]})}),e.jsx("input",{id:"income-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:o=>{const h=o.target.files?.[0];if(h){const y=new FileReader;y.onloadend=()=>{x(R=>({...R,imageUrl:y.result}))},y.readAsDataURL(h)}}})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:"Note"}),e.jsx("input",{type:"text",value:je.note||"",onChange:o=>x(h=>({...h,note:o.target.value})),className:"w-full h-[48px] px-3 py-[10px] bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] text-[15px] text-[#023337] font-['Lato'] placeholder:text-[#aeaeae] outline-none focus:border-[#38bdf8]",placeholder:"Add any notes..."})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-2",children:[e.jsx("button",{onClick:()=>{P(!1),Ee(null)},className:"h-[40px] px-4 py-2 bg-white border border-[#e5e7eb] rounded-[8px] text-[15px] font-bold text-[#023337] font-['Lato'] tracking-[-0.3px] hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:Pr,className:"h-[40px] px-4 py-2 bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] rounded-[8px] text-[15px] font-bold text-white font-['Lato'] tracking-[-0.3px] hover:opacity-90",children:Ue?"Update Income":"Save Income"})]})]})]})}),se&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 w-full max-w-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-[18px] font-bold text-[#023337] font-['Lato']",children:"Add Category"}),e.jsx("button",{onClick:()=>xe(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ge,{size:20})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("input",{type:"text",value:Ze,onChange:o=>jt(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-[14px] font-['Poppins']",placeholder:"Enter category name"}),e.jsx("button",{onClick:_r,className:"bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] text-white py-3 rounded-lg text-[15px] font-bold font-['Lato']",children:"Add Category"})]})]})})]}),Mr=o=>{c(h=>{const y=new Set(h);return y.has(o)?y.delete(o):y.add(o),y})},$r=async o=>{if(window.confirm("Delete this purchase?")){try{await fetch(`/api/purchases/${o}`,{method:"DELETE",headers:{"X-Tenant-Id":l||""}}),Ve(h=>h.filter(y=>y._id!==o))}catch(h){console.error("Failed to delete purchase:",h)}J(null)}},zr=async()=>{if(Qe.trim())try{await Ds.create({name:Qe}),dt(""),Be(!1)}catch{alert("Failed to add category")}},Or=()=>{const o=window.open("","_blank");if(!o)return;const h=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Purchase Report</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: 'Segoe UI', Tahoma, sans-serif; color: #333; padding: 40px; }
          .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #38bdf8; padding-bottom: 20px; }
          .title { font-size: 24px; font-weight: bold; color: #023337; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background: linear-gradient(to right, #38bdf8, #1e90ff); color: white; padding: 12px; text-align: left; }
          td { padding: 12px; border-bottom: 1px solid #eee; }
          .amount { color: #da3e00; font-weight: bold; }
          .total { font-size: 18px; font-weight: bold; margin-top: 20px; text-align: right; color: #da3e00; }
        </style>
      </head>
      <body>
        <div class="header"><div class="title">Purchase Report</div></div>
        <div className="overflow-x-auto">
        <table>
          <thead><tr><th>SL</th><th>Supplier</th><th>Number</th><th>Amount</th><th>Date</th></tr></thead>
          <tbody>
            ${xt.map((y,R)=>`
              <tr>
                <td>${xt.length-R}</td>
                <td>${y.supplierName||"N/A"}</td>
                <td>${y.mobileNumber||"-"}</td>
                <td class="amount">৳${y.totalAmount?.toLocaleString("en-IN")||0}</td>
                <td>${new Date(y.createdAt).toLocaleDateString("en-GB")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        <div class="total">Total: ৳${at.totalAmount.toLocaleString("en-IN")}</div>
      </body>
      </html>
    `;o.document.write(h),o.document.close(),o.print()},Fr=()=>{const o=window.open("","_blank");if(!o)return;const h=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Due List - ${pt}s</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: 'Segoe UI', Tahoma, sans-serif; color: #333; padding: 40px; }
          .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #38bdf8; padding-bottom: 20px; }
          .title { font-size: 24px; font-weight: bold; color: #023337; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background: linear-gradient(to right, #38bdf8, #1e90ff); color: white; padding: 12px; text-align: left; }
          td { padding: 12px; border-bottom: 1px solid #eee; }
          .get { color: #008c09; font-weight: bold; }
          .give { color: #da0000; font-weight: bold; }
          .summary { display: flex; gap: 30px; margin-bottom: 20px; }
          .summary-card { padding: 15px; border-radius: 8px; }
          .summary-get { background: #e6f8e6; }
          .summary-give { background: #ffe6e6; }
        </style>
      </head>
      <body>
        <div class="header"><div class="title">Due List - ${pt}s</div></div>
        <div class="summary">
          <div class="summary-card summary-get">
            <div style="font-size:14px;">You will Get</div>
            <div class="get" style="font-size:20px;">৳${vt.totalWillGet.toLocaleString("en-IN")}</div>
          </div>
          <div class="summary-card summary-give">
            <div style="font-size:14px;">You will Give</div>
            <div class="give" style="font-size:20px;">৳${vt.totalWillGive.toLocaleString("en-IN")}</div>
          </div>
        </div>
        <div className="overflow-x-auto">
        <table>
          <thead><tr><th>Name</th><th>Phone</th><th>Will Get</th><th>Will Give</th></tr></thead>
          <tbody>
            ${Jt.map(y=>`
              <tr>
                <td>${y.name}</td>
                <td>${y.phone||"-"}</td>
                <td class="get">৳${(y.totalOwedToMe||0).toLocaleString("en-IN")}</td>
                <td class="give">৳${(y.totalIOweThemNumber||0).toLocaleString("en-IN")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      </body>
      </html>
    `;o.document.write(h),o.document.close(),o.print()},Rr=o=>{Rs(o)},Br=o=>{ur(o),Rs(null),Zt([])},Wr=async()=>{const{start:o,end:h}=_;if(p==="due")try{const[y,R,Te]=await Promise.all([ze.getEntities("Customer"),ze.getEntities("Supplier"),ze.getEntities("Employee")]);Fs([...y,...R,...Te]);const rt=await ze.getEntities(pt,ps||void 0);if(xs(rt),mt){const hs=await ze.getTransactions(mt);Zt(hs)}}catch(y){console.error("Error refreshing due data:",y)}else if(p==="expense")try{const y=await Wt.list({page:1,pageSize:500,from:o.toISOString(),to:h.toISOString()});T(y.items)}catch(y){console.error("Error refreshing expenses:",y)}else if(p==="income")try{const y=await gt.list({page:1,pageSize:500,from:o.toISOString(),to:h.toISOString()});O(y.items)}catch(y){console.error("Error refreshing incomes:",y)}},Ur=()=>e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 px-3 sm:px-5 pt-3 pb-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h2",{className:"text-[18px] font-bold text-[#023337] tracking-[0.09px] font-['Lato']",children:"Purchase information"}),e.jsx("p",{className:"text-[12px] text-black font-['Poppins']",children:"View all purchase report"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 lg:gap-6",children:[e.jsxs("div",{className:"bg-[#f9f9f9] h-[34px] rounded-lg flex items-center px-2 w-full sm:w-[200px] lg:w-[300px]",children:[e.jsx(it,{size:20,className:"text-gray-400 mr-2"}),e.jsx("input",{type:"text",value:st,onChange:o=>bt(o.target.value),placeholder:"Search Customers",className:"bg-transparent text-[12px] text-gray-700 font-['Poppins'] outline-none flex-1"}),e.jsx("span",{className:"text-[12px] text-black font-['Poppins']",children:"Search"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[12px] text-[#7b7b7b] font-['Poppins']",children:"Sort by"}),e.jsx("div",{className:"bg-[#f9f9f9] rounded-lg px-2 py-2",children:e.jsxs("select",{value:Tt,onChange:o=>Et(o.target.value),className:"bg-transparent text-[12px] text-black font-['Poppins'] outline-none cursor-pointer",children:[e.jsx("option",{value:"newest",children:"Newest"}),e.jsx("option",{value:"oldest",children:"Oldest"}),e.jsx("option",{value:"amount",children:"Amount"})]})})]}),e.jsxs("button",{onClick:()=>{alert("Use the Purchase tab in sidebar to add new purchases")},className:"bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] flex items-center gap-1 h-[48px] pl-3 pr-4 py-[6px] rounded-lg",children:[e.jsx(oa,{}),e.jsx("span",{className:"text-[15px] font-bold text-white tracking-[-0.3px] font-['Lato']",children:"Add Purchase"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 px-3 sm:px-5 mt-4",children:[e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg h-auto min-h-[80px] sm:h-[100px] w-full sm:w-[396px] overflow-hidden px-[18px] py-5",children:[e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[32px] font-bold text-[#da3e00] tracking-[0.16px] font-['Lato']",children:["৳",at.totalAmount.toLocaleString("en-IN"),".00"]}),e.jsx("p",{className:"text-[12px] text-black font-['Poppins'] mt-2",children:"Total purchase value"})]}),e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg h-auto min-h-[80px] sm:h-[100px] w-[calc(50%-6px)] sm:w-[148px] overflow-hidden px-[18px] py-5",children:[e.jsx("p",{className:"text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[32px] font-bold text-[#022f37] tracking-[0.16px] font-['Lato']",children:at.totalPurchases}),e.jsx("p",{className:"text-[12px] text-black font-['Poppins'] mt-2",children:"Total Purchase"})]}),e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg h-auto min-h-[80px] sm:h-[100px] w-[calc(50%-6px)] sm:w-[148px] overflow-hidden px-[18px] py-5",children:[e.jsx("p",{className:"text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[32px] font-bold text-[#022f37] tracking-[0.16px] font-['Lato']",children:at.categories}),e.jsx("p",{className:"text-[12px] text-black font-['Poppins'] mt-2",children:"Categories"})]}),e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg h-auto min-h-[100px] w-full sm:flex-1 overflow-hidden px-[18px] py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-[12px] text-black font-['Poppins']",children:"Actions"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>Be(!0),className:"bg-white flex items-center gap-1 px-[6px] py-[6px] rounded",children:[e.jsx(la,{}),e.jsx("span",{className:"text-[12px] text-black font-['Poppins']",children:"Add Category"})]}),e.jsxs("button",{onClick:Or,className:"bg-white flex items-center gap-1 px-[6px] py-[6px] rounded",children:[e.jsx(ia,{}),e.jsx("span",{className:"text-[12px] text-black font-['Poppins']",children:"Print"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-[7px] mt-3",children:[e.jsx("span",{className:"text-[12px] text-black font-['Poppins']",children:"Filter by:"}),e.jsxs("div",{className:"bg-white flex-1 flex items-center justify-between px-3 py-[11px] rounded",children:[e.jsxs("select",{value:ds,onChange:o=>zs(o.target.value),className:"text-[12px] text-black font-['Poppins'] bg-transparent border-none outline-none flex-1 cursor-pointer",children:[e.jsx("option",{value:"",children:"Category"}),I.map(o=>e.jsx("option",{value:o.name,children:o.name},o.id||o.name))]}),e.jsx(_e,{size:18,className:"text-gray-400"})]})]})]})]}),e.jsxs("div",{className:"mt-4 px-2 sm:px-5 overflow-x-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#38bdf8]/10 to-[#1e90ff]/10 h-[48px] flex items-center rounded-t-lg min-w-[700px]",children:[e.jsx("div",{className:"w-12 flex-shrink-0 text-center",children:e.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-[#eaf8e7] accent-[#38bdf8]",checked:Yt.size===wt.length&&wt.length>0,onChange:()=>{Yt.size===wt.length?c(new Set):c(new Set(wt.map(o=>o._id)))}})}),e.jsx("div",{className:"w-14 flex-shrink-0",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"SL"})}),e.jsx("div",{className:"w-16 flex-shrink-0",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Doc"})}),e.jsx("div",{className:"flex-1 min-w-[120px]",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Name"})}),e.jsx("div",{className:"w-28 flex-shrink-0",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Number"})}),e.jsx("div",{className:"w-28 flex-shrink-0",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Category"})}),e.jsx("div",{className:"w-28 flex-shrink-0",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Date"})}),e.jsx("div",{className:"w-24 flex-shrink-0 text-center",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Amount"})}),e.jsx("div",{className:"w-16 flex-shrink-0 text-center",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Action"})})]}),Xe?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx($t,{className:"animate-spin text-[#38bdf8]",size:24})}):wt.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[e.jsx(sr,{}),e.jsx("p",{className:"mt-4 text-[14px]",children:"No purchases found."})]}):wt.map((o,h)=>e.jsxs("div",{className:"h-[68px] flex items-center border-b border- min-w-[700px] [#b9b9b9]/50 hover:bg-gray-50",children:[e.jsx("div",{className:"w-12 flex-shrink-0 text-center",children:e.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-[#eaf8e7] accent-[#38bdf8]",checked:Yt.has(o._id),onChange:()=>Mr(o._id)})}),e.jsx("div",{className:"w-14 flex-shrink-0",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] font-['Poppins']",children:xt.length-(Ye-1)*ue-h})}),e.jsx("div",{className:"w-16 flex-shrink-0",children:e.jsx("div",{className:"bg-[#f5f5f5] w-[46px] h-[46px] rounded-lg flex items-center justify-center",children:o.items?.[0]?.productImage?e.jsx("img",{src:o.items[0].productImage,alt:"",className:"w-full h-full object-cover rounded-lg"}):e.jsx(Ut,{size:20,className:"text-gray-400"})})}),e.jsx("div",{className:"flex-1 min-w-[120px]",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] font-['Poppins'] truncate",children:o.supplierName||"N/A"})}),e.jsx("div",{className:"w-28 flex-shrink-0",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] font-['Poppins']",children:o.mobileNumber||"-"})}),e.jsx("div",{className:"w-28 flex-shrink-0",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] font-['Poppins']",children:"Product Buy"})}),e.jsx("div",{className:"w-28 flex-shrink-0",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] font-['Poppins']",children:new Date(o.createdAt).toLocaleDateString("en-GB").replace(/\//g,"-")})}),e.jsx("div",{className:"w-24 flex-shrink-0 text-center",children:e.jsxs("p",{className:"text-[12px] text-[#da0000] font-['Poppins']",children:["৳",o.totalAmount?.toLocaleString("en-IN")||0]})}),e.jsxs("div",{className:"w-16 flex-shrink-0 flex justify-center relative",children:[e.jsx("button",{onClick:()=>J(b===o._id?null:o._id),className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(ca,{})}),b===o._id&&e.jsx("div",{className:"absolute right-0 top-8 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[120px]",children:e.jsxs("button",{onClick:()=>$r(o._id),className:"w-full flex items-center gap-2 px-3 py-2 text-[12px] text-red-600 hover:bg-gray-50",children:[e.jsx(lt,{size:14})," Delete"]})})]})]},o._id))]}),wt.length>0&&e.jsxs("div",{className:"flex items-center justify-center gap-[279px] py-5",children:[e.jsxs("button",{onClick:()=>tt(o=>Math.max(1,o-1)),disabled:Ye===1,className:"bg-white flex items-center gap-1 h-[42px] pl-2 pr-3 py-[10px] rounded-lg shadow-[0px_1px_3px_0px_rgba(0,0,0,0.2)] disabled:opacity-50",children:[e.jsx(da,{}),e.jsx("span",{className:"text-[15px] font-medium text-black font-['Lato']",children:"Previous"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[Array.from({length:Math.min(5,It)},(o,h)=>h+1).map(o=>e.jsx("button",{onClick:()=>tt(o),className:`w-9 h-9 flex items-center justify-center rounded ${Ye===o?"bg-[#dff5ff] text-[#1e90ff]":"border border-[#d1d5db] text-[#023337]"} text-[15px] font-medium font-['Lato']`,children:o},o)),It>5&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"w-9 h-9 flex items-center justify-center border border-[#d1d5db] rounded text-[15px] font-bold text-[#023337] font-['Lato']",children:"....."}),e.jsx("button",{onClick:()=>tt(It),className:"w-9 h-9 flex items-center justify-center border border-[#d1d5db] rounded text-[15px] font-medium text-[#023337] font-['Lato']",children:It})]})]}),e.jsxs("button",{onClick:()=>tt(o=>Math.min(It,o+1)),disabled:Ye===It,className:"bg-white flex items-center gap-1 h-[42px] pl-3 pr-2 py-[10px] rounded-lg shadow-[0px_1px_3px_0px_rgba(0,0,0,0.2)] disabled:opacity-50",children:[e.jsx("span",{className:"text-[15px] font-medium text-black font-['Lato']",children:"Next"}),e.jsx(xa,{})]})]}),Me&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 w-full max-w-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-[18px] font-bold text-[#023337] font-['Lato']",children:"Add Category"}),e.jsx("button",{onClick:()=>Be(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ge,{size:20})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("input",{type:"text",value:Qe,onChange:o=>dt(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-[14px] font-['Poppins']",placeholder:"Enter category name"}),e.jsx("button",{onClick:zr,className:"bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] text-white py-3 rounded-lg text-[15px] font-bold font-['Lato']",children:"Add Category"})]})]})})]}),Vr=()=>e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 pt-5 pb-2",children:[e.jsx("h2",{className:"text-[18px] font-bold text-[#023337] tracking-[0.09px]",children:"Due List"}),e.jsxs("button",{onClick:Fr,className:"flex items-center gap-2 bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] text-white px-4 h-[48px] rounded-lg text-[15px] font-bold tracking-[-0.3px]",children:[e.jsx(ns,{size:20}),"Print Due List"]})]}),e.jsxs("div",{className:"flex gap-4 px-5 py-4",children:[e.jsxs("div",{className:"flex-1 bg-[#f9f9f9] rounded-lg h-[80px] px-[18px] py-5 flex flex-col justify-center",children:[e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[32px] font-bold text-[#008c09] tracking-[0.16px]",children:["৳",vt.totalWillGet.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-[12px] text-black",children:"You will Get (Total)"})]}),e.jsxs("div",{className:"flex-1 bg-[#f9f9f9] rounded-lg h-[80px] px-[18px] py-5 flex flex-col justify-center",children:[e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[32px] font-bold text-[#da0000] tracking-[0.16px]",children:["৳",vt.totalWillGive.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-[12px] text-black",children:"You will Give (Total)"})]})]}),e.jsx("div",{className:"px-5 pb-3",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-4 py-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ba,{size:16,className:"text-blue-600"}),e.jsxs("span",{className:"text-sm text-blue-700",children:["Showing transactions: ",e.jsx("span",{className:"font-semibold",children:z()})]})]}),ms&&Nt.length>0&&e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-[#008c09]",children:["Get: ৳",Ca.totalWillGet.toLocaleString("en-IN")]}),e.jsxs("span",{className:"text-[#da0000]",children:["Give: ৳",Ca.totalWillGive.toLocaleString("en-IN")]})]})]})}),e.jsxs("div",{className:"flex",style:{height:"calc(100vh - 380px)",minHeight:"400px"},children:[e.jsxs("div",{className:"w-[400px] flex flex-col",children:[e.jsx("div",{className:"flex gap-0 px-5 bg-white",children:["Customer","Supplier","Employee"].map(o=>e.jsx("button",{onClick:()=>Br(o),className:`px-[22px] py-3 text-[16px] font-medium border-b-2 transition-colors ${pt===o?"text-transparent bg-clip-text bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] border-[#38bdf8]":"text-black border-transparent hover:text-[#333]"}`,children:o},o))}),e.jsx("div",{className:"px-5 py-3",children:e.jsxs("div",{className:"bg-[#f9f9f9] h-[34px] rounded-lg flex items-center px-2",children:[e.jsx(it,{size:20,className:"text-black mr-2"}),e.jsx("input",{type:"text",placeholder:"Search",value:ps,onChange:o=>gr(o.target.value),className:"bg-transparent border-none outline-none flex-1 text-[12px] text-black placeholder:text-black"})]})}),e.jsx("div",{className:"flex-1 overflow-auto px-5",children:hr?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx($t,{size:24,className:"animate-spin text-[#38bdf8]"})}):Jt.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#888]",children:[e.jsx(Ut,{size:40,className:"mb-2 opacity-50"}),e.jsxs("span",{className:"text-[13px]",children:["No ",pt.toLowerCase(),"s found"]})]}):e.jsx("div",{className:"flex flex-col gap-2",children:Jt.map(o=>e.jsxs("div",{onClick:()=>Rr(o._id),className:`flex items-center gap-[11px] py-2 cursor-pointer transition-colors border-b border-[#e5e5e5] ${mt===o._id?"bg-[#f0f9ff]":"hover:bg-[#fafafa]"}`,children:[e.jsx("div",{className:`w-[2px] h-[46px] rounded-full ${o.totalOwedToMe>o.totalIOweThemNumber?"bg-[#008c09]":"bg-[#da0000]"}`}),e.jsxs("div",{className:"flex-1 flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[16px] font-semibold text-black",children:o.name}),e.jsx("span",{className:"text-[12px] text-black",children:o.phone||"No phone"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-[2px] text-[12px]",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-black",children:"Give: "}),e.jsxs("span",{className:"font-semibold text-[#da0000]",children:["৳",(o.totalIOweThemNumber||0).toLocaleString("en-IN")]})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-black",children:"Get: "}),e.jsxs("span",{className:"font-semibold text-[#008c09]",children:["৳",(o.totalOwedToMe||0).toLocaleString("en-IN")]})]})]})]})]},o._id))})})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-end gap-4 px-5 py-3",children:[e.jsxs("button",{onClick:()=>ka(!0),className:"flex items-center gap-2 bg-[#f9f9f9] text-black px-4 h-[48px] rounded-lg text-[15px] font-bold tracking-[-0.3px]",children:[e.jsx($t,{size:20}),"Due History"]}),e.jsxs("button",{onClick:()=>Bs(!0),className:"flex items-center gap-2 bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] text-white px-4 h-[48px] rounded-lg text-[15px] font-bold tracking-[-0.3px]",children:[e.jsx(ot,{size:20}),"Add Due"]})]}),e.jsx("div",{className:"flex-1 mx-5 mb-5 bg-[#f9f9f9] rounded-lg overflow-auto",children:ms?Nt.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#888]",children:[e.jsx(Ut,{size:40,className:"mb-2 opacity-50"}),e.jsx("span",{className:"text-[13px]",children:"No transactions in this date range"})]}):e.jsx("div",{className:"p-4",children:Nt.map((o,h)=>e.jsxs("div",{className:`flex items-center justify-between py-3 ${h!==Nt.length-1?"border-b border-[#e5e5e5]":""}`,children:[e.jsxs("div",{className:"flex flex-col gap-[2px] w-[145px]",children:[e.jsx("span",{className:"text-[14px] font-medium text-black",children:o.transactionType||o.items||"Product purchase"}),e.jsx("span",{className:"text-[12px] text-black",children:new Date(o.transactionDate).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),e.jsx("p",{className:"text-[10px] text-[#b0b0b0] leading-[12px] w-[277px] line-clamp-3",children:o.notes||"No notes"}),e.jsxs("div",{className:"flex items-center gap-4 justify-end w-[224px]",children:[e.jsxs("span",{className:`text-[16px] font-semibold w-[106px] ${o.direction==="INCOME"?"text-[#008c09]":"text-[#da0000]"}`,children:[o.direction==="INCOME"?"+ ":"- ","৳",o.amount.toLocaleString("en-IN")]}),e.jsx("span",{className:`px-[9px] py-[2px] rounded-[30px] text-[12px] font-medium w-[62px] text-center ${o.status==="Paid"?"bg-[#d4f4d4] text-[#008c09]":"bg-[#fff2bc] text-[#2c2400]"}`,children:o.status==="Paid"?"Paid":"Pending"}),e.jsx("button",{className:"p-1 hover:bg-[#e5e5e5] rounded",children:e.jsx(In,{size:20,className:"text-[#888]"})})]})]},o._id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#888]",children:[e.jsx(Ut,{size:48,className:"mb-3 opacity-50"}),e.jsxs("span",{className:"text-[14px]",children:["Select a ",pt.toLowerCase()," to view transactions"]})]})})]})]}),e.jsx(rn,{isOpen:br,onClose:()=>Bs(!1),onSave:async o=>{try{await ze.createTransaction(o);const[h,y,R]=await Promise.all([ze.getEntities("Customer"),ze.getEntities("Supplier"),ze.getEntities("Employee")]);Fs([...h,...y,...R]);const Te=await ze.getEntities(pt);if(xs(Te),ms){const rt=await ze.getTransactions(ms._id);Zt(rt)}Bs(!1)}catch(h){console.error("Error creating due transaction:",h)}}}),e.jsx(Un,{isOpen:fr,onClose:()=>ka(!1)})]}),Hr=()=>e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 px-3 sm:px-5 pt-3 pb-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h2",{className:"text-[18px] font-bold text-[#023337] tracking-[0.09px] font-['Lato']",children:"Expense Summary"}),e.jsx("p",{className:"text-[12px] text-black font-['Poppins']",children:"Total expenses overview for the selected period."})]}),e.jsxs("button",{onClick:()=>{re({status:"Published"}),oe(null),ne(!0)},className:"bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] flex items-center gap-1 h-[48px] pl-3 pr-4 py-[6px] rounded-lg",children:[e.jsx(oa,{}),e.jsx("span",{className:"text-[15px] font-bold text-white tracking-[-0.3px] font-['Lato']",children:"Add Expense"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 px-3 sm:px-5 mt-4",children:[e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg h-auto min-h-[80px] sm:h-[100px] w-full sm:w-[396px] overflow-hidden px-[18px] py-5",children:[e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[32px] font-bold text-[#da3e00] tracking-[0.16px] font-['Lato']",children:["৳",ke.totalAmount.toLocaleString("en-IN"),".00"]}),e.jsx("p",{className:"text-[12px] text-black font-['Poppins'] mt-2",children:"Total expenses with product cost"})]}),e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg h-auto min-h-[80px] sm:h-[100px] w-[calc(50%-6px)] sm:w-[148px] overflow-hidden px-[18px] py-5",children:[e.jsx("p",{className:"text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[32px] font-bold text-[#022f37] tracking-[0.16px] font-['Lato']",children:ke.totalTransactions}),e.jsx("p",{className:"text-[12px] text-black font-['Poppins'] mt-2",children:"Total Transactions"})]}),e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg h-auto min-h-[80px] sm:h-[100px] w-[calc(50%-6px)] sm:w-[148px] overflow-hidden px-[18px] py-5",children:[e.jsx("p",{className:"text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[32px] font-bold text-[#022f37] tracking-[0.16px] font-['Lato']",children:ke.categories}),e.jsx("p",{className:"text-[12px] text-black font-['Poppins'] mt-2",children:"Categories"})]}),e.jsxs("div",{className:"bg-[#f9f9f9] rounded-lg h-auto min-h-[100px] w-full sm:flex-1 overflow-hidden px-[18px] py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-[12px] text-black font-['Poppins']",children:"Actions"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>pe(!0),className:"bg-white flex items-center gap-1 px-[6px] py-[6px] rounded",children:[e.jsx(la,{}),e.jsx("span",{className:"text-[12px] text-black font-['Poppins']",children:"Add Category"})]}),e.jsxs("button",{onClick:Lr,className:"bg-white flex items-center gap-1 px-[6px] py-[6px] rounded",children:[e.jsx(ia,{}),e.jsx("span",{className:"text-[12px] text-black font-['Poppins']",children:"Print"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-[7px] mt-3",children:[e.jsx("span",{className:"text-[12px] text-black font-['Poppins']",children:"Filter by:"}),e.jsxs("div",{className:"bg-white flex-1 flex items-center justify-between px-3 py-[11px] rounded",children:[e.jsxs("select",{value:d,onChange:o=>Z(o.target.value),className:"text-[12px] text-black font-['Poppins'] bg-transparent border-none outline-none flex-1 cursor-pointer",children:[e.jsx("option",{value:"",children:"All Categories"}),I.map(o=>e.jsx("option",{value:o.name,children:o.name},o.id||o.name))]}),e.jsx(_e,{size:18,className:"text-gray-400"})]})]})]})]}),e.jsxs("div",{className:"mt-4 px-2 sm:px-5 overflow-x-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#38bdf8]/10 to-[#1e90ff]/10 h-[48px] flex items-center rounded-t-lg min-w-[700px]",children:[e.jsx("div",{className:"w-[60px] text-center",children:e.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-[#eaf8e7] accent-[#38bdf8]",checked:be.size===L.length&&L.length>0,onChange:()=>{be.size===L.length?me(new Set):me(new Set(L.map(o=>o.id)))}})}),be.size>0&&e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs("span",{className:"text-[12px] text-blue-700 font-medium",children:[be.size," selected"]}),e.jsxs("button",{onClick:Sr,className:"flex items-center gap-1 px-2 py-1 bg-red-500 text-white rounded text-[12px] font-medium hover:bg-red-600",children:[e.jsx(lt,{size:14}),"Delete"]}),e.jsxs("button",{onClick:()=>me(new Set),className:"flex items-center gap-1 px-2 py-1 bg-gray-200 text-gray-700 rounded text-[12px] font-medium hover:bg-gray-300",children:[e.jsx(ge,{size:14}),"Clear"]})]}),e.jsx("div",{className:`w-[80px] ${be.size===0?"":"ml-auto"}`,children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"SL"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Name"})}),e.jsx("div",{className:"w-[150px]",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Category"})}),e.jsx("div",{className:"w-[120px] text-center",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Amount"})}),e.jsx("div",{className:"w-[120px]",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Date"})}),e.jsx("div",{className:"w-[80px] text-center",children:e.jsx("p",{className:"text-[16px] font-medium text-black font-['Poppins']",children:"Action"})})]}),W&&L.length===0?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx($t,{className:"animate-spin text-[#38bdf8]",size:24})}):L.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[e.jsx(er,{}),e.jsx("p",{className:"mt-4 text-[14px]",children:'No expenses found. Click "Add Expense" to create one.'})]}):L.map((o,h)=>e.jsxs("div",{className:"h-[68px] flex items-center border-b border- min-w-[700px] [#b9b9b9]/50 hover:bg-gray-50",children:[e.jsx("div",{className:"w-[60px] text-center",children:e.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-[#eaf8e7] accent-[#38bdf8]",checked:be.has(o.id),onChange:()=>Cr(o.id)})}),e.jsx("div",{className:"w-[80px]",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] font-['Poppins']",children:L.length-h})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] font-['Poppins']",children:o.name})}),e.jsx("div",{className:"w-[150px]",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] font-['Poppins']",children:o.category})}),e.jsx("div",{className:"w-[120px] text-center",children:e.jsxs("p",{className:"text-[12px] text-[#da0000] font-['Poppins']",children:["৳",o.amount.toLocaleString("en-IN")]})}),e.jsx("div",{className:"w-[120px]",children:e.jsx("p",{className:"text-[12px] text-[#1d1a1a] font-['Poppins']",children:new Date(o.date).toLocaleDateString("en-GB").replace(/\//g,"-")})}),e.jsxs("div",{className:"w-[80px] flex justify-center relative",children:[e.jsx("button",{onClick:()=>{const y=o.id||`expense-${h}`;Le(Oe===y?null:y)},className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(ca,{})}),Oe===(o.id||`expense-${h}`)&&e.jsxs("div",{className:"absolute right-0 top-8 bg-white rounded-[8px] shadow-[0px_3px_19.5px_0px_rgba(0,0,0,0.13)] z-10 overflow-hidden py-2",children:[e.jsxs("button",{onClick:()=>{We(o),Le(null)},className:"w-full h-[48px] flex items-center gap-2 px-3 sm:px-4 lg:px-6 hover:bg-gray-50",children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 20h9"}),e.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]}),e.jsx("span",{className:"text-[16px] font-semibold text-black font-['Lato']",children:"Details"})]}),e.jsxs("button",{onClick:()=>{re(o),oe(o.id),ne(!0),Le(null)},className:"w-full h-[48px] flex items-center gap-2 px-3 sm:px-4 lg:px-6 hover:bg-gray-50",children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 20h9"}),e.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]}),e.jsx("span",{className:"text-[16px] font-semibold text-black font-['Lato']",children:"Edit"})]}),e.jsxs("button",{onClick:()=>Nr(o.id),className:"w-full h-[48px] flex items-center gap-2 px-3 sm:px-4 lg:px-6 hover:bg-gray-50",children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#da0000",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),e.jsx("span",{className:"text-[16px] font-semibold text-[#da0000] font-['Lato']",children:"Delete"})]})]})]})]},o.id||`expense-${h}`))]}),L.length>0&&e.jsxs("div",{className:"flex items-center justify-center gap-[279px] py-5",children:[e.jsxs("button",{onClick:()=>A(o=>Math.max(1,o-1)),disabled:C===1,className:"bg-white flex items-center gap-1 h-[42px] pl-2 pr-3 py-[10px] rounded-lg shadow-[0px_1px_3px_0px_rgba(0,0,0,0.2)] disabled:opacity-50",children:[e.jsx(da,{}),e.jsx("span",{className:"text-[15px] font-medium text-black font-['Lato']",children:"Previous"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[Array.from({length:Math.min(5,m)},(o,h)=>h+1).map(o=>e.jsx("button",{onClick:()=>A(o),className:`w-9 h-9 flex items-center justify-center rounded ${C===o?"bg-[#dff5ff] text-[#1e90ff]":"border border-[#d1d5db] text-[#023337]"} text-[15px] font-medium font-['Lato']`,children:o},o)),m>5&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"w-9 h-9 flex items-center justify-center border border-[#d1d5db] rounded text-[15px] font-bold text-[#023337] font-['Lato']",children:"....."}),e.jsx("button",{onClick:()=>A(m),className:"w-9 h-9 flex items-center justify-center border border-[#d1d5db] rounded text-[15px] font-medium text-[#023337] font-['Lato']",children:m})]})]}),e.jsxs("button",{onClick:()=>A(o=>Math.min(m,o+1)),disabled:C===m,className:"bg-white flex items-center gap-1 h-[42px] pl-3 pr-2 py-[10px] rounded-lg shadow-[0px_1px_3px_0px_rgba(0,0,0,0.2)] disabled:opacity-50",children:[e.jsx("span",{className:"text-[15px] font-medium text-black font-['Lato']",children:"Next"}),e.jsx(xa,{})]})]}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-[8px] p-5 w-full max-w-[548px] overflow-y-auto max-h-[90vh]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-4 sm:mb-5",children:[e.jsx("h3",{className:"text-[16px] font-semibold text-black text-center font-['Poppins']",children:X?"Edit Expense":"Add Expense"}),e.jsx("button",{onClick:()=>{ne(!1),oe(null)},className:"text-gray-500 hover:text-gray-700",children:e.jsx(ge,{size:20})})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:["Expense Name",e.jsx("span",{className:"text-[#da0000]",children:"*"})]}),e.jsx("input",{type:"text",value:M.name||"",onChange:o=>re(h=>({...h,name:o.target.value})),className:"w-full h-[48px] px-3 py-2.5 bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] text-[15px] font-['Lato'] text-[#023337] placeholder-[#aeaeae]",placeholder:"Enter expense name"})]}),e.jsxs("div",{className:"flex flex-col gap-3 relative",children:[e.jsxs("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:["Category",e.jsx("span",{className:"text-[#da0000]",children:"*"})]}),e.jsxs("div",{onClick:()=>ee(!U),className:"w-full h-[48px] px-3 py-2.5 bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] text-[15px] font-['Lato'] text-[#023337] cursor-pointer flex items-center justify-between",children:[e.jsx("span",{className:M.category?"text-[#023337]":"text-[#aeaeae]",children:M.category||"Select Category"}),e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#023337",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${U?"rotate-180":""}`,children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),U&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white rounded-[16px] shadow-[0px_3px_19.5px_0px_rgba(0,0,0,0.13)] z-10 overflow-hidden",children:[e.jsx("div",{className:"p-4 flex flex-col gap-2 max-h-[200px] overflow-y-auto",children:I.map(o=>e.jsxs("div",{onClick:()=>{re(h=>({...h,category:o.name})),ee(!1)},className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${M.category===o.name?"border-[#38bdf8] bg-[#38bdf8]":"border-gray-300"}`,children:M.category===o.name&&e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsx("span",{className:"text-[15px] font-medium text-black font-['Poppins']",children:o.name})]},o.id||o.name))}),e.jsx("div",{className:"p-4 pt-2",children:e.jsxs("button",{onClick:o=>{o.stopPropagation(),ee(!1),pe(!0)},className:"flex items-center gap-2.5 px-3 py-3 bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] rounded-[8px] text-white",children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),e.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),e.jsx("span",{className:"text-[15px] font-medium font-['Poppins']",children:"Add New Category"})]})})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[e.jsxs("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:["Amount",e.jsx("span",{className:"text-[#da0000]",children:"*"})]}),e.jsx("input",{type:"number",value:M.amount||"",onChange:o=>re(h=>({...h,amount:Number(o.target.value)})),className:"w-full h-[48px] px-3 py-2.5 bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] text-[15px] font-['Lato'] text-[#023337] placeholder-[#aeaeae]",placeholder:"0.00"})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[e.jsxs("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:["Date",e.jsx("span",{className:"text-[#da0000]",children:"*"})]}),e.jsx("input",{type:"date",value:M.date||"",onChange:o=>re(h=>({...h,date:o.target.value})),className:"w-full h-[48px] px-3 py-2.5 bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] text-[15px] font-['Lato'] text-[#023337]"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:"Image Upload"}),e.jsx("div",{className:"w-full h-[153px] bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] flex flex-col items-center justify-center gap-4 cursor-pointer hover:bg-[#f3f4f6] transition-colors",onClick:()=>document.getElementById("expense-image-upload")?.click(),children:M.imageUrl?e.jsxs("div",{className:"relative w-full h-full p-2",children:[e.jsx("img",{src:M.imageUrl,alt:"Expense",className:"w-full h-full object-contain rounded"}),e.jsx("button",{onClick:o=>{o.stopPropagation(),re(h=>({...h,imageUrl:void 0}))},className:"absolute top-3 right-3 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(ge,{size:14})})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[15px] text-[#aeaeae] font-['Lato']",children:"Upload Doc"}),e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#aeaeae",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"17 8 12 3 7 8"}),e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})]})}),e.jsx("input",{id:"expense-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:o=>{const h=o.target.files?.[0];if(h){const y=new FileReader;y.onloadend=()=>{re(R=>({...R,imageUrl:y.result}))},y.readAsDataURL(h)}}})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:"Note"}),e.jsx("input",{type:"text",value:M.note||"",onChange:o=>re(h=>({...h,note:o.target.value})),className:"w-full h-[48px] px-3 py-2.5 bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] text-[15px] font-['Lato'] text-[#023337] placeholder-[#aeaeae]",placeholder:"Add any notes..."})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-4",children:[e.jsx("button",{onClick:()=>{ne(!1),oe(null)},className:"h-[40px] px-4 py-2 bg-white border border-[#e5e7eb] rounded-[8px] text-[15px] font-bold text-[#023337] font-['Lato'] tracking-[-0.3px] min-w-[111px]",children:"Cancel"}),e.jsx("button",{onClick:vr,className:"h-[40px] px-4 py-2 bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] rounded-[8px] text-[15px] font-bold text-white font-['Lato'] tracking-[-0.3px]",children:X?"Update Expense":"Save Expense"})]})]})]})}),de&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 w-full max-w-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-[18px] font-bold text-[#023337] font-['Lato']",children:"Add Category"}),e.jsx("button",{onClick:()=>pe(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ge,{size:20})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("input",{type:"text",value:K,onChange:o=>V(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-[14px] font-['Poppins']",placeholder:"Enter category name"}),e.jsx("button",{onClick:kr,className:"bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] text-white py-3 rounded-lg text-[15px] font-bold font-['Lato']",children:"Add Category"})]})]})}),fe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-[8px] p-5 w-full max-w-[548px] max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-4 sm:mb-5",children:[e.jsx("h3",{className:"text-[16px] font-semibold text-black text-center font-['Poppins']",children:"Expense Details"}),e.jsx("button",{onClick:()=>We(null),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ge,{size:20})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:"Expense Name"}),e.jsx("div",{className:"w-full h-[48px] px-3 py-2.5 bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] flex items-center",children:e.jsx("span",{className:"text-[15px] font-['Lato'] text-black",children:fe.name})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:"Category"}),e.jsx("div",{className:"w-full h-[48px] px-3 py-2.5 bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] flex items-center",children:e.jsx("span",{className:"text-[15px] font-['Lato'] text-black",children:fe.category})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[e.jsx("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:"Amount"}),e.jsx("div",{className:"w-full h-[48px] px-3 py-2.5 bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] flex items-center",children:e.jsxs("span",{className:"text-[15px] font-['Lato'] text-black",children:["৳",fe.amount.toLocaleString("en-IN")]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[e.jsx("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:"Date"}),e.jsx("div",{className:"w-full h-[48px] px-3 py-2.5 bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] flex items-center",children:e.jsx("span",{className:"text-[15px] font-['Lato'] text-black",children:new Date(fe.date).toLocaleDateString("en-GB").replace(/\//g,"-")})})]})]}),fe.imageUrl&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:"Image"}),e.jsx("div",{className:"w-full h-[153px] bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:fe.imageUrl,alt:"Expense",className:"max-w-full max-h-full object-contain"})})]}),fe.note&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[15px] font-bold text-[#023337] font-['Lato']",children:"Note"}),e.jsx("div",{className:"w-full min-h-[48px] px-3 py-2.5 bg-[#f9fafb] border border-[#e5e7eb] rounded-[8px] flex items-center",children:e.jsx("span",{className:"text-[15px] font-['Lato'] text-black",children:fe.note})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-4",children:[e.jsx("button",{onClick:()=>We(null),className:"h-[40px] px-4 py-2 bg-white border border-[#e5e7eb] rounded-[8px] text-[15px] font-bold text-[#023337] font-['Lato'] tracking-[-0.3px] min-w-[111px]",children:"Close"}),e.jsx("button",{onClick:()=>{re(fe),oe(fe.id),We(null),ne(!0)},className:"h-[40px] px-4 py-2 bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] rounded-[8px] text-[15px] font-bold text-white font-['Lato'] tracking-[-0.3px]",children:"Edit Expense"})]})]})]})})]}),qr=()=>{switch(p){case"expense":return Hr();case"income":return Ir();case"purchase":return Ur();case"due":return Vr();case"note":return e.jsx(Wn,{tenantId:l});case"profit":default:return wr()}};return e.jsx("div",{className:"bg-[#f9f9f9] min-h-screen font-['Poppins']",children:e.jsxs("div",{className:"bg-white rounded-lg mx-2 sm:mx-5 my-2 sm:my-5 p-2 sm:p-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-4 sm:mb-5",children:[e.jsx("h1",{className:"text-lg sm:text-xl lg:text-lg sm:text-xl lg:text-[22px] font-bold text-[#023337] tracking-[0.11px] font-['Lato']",children:"Business Report"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 lg:gap-6",children:[e.jsxs("button",{onClick:Wr,className:"flex items-center gap-2 px-2 py-2 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx("span",{className:"text-[12px] text-black font-['Poppins']",children:"Refresh"}),e.jsx($t,{size:16,className:"text-gray-600"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 relative",children:[jr.filter(o=>o.id!=="custom").map(o=>e.jsx("button",{onClick:()=>{f(o.id),S(!1)},className:`px-2 py-1 rounded-lg text-[14px] font-medium font-['Poppins'] min-w-[56px] sm:min-w-[72px] flex items-center justify-center gap-1 sm:gap-2 text-[12px] sm:text-[14px] ${u===o.id?"bg-gradient-to-b from-[#ff6a00] to-[#ff9f1c] text-white":"bg-[#f9f9f9] text-[#a7a7a7]"}`,children:o.label},o.id)),u==="month"&&e.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 border border-[#38bdf8] rounded-lg text-[14px] font-medium text-[#1e90ff] font-['Poppins']",children:[e.jsx("button",{onClick:()=>$(new Date(q.getFullYear(),q.getMonth()-1)),className:"p-0.5 hover:bg-gray-100 rounded",children:e.jsx($s,{size:14})}),e.jsx("span",{className:"min-w-[90px] sm:min-w-[110px] text-center text-[12px] sm:text-[14px]",children:q.toLocaleDateString("en-GB",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>$(new Date(q.getFullYear(),q.getMonth()+1)),className:"p-0.5 hover:bg-gray-100 rounded",children:e.jsx(qe,{size:14})})]}),u==="custom"&&F.startDate&&F.endDate&&e.jsx("div",{className:"px-3 py-1 border border-[#38bdf8] rounded-lg text-[14px] font-medium text-[#1e90ff] font-['Poppins']",children:z()}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{u==="custom"?S(!k):(f("custom"),S(!0))},className:`px-2 py-1 rounded-lg text-[14px] font-medium font-['Poppins'] min-w-[56px] sm:min-w-[72px] flex items-center justify-center gap-1 sm:gap-2 text-[12px] sm:text-[14px] ${u==="custom"?"bg-gradient-to-b from-[#ff6a00] to-[#ff9f1c] text-white":"bg-[#f9f9f9] text-[#a7a7a7]"}`,children:["Custom",e.jsx(_e,{size:16,className:k?"rotate-180 transition-transform":"transition-transform"})]}),e.jsx(mr,{isOpen:k,onClose:()=>S(!1),onApply:o=>{G(o),f("custom"),S(!1)},initialDateRange:F})]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 sm:gap-4 border-b border-gray-100 mb-5 overflow-x-auto pb-0",children:yr.map(o=>{const h=o.icon,y=p===o.id;return e.jsxs("button",{onClick:()=>g(o.id),className:`flex items-center gap-1 px-3 sm:px-[22px] py-2 sm:py-3 border-b-2 whitespace-nowrap transition-colors ${y?"border-[#38bdf8]":"border-transparent"}`,children:[e.jsx(h,{}),e.jsx("span",{className:`text-[13px] sm:text-[16px] font-medium font-['Poppins'] ${y?"bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] bg-clip-text text-transparent":"text-black"}`,children:o.label})]},o.id)})}),qr()]})})},ti=Object.freeze(Object.defineProperty({__proto__:null,default:ll},Symbol.toStringTag,{value:"Module"})),il=()=>e.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 38 38",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"19",cy:"19",r:"4",fill:"#0EA5E9"}),e.jsx("path",{d:"M11 11C13.1217 8.87827 16.0435 7.68629 19.0833 7.68629C22.1232 7.68629 25.045 8.87827 27.1667 11",stroke:"#0EA5E9",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M27.1667 27.1667C25.045 29.2884 22.1232 30.4804 19.0833 30.4804C16.0435 30.4804 13.1217 29.2884 11 27.1667",stroke:"#0EA5E9",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M7 7C10.1826 3.81738 14.5435 2 19.0833 2C23.6232 2 27.984 3.81738 31.1667 7",stroke:"#0EA5E9",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M31.1667 31.1667C27.984 34.3493 23.6232 36.1667 19.0833 36.1667C14.5435 36.1667 10.1826 34.3493 7 31.1667",stroke:"#0EA5E9",strokeWidth:"2.5",strokeLinecap:"round"})]}),cl=()=>e.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 38 38",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M26.5 28V26C26.5 24.4087 25.8679 22.8826 24.7426 21.7574C23.6174 20.6321 22.0913 20 20.5 20H11.5C9.90871 20 8.38258 20.6321 7.25736 21.7574C6.13214 22.8826 5.5 24.4087 5.5 26V28",stroke:"#EA580C",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 16C19.3137 16 22 13.3137 22 10C22 6.68629 19.3137 4 16 4C12.6863 4 10 6.68629 10 10C10 13.3137 12.6863 16 16 16Z",stroke:"#EA580C",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M32.5 28V26C32.4987 24.6706 32.0478 23.3822 31.2217 22.3462C30.3957 21.3102 29.2446 20.5882 27.9583 20.3",stroke:"#EA580C",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M24.9583 4.3C26.2477 4.58649 27.4022 5.30895 28.2302 6.34696C29.0582 7.38497 29.5094 8.67688 29.5094 10.01C29.5094 11.3431 29.0582 12.635 28.2302 13.673C27.4022 14.711 26.2477 15.4335 24.9583 15.72",stroke:"#EA580C",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),dl=()=>e.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 38 38",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"19",cy:"19",r:"14",stroke:"#4338CA",strokeWidth:"2.5"}),e.jsx("ellipse",{cx:"19",cy:"19",rx:"7",ry:"14",stroke:"#4338CA",strokeWidth:"2"}),e.jsx("line",{x1:"5",y1:"19",x2:"33",y2:"19",stroke:"#4338CA",strokeWidth:"2"}),e.jsx("line",{x1:"19",y1:"5",x2:"19",y2:"33",stroke:"#4338CA",strokeWidth:"2"})]}),pa=({icon:a,title:t,subtitle:s,value:r,theme:l,loading:i=!1})=>{const g={blue:{circleClass:"bg-sky-500/20",titleColor:"text-sky-500"},orange:{circleClass:"bg-orange-500/25",titleColor:"text-orange-600"},purple:{circleClass:"bg-gradient-to-b from-violet-700/20 to-violet-900/20",titleColor:"text-indigo-700"}}[l];return e.jsxs("div",{className:"w-full h-[81px] bg-white dark:bg-gray-800 rounded-lg shadow-[0px_1px_3px_0px_rgba(0,0,0,0.10)] overflow-hidden flex items-center px-4 relative",children:[e.jsx("div",{className:`w-[198px] h-[198px] absolute -right-[37px] -top-[83px] ${g.circleClass} rounded-full`}),e.jsx("div",{className:"w-[38px] h-[38px] flex-shrink-0 z-10",children:a}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center ml-4 min-w-0 z-10",children:[e.jsx("div",{className:`${g.titleColor} text-base font-medium font-['Poppins']`,children:t}),e.jsx("div",{className:"text-black dark:text-gray-300 text-[13px] font-normal font-['Poppins']",children:s})]}),e.jsx("div",{className:"text-black dark:text-white text-xl sm:text-2xl lg:text-xl sm:text-2xl lg:text-[28px] font-medium font-['Poppins'] flex-shrink-0 z-10",children:i?e.jsx("div",{className:"w-10 h-8 bg-gray-200 dark:bg-gray-600 animate-pulse rounded"}):r})]})},xl=({visitorStats:a,tenantId:t})=>{const[s,r]=n.useState({onlineNow:0,todayVisitors:0,totalVisitors:0,last7Days:0,pageViews:0}),[l,i]=n.useState(!0);return n.useEffect(()=>{if(a){r({onlineNow:a.onlineNow||0,todayVisitors:a.todayVisitors||0,totalVisitors:a.totalVisitors||0,last7Days:a.last7Days||0,pageViews:a.pageViews||0}),i(!1);return}(async()=>{const u=t||localStorage.getItem("activeTenantId");if(!u){i(!1);return}try{const f="http://localhost:5001",[w,v]=await Promise.all([fetch(`${f}/api/visitors/${u}/stats?period=7d`),fetch(`${f}/api/visitors/${u}/online`)]);if(w.ok&&v.ok){const k=await w.json(),S=await v.json();r({onlineNow:S.online||0,todayVisitors:k.todayVisitors||0,totalVisitors:k.totalVisitors||0,last7Days:k.periodVisitors||0,pageViews:k.totalPageViews||0})}}catch(f){console.error("Error fetching visitor stats:",f)}finally{i(!1)}})();const g=setInterval(async()=>{const u=t||localStorage.getItem("activeTenantId");if(u)try{const w=await fetch(`http://localhost:5001/api/visitors/${u}/online`);if(w.ok){const v=await w.json();r(k=>({...k,onlineNow:v.online||0}))}}catch(f){console.error("Error refreshing online count:",f)}},3e4);return()=>clearInterval(g)},[a,t]),e.jsxs("div",{className:"h-full flex flex-col justify-center items-stretch gap-3.5",children:[e.jsx(pa,{icon:e.jsx(il,{}),title:"Online Now",subtitle:"Active visitors on site",value:s.onlineNow,theme:"blue",loading:l}),e.jsx(pa,{icon:e.jsx(cl,{}),title:"Today visitors",subtitle:`Last 7 days: ${s.last7Days}`,value:s.todayVisitors,theme:"orange",loading:l}),e.jsx(pa,{icon:e.jsx(dl,{}),title:"Total visitors",subtitle:`${s.pageViews} page view`,value:s.totalVisitors,theme:"purple",loading:l})]})},pl=({products:a=[{id:"1",name:"Apple iPhone 13",totalOrder:"104",status:"Stock",price:"$999.00"},{id:"2",name:"Nike Air Jordan",totalOrder:"56",status:"Stock out",price:"$999.00"},{id:"3",name:"T-shirt",totalOrder:"266",status:"Stock",price:"$999.00"},{id:"4",name:"Cross Bag",totalOrder:"506",status:"Stock",price:"$999.00"}],onDetailsClick:t,onProductClick:s})=>e.jsx("div",{className:"w-full px-4 sm:px-5 py-4 sm:py-[18px] bg-white dark:bg-gray-800 rounded-xl border border-zinc-200 dark:border-gray-700 flex flex-col justify-start items-start gap-3 overflow-hidden",children:e.jsxs("div",{className:"w-full flex flex-col justify-start items-end gap-4 sm:gap-5",children:[e.jsx("div",{className:"w-full h-8 flex justify-start items-center gap-2.5",children:e.jsx("div",{className:"justify-start text-zinc-800 dark:text-white text-base sm:text-lg font-bold font-['Lato']",children:"Best Selling Product"})}),e.jsx("div",{className:"w-full overflow-x-auto -mx-3 sm:mx-0 px-3 sm:px-0",children:e.jsxs("div",{className:"min-w-[500px] flex flex-col justify-start items-end gap-3",children:[e.jsxs("div",{className:"self-stretch bg-blue-50 dark:bg-gray-700 rounded-lg border-b inline-flex justify-start items-center",children:[e.jsx("div",{className:"w-60 self-stretch px-5 py-2 border-zinc-300 dark:border-gray-600 flex justify-start items-center gap-1",children:e.jsx("div",{className:"flex-1 justify-start text-neutral-500 dark:text-gray-400 text-xs font-medium font-['Public_Sans'] uppercase",children:"Product"})}),e.jsx("div",{className:"flex-1 self-stretch pl-5 pr-2 py-2 border-zinc-300 dark:border-gray-600 flex justify-start items-center gap-1",children:e.jsx("div",{className:"flex-1 justify-start text-neutral-500 dark:text-gray-400 text-xs font-medium font-['Public_Sans'] uppercase",children:"Total Order"})}),e.jsx("div",{className:"flex-1 self-stretch px-5 py-2 border-zinc-300 dark:border-gray-600 flex justify-start items-center gap-1",children:e.jsx("div",{className:"flex-1 justify-start text-neutral-500 dark:text-gray-400 text-xs font-medium font-['Public_Sans'] uppercase",children:"Status"})}),e.jsx("div",{className:"flex-1 px-5 py-4 border-zinc-300 dark:border-gray-600 flex justify-start items-center gap-1",children:e.jsx("div",{className:"flex-1 justify-start text-neutral-500 dark:text-gray-400 text-xs font-medium font-['Public_Sans'] uppercase",children:"Price"})})]}),e.jsx("div",{className:"self-stretch flex flex-col justify-start items-start gap-1",children:a.map(r=>e.jsxs("div",{className:"self-stretch rounded-lg border-b inline-flex justify-start items-center hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer",onClick:()=>s?.(r.id),children:[e.jsxs("div",{className:"w-60 self-stretch pr-5 pb-2 border-zinc-300 dark:border-gray-600 flex justify-start items-center gap-1",children:[e.jsx("div",{className:"w-11 h-11 relative rounded-[9.86px] overflow-hidden bg-zinc-100 dark:bg-gray-600 flex items-center justify-center",children:r.image?e.jsx("img",{className:"w-11 h-11 object-cover",src:Ke(r.image),alt:r.name}):e.jsx("span",{className:"text-zinc-400 dark:text-gray-400 text-sm font-medium",children:r.name.charAt(0)})}),e.jsx("div",{className:"flex-1 justify-start text-teal-950 dark:text-white text-base font-bold font-['Lato']",children:r.name})]}),e.jsx("div",{className:"flex-1 self-stretch pl-5 pr-2 pb-2 border-zinc-300 dark:border-gray-600 flex justify-start items-center gap-1",children:e.jsx("div",{className:"flex-1 justify-center text-zinc-800 dark:text-gray-300 text-base font-normal font-['Lato'] leading-5",children:r.totalOrder})}),e.jsx("div",{className:"flex-1 self-stretch px-5 pb-2 border-zinc-300 flex justify-start items-center gap-1",children:e.jsxs("div",{className:"flex-1 flex justify-start items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${r.status==="Stock"?"bg-emerald-500":"bg-red-500"}`}),e.jsx("div",{className:`flex-1 justify-center text-base font-normal font-['Public_Sans'] leading-5 ${r.status==="Stock"?"text-emerald-500":"text-red-500"}`,children:r.status})]})}),e.jsx("div",{className:"flex-1 self-stretch px-5 pb-2 border-zinc-300 dark:border-gray-600 flex justify-start items-center gap-1",children:e.jsx("div",{className:"text-right justify-center text-teal-950 dark:text-white text-base font-bold font-['Lato'] leading-5",children:r.price})})]},r.id))})]})}),e.jsx("button",{onClick:t,className:"w-20 sm:w-24 h-7 sm:h-8 px-2 sm:px-3 py-1 rounded-[50px] outline outline-1 outline-offset-[-1px] outline-sky-400 inline-flex justify-center items-center gap-2.5 cursor-pointer hover:bg-sky-50 transition-colors",children:e.jsx("span",{className:"justify-start text-sky-400 text-sm sm:text-base font-normal font-['Lato'] leading-6",children:"Keep it up"})})]})}),ml=({products:a=[{id:"1",name:"Apple iPhone 13",itemCode:"#FXZ-4567",price:"$999.00"},{id:"2",name:"Nike Air Jordan",itemCode:"#FXZ-4567",price:"$72.40"},{id:"3",name:"T-shirt",itemCode:"#FXZ-4567",price:"$35.40"},{id:"4",name:"Assorted Cross Bag",itemCode:"#FXZ-4567",price:"$80.00"},{id:"5",name:"Fur Pom Gloves",itemCode:"#FXZ-4567",price:"$20.00"}],onAllProductsClick:t,onProductClick:s})=>{const[r,l]=n.useState(""),i=n.useMemo(()=>{if(!r.trim())return a;const p=r.toLowerCase();return a.filter(g=>g.name.toLowerCase().includes(p)||g.itemCode.toLowerCase().includes(p))},[a,r]);return e.jsxs("div",{className:"w-full h-full px-4 py-5 bg-white dark:bg-gray-800 rounded-xl border border-zinc-200 dark:border-gray-700 flex flex-col justify-start items-start gap-4 overflow-hidden",children:[e.jsxs("div",{className:"w-full flex flex-col justify-start items-start gap-3",children:[e.jsx("div",{className:"w-full flex justify-start items-center gap-3",children:e.jsx("div",{className:"flex-1 justify-start text-zinc-800 dark:text-white text-base sm:text-lg font-bold font-['Lato']",children:"Top Products"})}),e.jsx("div",{className:"w-full p-2 bg-neutral-50 dark:bg-gray-700 rounded-lg outline outline-1 outline-offset-[-1px] outline-neutral-200 dark:outline-gray-600 flex justify-start items-center gap-1.5 overflow-hidden",children:e.jsxs("div",{className:"flex justify-start items-center gap-2 flex-1",children:[e.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 relative",children:e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"9",cy:"9",r:"6",stroke:"#71717A",strokeWidth:"1.67"}),e.jsx("path",{d:"M14 14L17 17",stroke:"#71717A",strokeWidth:"1.67",strokeLinecap:"round"})]})}),e.jsx("input",{type:"text",placeholder:"Search",value:r,onChange:p=>l(p.target.value),className:"flex-1 bg-transparent border-none outline-none text-neutral-700 dark:text-gray-200 text-xs sm:text-sm font-normal font-['Lato'] placeholder:text-neutral-500 dark:placeholder:text-gray-400"})]})})]}),e.jsx("div",{className:"w-full flex-1 flex flex-col justify-start items-start gap-3 sm:gap-4 overflow-y-auto pr-1 sm:pr-2",children:i.length===0?e.jsx("div",{className:"w-full py-8 text-center text-neutral-400 dark:text-gray-500 text-sm",children:"No products found"}):i.map(p=>e.jsxs("div",{className:"w-full pr-1 sm:pr-2 pb-2 border-b border-neutral-300 dark:border-gray-600 flex justify-start items-center gap-2 sm:gap-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer rounded",onClick:()=>s?.(p.id),children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 relative rounded-lg sm:rounded-xl overflow-hidden bg-zinc-100 dark:bg-gray-600 flex items-center justify-center flex-shrink-0",children:p.image?e.jsx("img",{className:"w-full h-full object-cover",src:Ke(p.image),alt:p.name}):e.jsx("span",{className:"text-zinc-400 dark:text-gray-400 text-sm sm:text-lg font-medium",children:p.name.charAt(0)})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center items-start gap-0.5 sm:gap-1 overflow-hidden min-w-0",children:[e.jsx("div",{className:"w-full truncate text-teal-950 dark:text-white text-sm sm:text-base font-medium font-['Lato']",children:p.name}),e.jsxs("div",{className:"text-neutral-400 dark:text-gray-500 text-[10px] sm:text-xs font-normal font-['Lato']",children:["Item: ",p.itemCode]})]}),e.jsx("div",{className:"text-right whitespace-nowrap text-teal-950 dark:text-white text-sm sm:text-base font-bold font-['Lato'] leading-5",children:p.price})]},p.id))})]})},hl=({timeFilter:a="December 2025",onTimeFilterChange:t=()=>{},onDateRangeChange:s,tenantId:r,chartData:l})=>{const[i,p]=n.useState("month"),[g,u]=n.useState(new Date),[f,w]=n.useState(!1),[v,k]=n.useState({startDate:null,endDate:null}),[S,F]=n.useState([]),[G,q]=n.useState(!0),$=[{id:"day",label:"Day"},{id:"month",label:"Month"},{id:"year",label:"Year"},{id:"all",label:"All Time"}];n.useEffect(()=>{if(l){F(l),q(!1);return}(async()=>{const A=r||localStorage.getItem("activeTenantId");if(!A){q(!1);return}try{q(!0);let Z=`http://localhost:5001/api/visitors/${A}/stats`;const D=new URLSearchParams;i==="custom"&&v.startDate&&v.endDate?(D.set("startDate",v.startDate.toISOString()),D.set("endDate",v.endDate.toISOString())):i==="month"?(D.set("month",String(g.getMonth()+1)),D.set("year",String(g.getFullYear()))):D.set("period",i);const ne=await fetch(`${Z}?${D.toString()}`);if(ne.ok){const de=await ne.json();F(de.chartData||[])}}catch(d){console.error("Error fetching chart data:",d)}finally{q(!1)}})()},[l,r,i,g,v]);const _=n.useMemo(()=>{if(S.length===0){const C=[];for(let A=6;A>=0;A--){const d=new Date;d.setDate(d.getDate()-A),C.push({date:d.toISOString().split("T")[0],mobile:0,tablet:0,desktop:0})}return C}return S.slice(-7)},[S]),j=n.useMemo(()=>Math.max(100,..._.flatMap(C=>[C.mobile,C.tablet,C.desktop])),[_]),z=C=>new Date(C).toLocaleDateString("en-GB",{month:"short",day:"numeric"}),L=C=>C===0||j===0?8:Math.max(50,Math.round(C/j*160)),T=C=>{p(C),w(!1),t(C),s&&s({start:g,end:g})},I=C=>{const A=new Date(g);A.setMonth(A.getMonth()+(C==="next"?1:-1)),u(A),t("month"),s&&s({start:A,end:A})},E=C=>{k(C),p("custom"),w(!1),C.startDate&&C.endDate&&s&&s({start:C.startDate,end:C.endDate})},W=()=>{if(!v.startDate||!v.endDate)return"Custom";const C=A=>A.toLocaleDateString("en-GB",{day:"2-digit",month:"short"});return`${C(v.startDate)} - ${C(v.endDate)}`};return e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-wrap justify-end items-center gap-1.5 sm:gap-2 relative",children:[$.map(C=>e.jsx("button",{onClick:()=>T(C.id),className:`px-2 py-1 rounded-lg flex justify-center items-center gap-2.5 cursor-pointer transition-all ${i===C.id?"bg-gradient-to-b from-orange-500 to-amber-500":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:e.jsx("span",{className:`text-sm font-medium font-['Poppins'] ${i===C.id?"text-white":"text-neutral-400 dark:text-gray-300"}`,children:C.label})},C.id)),i==="month"&&e.jsxs("div",{className:"px-2 sm:px-3 py-1 sm:py-1.5 bg-gradient-to-r from-sky-400 to-blue-500 rounded-lg flex justify-center items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>I("prev"),className:"text-white hover:opacity-80",children:e.jsx($s,{size:14})}),e.jsx("span",{className:"text-white text-xs sm:text-sm font-normal font-['Lato'] min-w-[100px] text-center",children:g.toLocaleDateString("en-GB",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>I("next"),className:"text-white hover:opacity-80",children:e.jsx(qe,{size:14})})]}),i==="custom"&&v.startDate&&e.jsx("div",{className:"px-2 sm:px-3 py-1 sm:py-1.5 bg-gradient-to-r from-sky-400 to-blue-500 rounded-lg flex justify-center items-center gap-1",children:e.jsx("span",{className:"text-white text-xs sm:text-sm font-normal font-['Lato']",children:W()})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{w(i==="custom"?!f:!0)},className:`px-2 py-1 rounded-lg flex justify-center items-center gap-1.5 cursor-pointer transition-all ${i==="custom"?"bg-gradient-to-b from-orange-500 to-amber-500":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[e.jsx("span",{className:`text-sm font-medium font-['Poppins'] ${i==="custom"?"text-white":"text-neutral-400 dark:text-gray-300"}`,children:"Custom"}),e.jsx(_e,{size:14,className:`${i==="custom"?"text-white":"text-neutral-400"} ${f?"rotate-180":""} transition-transform`})]}),e.jsx(mr,{isOpen:f,onClose:()=>w(!1),onApply:E,initialDateRange:v})]})]}),e.jsxs("div",{className:"w-full min-h-[280px] sm:min-h-[320px] relative bg-white dark:bg-gray-800 rounded-lg overflow-x-auto overflow-y-visible",children:[e.jsxs("div",{className:"absolute left-0 top-1/3 flex items-center gap-2 z-10",children:[e.jsx("div",{className:"origin-center -rotate-90 text-center text-neutral-600 dark:text-gray-400 text-xs font-normal font-['DM_Sans'] whitespace-nowrap",style:{marginLeft:"-28px"},children:"Units of measure"}),e.jsx("div",{className:"w-px h-40 bg-stone-300 dark:bg-gray-600"})]}),e.jsx("div",{className:"ml-12 mr-4 pt-4 pb-2 flex justify-between items-end gap-2 min-h-[200px]",children:G?Array.from({length:7}).map((C,A)=>e.jsxs("div",{className:"inline-flex flex-col justify-center items-center gap-1",children:[e.jsxs("div",{className:"inline-flex justify-start items-end gap-1",children:[e.jsx("div",{className:"w-6 h-20 bg-gray-200 animate-pulse"}),e.jsx("div",{className:"w-6 h-24 bg-gray-200 animate-pulse"}),e.jsx("div",{className:"w-6 h-28 bg-gray-200 animate-pulse"})]}),e.jsx("div",{className:"w-10 h-3 bg-gray-200 animate-pulse rounded"})]},A)):_.map((C,A)=>e.jsxs("div",{className:"inline-flex flex-col justify-center items-center gap-1",children:[e.jsxs("div",{className:"inline-flex justify-start items-end gap-1",children:[e.jsx("div",{className:"w-7 relative bg-gradient-to-b from-sky-400 to-blue-500 rounded-t-sm flex items-start justify-center pt-2 transition-all duration-300",style:{height:`${L(C.mobile)}px`},children:C.mobile>0&&e.jsx("span",{className:"text-white text-sm font-semibold font-['Lato'] transform -rotate-90 origin-center whitespace-nowrap",children:C.mobile})}),e.jsx("div",{className:"w-7 relative bg-gradient-to-b from-amber-400 to-orange-500 rounded-t-sm flex items-start justify-center pt-2 transition-all duration-300",style:{height:`${L(C.tablet)}px`},children:C.tablet>0&&e.jsx("span",{className:"text-white text-sm font-semibold font-['Lato'] transform -rotate-90 origin-center whitespace-nowrap",children:C.tablet})}),e.jsx("div",{className:"w-7 relative bg-gradient-to-b from-violet-400 to-indigo-600 rounded-t-sm flex items-start justify-center pt-2 transition-all duration-300",style:{height:`${L(C.desktop)}px`},children:C.desktop>0&&e.jsx("span",{className:"text-white text-sm font-semibold font-['Lato'] transform -rotate-90 origin-center whitespace-nowrap",children:C.desktop})})]}),e.jsx("div",{className:"justify-start text-neutral-600 dark:text-gray-400 text-xs font-normal font-['DM_Sans']",children:z(C.date)})]},A))}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-3 sm:gap-6 md:gap-12 px-2 mt-4 pb-4",children:[e.jsxs("div",{className:"flex justify-center items-center gap-1.5 sm:gap-2.5",children:[e.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-r from-sky-400 to-blue-500 rounded-full"}),e.jsx("div",{className:"text-center text-neutral-600 dark:text-gray-400 text-[10px] sm:text-xs font-medium font-['DM_Sans']",children:"Mobile View"})]}),e.jsxs("div",{className:"flex justify-center items-center gap-1.5 sm:gap-2.5",children:[e.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-b from-amber-400 to-orange-500 rounded-full"}),e.jsx("div",{className:"text-center text-neutral-600 dark:text-gray-400 text-[10px] sm:text-xs font-medium font-['DM_Sans']",children:"Tab View"})]}),e.jsxs("div",{className:"flex justify-center items-center gap-1.5 sm:gap-2.5",children:[e.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-b from-violet-400 to-indigo-600 rounded-full"}),e.jsx("div",{className:"text-center text-neutral-600 dark:text-gray-400 text-[10px] sm:text-xs font-medium font-['DM_Sans']",children:"Desktop View"})]})]})]})]})},ul=({orders:a=[],data:t,timeFilter:s="year",selectedMonth:r=new Date})=>{const l=n.useMemo(()=>{const f=new Date().getFullYear();return Array.from({length:5},(w,v)=>f-4+v)},[]),p=n.useMemo(()=>{const f=new Date;if(s==="year"){const w=l.map(v=>({label:String(v),placedOrder:0,delivered:0,canceled:0}));return a.forEach(v=>{const k=v.createdAt?new Date(v.createdAt):null;if(!k)return;const S=k.getFullYear(),F=l.indexOf(S);F>=0&&(w[F].placedOrder++,v.status==="Delivered"&&w[F].delivered++,v.status==="Cancelled"&&w[F].canceled++)}),w}else if(s==="month"||s==="custom"){const w=r.getFullYear(),v=r.getMonth(),k=new Date(w,v+1,0).getDate(),S=Array.from({length:k},(F,G)=>({label:String(G+1),placedOrder:0,delivered:0,canceled:0}));return a.forEach(F=>{const G=F.createdAt?new Date(F.createdAt):null;if(!G||G.getMonth()!==v||G.getFullYear()!==w)return;const q=G.getDate()-1;q>=0&&q<k&&(S[q].placedOrder++,F.status==="Delivered"&&S[q].delivered++,F.status==="Cancelled"&&S[q].canceled++)}),S}else if(s==="day"){const w=Array.from({length:24},(v,k)=>({label:`${k}:00`,placedOrder:0,delivered:0,canceled:0}));return a.forEach(v=>{const k=v.createdAt?new Date(v.createdAt):null;if(!k||k.toDateString()!==f.toDateString())return;const S=k.getHours();w[S].placedOrder++,v.status==="Delivered"&&w[S].delivered++,v.status==="Cancelled"&&w[S].canceled++}),w}else{const w=[];for(let v=11;v>=0;v--){const k=new Date(f.getFullYear(),f.getMonth()-v,1);w.push({label:k.toLocaleString("default",{month:"short"}),placedOrder:0,delivered:0,canceled:0})}return a.forEach(v=>{const k=v.createdAt?new Date(v.createdAt):null;if(k)for(let S=11;S>=0;S--){const F=new Date(f.getFullYear(),f.getMonth()-S,1);if(k.getMonth()===F.getMonth()&&k.getFullYear()===F.getFullYear()){const G=11-S;w[G].placedOrder++,v.status==="Delivered"&&w[G].delivered++,v.status==="Cancelled"&&w[G].canceled++;break}}}),w}},[a,s,r,l]),g=Math.max(100,...p.map(f=>Math.max(f.placedOrder,f.delivered,f.canceled))),u=(f,w,v)=>{const k=f.map((F,G)=>({x:G/(f.length-1)*w,y:v-F/g*v}));if(k.length<2)return"";let S=`M ${k[0].x},${k[0].y}`;for(let F=1;F<k.length;F++)S+=` L ${k[F].x},${k[F].y}`;return S};return e.jsxs("div",{className:"w-full h-80 sm:h-96 p-3 sm:p-4 bg-white dark:bg-gray-800 rounded-xl border border-zinc-200 dark:border-gray-700 flex flex-col justify-start items-start gap-2 overflow-hidden",children:[e.jsx("div",{className:"w-full flex justify-between items-center gap-2.5",children:e.jsx("div",{className:"text-zinc-800 dark:text-white text-lg font-bold font-['Lato']",children:"Sale Performance"})}),e.jsxs("div",{className:"flex flex-wrap justify-start items-center gap-3 sm:gap-6",children:[e.jsx("div",{className:"text-sky-400 text-sm font-bold font-['Poppins']",children:"Placed Order"}),e.jsx("div",{className:"text-orange-500 text-sm font-bold font-['Poppins']",children:"Order Delivered"}),e.jsx("div",{className:"text-red-600 text-sm font-bold font-['Poppins']",children:"Order Cancel"})]}),e.jsxs("div",{className:"flex-1 w-full flex overflow-x-auto",children:[e.jsx("div",{className:"flex flex-col justify-between h-full pr-2",children:[100,75,50,25,0].map(f=>e.jsx("div",{className:"w-6 h-9 opacity-50 text-right text-neutral-900 dark:text-gray-300 text-[10px] font-medium font-['Poppins'] flex items-center justify-end",children:f},f))}),e.jsxs("div",{className:"flex-1 relative",children:[[0,1,2,3,4].map(f=>e.jsx("div",{className:"absolute w-full h-0 outline outline-1 outline-offset-[-0.50px] outline-zinc-300 dark:outline-gray-600",style:{top:`${f*25}%`}},f)),e.jsxs("svg",{className:"w-full h-full absolute top-0 left-0",viewBox:"0 0 700 180",preserveAspectRatio:"none",children:[e.jsx("path",{d:u(p.map(f=>f.placedOrder),700,180),fill:"none",stroke:"#38BDF8",strokeWidth:"2"}),e.jsx("path",{d:u(p.map(f=>f.delivered),700,180),fill:"none",stroke:"#F97316",strokeWidth:"2"}),e.jsx("path",{d:u(p.map(f=>f.canceled),700,180),fill:"none",stroke:"#B91C1C",strokeWidth:"2"})]})]})]}),e.jsx("div",{className:"w-full pl-8 inline-flex justify-between items-center",children:p.map((f,w)=>e.jsx("div",{className:"opacity-50 text-neutral-900 dark:text-gray-300 text-[10px] font-medium font-['Poppins']",children:f.label},w))})]})},ar=[{color:"#4F46E5",bgColor:"bg-indigo-600",textColor:"text-indigo-600"},{color:"#FB923C",bgColor:"bg-orange-400",textColor:"text-orange-400"},{color:"#FCA5A5",bgColor:"bg-red-300",textColor:"text-red-300"},{color:"#EF4444",bgColor:"bg-red-500",textColor:"text-red-500"},{color:"#A3E635",bgColor:"bg-lime-400",textColor:"text-lime-400"},{color:"#38BDF8",bgColor:"bg-sky-400",textColor:"text-slate-600"},{color:"#A21CAF",bgColor:"bg-fuchsia-700",textColor:"text-fuchsia-700"},{color:"#059669",bgColor:"bg-emerald-600",textColor:"text-emerald-600"},{color:"#7C3AED",bgColor:"bg-violet-600",textColor:"text-violet-600"},{color:"#DB2777",bgColor:"bg-pink-600",textColor:"text-pink-600"}],gl=[{name:"Hair care",percentage:15,color:"#4F46E5",bgColor:"bg-indigo-600",textColor:"text-indigo-600"},{name:"Serum",percentage:15,color:"#FB923C",bgColor:"bg-orange-400",textColor:"text-orange-400"},{name:"Cream",percentage:15,color:"#FCA5A5",bgColor:"bg-red-300",textColor:"text-red-300"},{name:"Home & kitchen",percentage:15,color:"#EF4444",bgColor:"bg-red-500",textColor:"text-red-500"},{name:"Lip care",percentage:15,color:"#A3E635",bgColor:"bg-lime-400",textColor:"text-lime-400"},{name:"Air Conditioner",percentage:15,color:"#38BDF8",bgColor:"bg-sky-400",textColor:"text-slate-600"},{name:"Skin care",percentage:10,color:"#A21CAF",bgColor:"bg-fuchsia-700",textColor:"text-fuchsia-700"}],fl=({categories:a,orders:t=[]})=>{const s=n.useMemo(()=>{if(a)return a;if(t.length===0)return gl;const g={};t.forEach(w=>{const v=Array.isArray(w.items)?w.items:[];if(v.length>0)v.forEach(k=>{const S=k.category||k.productName||"Other";g[S]=(g[S]||0)+(k.quantity||1)});else{const k=w.productName||"Uncategorized";g[k]=(g[k]||0)+(w.quantity||1)}});const u=Object.values(g).reduce((w,v)=>w+v,0);return Object.entries(g).sort(([,w],[,v])=>v-w).slice(0,7).map(([w,v],k)=>({name:w,percentage:Math.round(v/u*100),...ar[k%ar.length]}))},[a,t]);let r=0;const l=s.map(g=>{const u=g.percentage/100*360,f={...g,startAngle:r,endAngle:r+u,angle:u};return r+=u,f}),i=(g,u,f,w=0)=>{const v=p(100,100,f,u),k=p(100,100,f,g),S=u-g<=180?"0":"1";if(w>0){const F=p(100,100,w,u),G=p(100,100,w,g);return["M",v.x,v.y,"A",f,f,0,S,0,k.x,k.y,"L",G.x,G.y,"A",w,w,0,S,1,F.x,F.y,"Z"].join(" ")}else return["M",v.x,v.y,"A",f,f,0,S,0,k.x,k.y,"L",100,100,"Z"].join(" ")},p=(g,u,f,w)=>{const v=(w-90)*Math.PI/180;return{x:g+f*Math.cos(v),y:u+f*Math.sin(v)}};return e.jsxs("div",{className:"w-full h-auto min-h-[380px] sm:h-[402px] p-4 sm:p-5 bg-white dark:bg-gray-800 rounded-xl border border-zinc-200 dark:border-gray-700 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"text-zinc-800 dark:text-white text-lg font-bold font-['Lato']",children:"Sale By Category"})}),e.jsx("div",{className:"flex-shrink-0 w-36 h-36 sm:w-48 sm:h-48 mx-auto overflow-hidden",children:e.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 200 200",className:"transform -rotate-90",children:l.map((g,u)=>e.jsx("path",{d:i(g.startAngle,g.endAngle,90,50),fill:g.color},u))})}),e.jsx("div",{className:"mt-2 sm:mt-3 grid grid-cols-2 gap-x-2 gap-y-1 sm:gap-x-4 sm:gap-y-1.5",children:s.map((g,u)=>e.jsxs("div",{className:"flex justify-start items-center gap-1.5 sm:gap-2.5",children:[e.jsx("div",{className:`w-2.5 h-2.5 sm:w-3 sm:h-3 ${g.bgColor} rounded-full flex-shrink-0`}),e.jsxs("div",{className:"justify-start truncate",children:[e.jsxs("span",{className:"text-black dark:text-gray-300 text-xs sm:text-sm font-medium font-['Satoshi']",children:[g.name,"("]}),e.jsxs("span",{className:`${g.textColor} text-xs sm:text-sm font-medium font-['Satoshi']`,children:[g.percentage,"%"]}),e.jsx("span",{className:"text-black dark:text-gray-300 text-xs sm:text-sm font-medium font-['Satoshi']",children:")"})]})]},u))})]})},si=({isOpen:a,onClose:t})=>{const[s,r]=n.useState(!1),[l,i]=n.useState("idle"),[p,g]=n.useState({name:"",email:"",plan:"professional",duration:"12 months",message:""}),u=a!==void 0,f=u?a:s;n.useEffect(()=>{if(!u){const S=setTimeout(()=>r(!0),1e3);return()=>clearTimeout(S)}},[u]);const w=S=>{S.preventDefault(),i("submitting");const F=`🔔 Subscription Renewal Request

📋 *Customer Details:*
• Name: ${p.name}
• Email: ${p.email}

📦 *Subscription Details:*
• Plan: ${p.plan.charAt(0).toUpperCase()+p.plan.slice(1)}
• Duration: ${p.duration}

${p.message?`💬 *Additional Requests:*
${p.message}`:""}

---
Sent from SystemNext IT Dashboard`,q=`https://wa.me/8801410050031?text=${encodeURIComponent(F)}`;window.open(q,"_blank"),setTimeout(()=>{i("success")},500)},v=()=>{u&&t?t():r(!1),setTimeout(()=>i("idle"),300)},k=Array.from({length:12},(S,F)=>{const G=F+1;return`${G} month${G>1?"s":""}`});return!f&&l!=="success"?u?null:e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:e.jsx("button",{onClick:()=>r(!0),className:"px-6 py-3 bg-orange-500 text-white font-semibold rounded-lg shadow-lg hover:bg-orange-600 transition-all active:scale-95",children:"Renew Subscription"})}):e.jsxs("div",{className:"fixed inset-0 z-[100000] flex items-center justify-center p-4 sm:p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm transition-opacity duration-300",onClick:v}),e.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl overflow-hidden transform transition-all duration-300 scale-100 flex flex-col md:flex-row",children:[e.jsxs("div",{className:"hidden md:flex md:w-5/12 bg-gradient-to-b from-orange-500 to-amber-500 p-4 sm:p-6 lg:p-8 flex-col justify-between text-white",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(nr,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"font-bold text-xl tracking-tight",children:"SystemNext IT"})]}),e.jsx("h2",{className:"text-2xl font-bold leading-tight mb-4",children:"Don't lose your progress."}),e.jsx("p",{className:"text-orange-50 text-sm leading-relaxed mb-6",children:"Renew Your Package now to maintain priority support and uninterrupted services."}),e.jsxs("ul",{className:"space-y-4",children:[e.jsxs("li",{className:"flex items-center gap-3 text-sm",children:[e.jsx(Vt,{className:"w-5 h-5 text-orange-200"}),e.jsx("span",{children:"Locked-in price for selected duration"})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm",children:[e.jsx(Vt,{className:"w-5 h-5 text-orange-200"}),e.jsx("span",{children:"Premium API access"})]})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex -space-x-2",children:[1,2,3].map(S=>e.jsxs("div",{className:"w-8 h-8 rounded-full border-2 border-orange-500 bg-orange-400 flex items-center justify-center text-[10px] font-bold",children:["U",S]},S))}),e.jsx("span",{className:"text-xs text-orange-50",children:"Joined by 2k+ teams"})]})})]}),e.jsxs("div",{className:"flex-1 p-4 sm:p-6 sm:p-8 bg-white",children:[e.jsx("button",{onClick:v,className:"absolute top-4 right-4 p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(ge,{className:"w-5 h-5"})}),l==="success"?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center py-12 animate-in fade-in zoom-in duration-300",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Vt,{className:"w-10 h-10 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Request Sent!"}),e.jsxs("p",{className:"text-slate-500 text-sm mb-6",children:["Your renewal request for ",p.duration," of the ",p.plan," plan has been sent via WhatsApp. Our team will respond shortly."]}),e.jsx("button",{onClick:v,className:"w-full py-3 bg-slate-900 text-white font-semibold rounded-lg hover:bg-slate-800 transition-colors",children:"Got it, thanks!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Renew Subscription"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Contact our sales team for renewal options."})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Full Name"}),e.jsx("input",{required:!0,type:"text",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all text-sm",placeholder:"Jane Doe",value:p.name,onChange:S=>g({...p,name:S.target.value})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Work Email"}),e.jsx("input",{required:!0,type:"email",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all text-sm",placeholder:"jane@company.com",value:p.email,onChange:S=>g({...p,email:S.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Plan Tier"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all text-sm appearance-none cursor-pointer",value:p.plan,onChange:S=>g({...p,plan:S.target.value}),children:[e.jsx("option",{value:"starter",children:"Starter"}),e.jsx("option",{value:"professional",children:"Professional"}),e.jsx("option",{value:"enterprise",children:"Enterprise"})]}),e.jsx(_e,{className:"w-4 h-4 text-slate-400 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Duration"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all text-sm appearance-none cursor-pointer",value:p.duration,onChange:S=>g({...p,duration:S.target.value}),children:k.map(S=>e.jsx("option",{value:S,children:S},S))}),e.jsx(_e,{className:"w-4 h-4 text-slate-400 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Specific Requests (Optional)"}),e.jsx("textarea",{className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all text-sm resize-none h-24",placeholder:"Do you need more seats or specific billing cycles?",value:p.message,onChange:S=>g({...p,message:S.target.value})})]}),e.jsx("button",{disabled:l==="submitting",type:"submit",className:"w-full py-3 bg-orange-500 text-white font-bold rounded-lg shadow-lg shadow-orange-100 hover:bg-orange-600 disabled:opacity-70 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:l==="submitting"?e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_s,{className:"w-4 h-4"}),"Send Renewal Request"]})}),e.jsx("p",{className:"text-[10px] text-center text-slate-400",children:"By submitting, you agree to our Terms of Service and Privacy Policy."})]})]})]})]})]})};export{Ml as A,Ds as C,Es as D,Wt as E,Yl as F,gt as I,Gl as L,si as R,oo as a,ho as b,Vl as c,ql as d,ko as e,na as f,Wl as g,Xa as h,Zn as i,Ul as j,Kl as k,Fl as l,Rl as m,zl as n,Bl as o,Ol as p,$l as q,Jl as r,Ss as s,Zl as t,Hl as u,Ql as v,Xl as w,ei as x,ti as y};
