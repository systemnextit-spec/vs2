import{j as e}from"./react-jsx-runtime-BBsywpoz.js";import{r as m}from"./react-core-KcGD0Z1V.js";import{C as Q,S as _,Z as $,_ as V,T as k,z as D,I as W,U as A,$ as Z}from"./icons-chunk-AVFeydwE.js";const y=()=>crypto?.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2)}`,C=({title:d,isCollapsed:h,onToggle:x})=>e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("p",{className:"font-bold text-[#023337] text-[20px]",children:d}),e.jsx("button",{type:"button",onClick:x,className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600",children:e.jsx(Z,{size:20})})]}),i=({label:d,value:h,onChange:x,placeholder:b="Enter Text",required:a=!1,type:c="text"})=>e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsxs("p",{className:"font-bold text-[#023337] text-[15px]",children:[d,a&&e.jsx("span",{className:"text-[#da0000]",children:"*"})]}),e.jsx("input",{type:c,value:h,onChange:f=>x(f.target.value),placeholder:b,className:"bg-[#f9fafb] border border-[#e5e7eb] rounded-lg px-3 py-2.5 text-[15px] text-gray-900 placeholder-[#aeaeae] focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),G=({label:d,imageUrl:h,onUpload:x,aspectRatio:b="1:1.6 aspect ratio (855×1386 pixels)"})=>{const a=m.useRef(null),[c,f]=m.useState(!1),p=async u=>{const n=u.target.files?.[0];if(n){f(!0);try{const j=new FormData;j.append("file",n);const l=await fetch("https://allinbangla.com/api/cloudflare/upload",{method:"POST",body:j});if(l.ok){const r=await l.json();x(r.url)}}catch(j){console.error("Upload failed:",j)}finally{f(!1)}}};return e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsx("p",{className:"font-bold text-[#023337] text-[15px]",children:d}),e.jsx("div",{className:"bg-[#f9fafb] border border-[#e5e7eb] rounded-lg p-3 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"flex flex-col gap-3 items-center w-full max-w-[320px]",children:[h?e.jsx("img",{src:h,alt:"Uploaded",className:"w-[76px] h-[76px] object-cover rounded-lg"}):e.jsx("div",{className:"w-[76px] h-[76px] bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(A,{size:32,className:"text-gray-400"})}),e.jsxs("p",{className:"text-[#a2a2a2] text-[12px] text-center",children:["Note: Use images with a ",b]}),e.jsx("input",{ref:a,type:"file",accept:"image/*",onChange:p,className:"hidden"}),e.jsx("button",{type:"button",onClick:()=>a.current?.click(),disabled:c,className:"bg-[#ff9f1c] text-white font-semibold text-[14px] px-4 py-2 rounded-lg hover:bg-[#e8901a] disabled:opacity-50",children:c?"Uploading...":"Add Image"})]})})]})},J=({images:d,onAddImage:h,maxImages:x})=>{const b=m.useRef(null),[a,c]=m.useState(!1),f=async p=>{const u=p.target.files?.[0];if(!(!u||d.length>=x)){c(!0);try{const n=new FormData;n.append("file",u);const v=await fetch("https://allinbangla.com/api/cloudflare/upload",{method:"POST",body:n});if(v.ok){const l=await v.json();h(l.url)}}catch(n){console.error("Upload failed:",n)}finally{c(!1)}}};return e.jsx("div",{className:"bg-[#f9fafb] border border-[#e5e7eb] rounded-lg p-3 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"flex flex-col gap-3 items-center w-full max-w-[320px]",children:[d.length>0?e.jsx("div",{className:"flex gap-2 flex-wrap justify-center",children:d.map((p,u)=>e.jsx("img",{src:p,alt:"",className:"w-16 h-16 object-cover rounded"},u))}):e.jsx("div",{className:"w-[76px] h-[76px] bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(A,{size:32,className:"text-gray-400"})}),e.jsx("p",{className:"text-[#a2a2a2] text-[12px] text-center",children:"Note: Use images with a 1:1.6 aspect ratio (855×1386 pixels.)"}),e.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:f,className:"hidden"}),e.jsx("button",{type:"button",onClick:()=>b.current?.click(),disabled:a||d.length>=x,className:"bg-[#ff9f1c] text-white font-semibold text-[14px] px-4 py-2 rounded-lg hover:bg-[#e8901a] disabled:opacity-50",children:a?"Uploading...":"Add Image"})]})})},ee=({products:d,tenantId:h,onSave:x,onCancel:b,initialData:a})=>{const[c,f]=m.useState(""),[p,u]=m.useState(!1),[n,j]=m.useState({basic:!1,offer:!1,benefits:!1,faq:!1,review:!1,video:!1,theme:!1}),v=new Date;v.setDate(v.getDate()+7);const[l,r]=m.useState({productId:a?.productId??null,productTitle:a?.productTitle??"",imageUrl:a?.imageUrl??"",productImages:a?.productImages??[],description:a?.description??"",price:a?.price,originalPrice:a?.originalPrice,offerEndDate:a?.offerEndDate??v.toISOString().split("T")[0],productOfferInfo:a?.productOfferInfo??"",paymentSectionTitle:a?.paymentSectionTitle??"",benefits:a?.benefits??[{id:y(),text:""}],whyBuySection:a?.whyBuySection??"",faqHeadline:a?.faqHeadline??"Frequently Asked Questions",faqs:a?.faqs??[{id:y(),question:"",answer:""}],reviewHeadline:a?.reviewHeadline??"Customer Reviews",reviews:a?.reviews??[{id:y(),name:"",quote:"",rating:5}],videoLink:a?.videoLink??"",backgroundColor:a?.backgroundColor??"#FFFFFF",textColor:a?.textColor??"#000000",urlSlug:a?.urlSlug??"",status:a?.status??"draft"}),F=d.filter(s=>s.name.toLowerCase().includes(c.toLowerCase())),w=s=>{j(t=>({...t,[s]:!t[s]}))},U=s=>s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),E=()=>{r(s=>({...s,benefits:[...s.benefits,{id:y(),text:""}]}))},L=(s,t)=>{r(o=>({...o,benefits:o.benefits.map(g=>g.id===s?{...g,text:t}:g)}))},H=s=>{l.benefits.length>1&&r(t=>({...t,benefits:t.benefits.filter(o=>o.id!==s)}))},z=()=>{r(s=>({...s,faqs:[...s.faqs,{id:y(),question:"",answer:""}]}))},T=(s,t,o)=>{r(g=>({...g,faqs:g.faqs.map(N=>N.id===s?{...N,[t]:o}:N)}))},B=s=>{l.faqs.length>1&&r(t=>({...t,faqs:t.faqs.filter(o=>o.id!==s)}))},R=()=>{r(s=>({...s,reviews:[...s.reviews,{id:y(),name:"",quote:"",rating:5}]}))},S=(s,t,o)=>{r(g=>({...g,reviews:g.reviews.map(N=>N.id===s?{...N,[t]:o}:N)}))},M=s=>{l.reviews.length>1&&r(t=>({...t,reviews:t.reviews.filter(o=>o.id!==s)}))},O=s=>{l.productImages.length<4&&r(t=>({...t,productImages:[...t.productImages,s]}))},[q,I]=m.useState([]),P=async s=>{const t=[];if(l.productTitle?.trim()||t.push("Product title is required"),l.imageUrl?.trim()||t.push("Main image is required"),l.description?.trim()||t.push("Description is required"),l.offerEndDate||t.push("Offer end date is required"),t.length>0){I(t);return}I([]),u(!0);try{await x({...l,status:s})}catch(o){console.error("Error saving:",o),I([o instanceof Error?o.message:"Failed to save landing page"])}finally{u(!1)}};return e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden min-h-screen",children:[e.jsx("div",{className:"px-4 py-4 sm:py-6",children:e.jsx("button",{type:"button",onClick:b,className:"flex items-center text-gray-600 hover:text-gray-900",children:e.jsx(Q,{size:20})})}),e.jsxs("div",{className:"px-4 pb-6",children:[e.jsxs("div",{className:"bg-[#f2f2f2] rounded-lg flex items-center px-3 py-2",children:[e.jsx(_,{size:20,className:"text-gray-400 mr-2"}),e.jsx("input",{type:"text",value:c,onChange:s=>f(s.target.value),placeholder:"Product Name",className:"flex-1 bg-transparent text-[12px] text-gray-600 placeholder-[#a2a2a2] outline-none"}),e.jsx("span",{className:"text-[12px] text-black cursor-pointer",children:"Search"})]}),c&&e.jsx("div",{className:"mt-2 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto",children:F.length===0?e.jsx("p",{className:"p-3 text-gray-500 text-sm",children:"No products found"}):F.slice(0,5).map(s=>e.jsxs("button",{type:"button",onClick:()=>{r(t=>({...t,productId:s.id,productTitle:s.name,imageUrl:s.image||"",price:s.price,originalPrice:s.originalPrice||s.price,urlSlug:U(s.name)})),f("")},className:"w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center gap-2",children:[s.image&&e.jsx("img",{src:s.image,alt:"",className:"w-8 h-8 object-cover rounded"}),e.jsx("span",{className:"text-sm",children:s.name})]},s.id))})]}),e.jsxs("div",{className:"px-4 space-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"text-[#023337]",size:20}),e.jsx("p",{className:"font-bold text-[#023337] text-[20px]",children:"Basic Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Product Title",value:l.productTitle,onChange:s=>r(t=>({...t,productTitle:s,urlSlug:t.urlSlug||U(s)})),placeholder:"Enter product title",required:!0}),e.jsx(i,{label:"URL Slug",value:l.urlSlug,onChange:s=>r(t=>({...t,urlSlug:s})),placeholder:"product-url-slug",required:!0})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(G,{label:"Main Image",imageUrl:l.imageUrl,onUpload:s=>r(t=>({...t,imageUrl:s}))})}),e.jsx("div",{className:"flex-1 space-y-4",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("p",{className:"font-bold text-[#023337] text-[15px]",children:["Description",e.jsx("span",{className:"text-[#da0000]",children:"*"})]}),e.jsx("textarea",{value:l.description,onChange:s=>r(t=>({...t,description:s.target.value})),placeholder:"Enter product description",rows:4,className:"bg-[#f9fafb] border border-[#e5e7eb] rounded-lg px-3 py-2.5 text-[15px] text-gray-900 placeholder-[#aeaeae] focus:outline-none focus:ring-2 focus:ring-blue-200 resize-none"})]})})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"text-[#023337]",size:20}),e.jsx("p",{className:"font-bold text-[#023337] text-[20px]",children:"Pricing & Offer"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(i,{label:"Sale Price",value:l.price?.toString()||"",onChange:s=>r(t=>({...t,price:parseFloat(s)||void 0})),placeholder:"0.00",type:"number"}),e.jsx(i,{label:"Original Price",value:l.originalPrice?.toString()||"",onChange:s=>r(t=>({...t,originalPrice:parseFloat(s)||void 0})),placeholder:"0.00",type:"number"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("p",{className:"font-bold text-[#023337] text-[15px]",children:["Offer End Date",e.jsx("span",{className:"text-[#da0000]",children:"*"})]}),e.jsx("input",{type:"date",value:l.offerEndDate,onChange:s=>r(t=>({...t,offerEndDate:s.target.value})),className:"bg-[#f9fafb] border border-[#e5e7eb] rounded-lg px-3 py-2.5 text-[15px] text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-200"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("p",{className:"font-bold text-[#023337] text-[15px]",children:"Offer Details (HTML supported)"}),e.jsx("textarea",{value:l.productOfferInfo,onChange:s=>r(t=>({...t,productOfferInfo:s.target.value})),placeholder:"Enter offer details, special discounts, etc.",rows:3,className:"bg-[#f9fafb] border border-[#e5e7eb] rounded-lg px-3 py-2.5 text-[15px] text-gray-900 placeholder-[#aeaeae] focus:outline-none focus:ring-2 focus:ring-blue-200 resize-none"})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("p",{className:"font-bold text-[#023337] text-[15px]",children:"Payment Section Title (HTML supported)"}),e.jsx("textarea",{value:l.paymentSectionTitle,onChange:s=>r(t=>({...t,paymentSectionTitle:s.target.value})),placeholder:"Custom payment section heading",rows:2,className:"bg-[#f9fafb] border border-[#e5e7eb] rounded-lg px-3 py-2.5 text-[15px] text-gray-900 placeholder-[#aeaeae] focus:outline-none focus:ring-2 focus:ring-blue-200 resize-none"})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 items-end",children:[e.jsx(C,{title:"Product Benefits",isCollapsed:n.benefits,onToggle:()=>w("benefits")}),!n.benefits&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col gap-3 w-full",children:l.benefits.map((s,t)=>e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"flex-1",children:e.jsx(i,{label:`Benefit ${t+1}`,value:s.text,onChange:o=>L(s.id,o),placeholder:"Enter benefit text"})}),e.jsx("button",{type:"button",onClick:()=>H(s.id),className:"mt-9 text-red-500 hover:text-red-700",children:e.jsx(k,{size:20})})]},s.id))}),e.jsx("button",{type:"button",onClick:E,className:"bg-[#ff9f1c] text-white font-semibold text-[14px] px-4 py-2 rounded-lg hover:bg-[#e8901a]",children:"Add More"})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"text-[#023337]",size:20}),e.jsx("p",{className:"font-bold text-[#023337] text-[20px]",children:"Why Buy From Us"})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("p",{className:"font-bold text-[#023337] text-[15px]",children:"Content (HTML supported)"}),e.jsx("textarea",{value:l.whyBuySection,onChange:s=>r(t=>({...t,whyBuySection:s.target.value})),placeholder:"Enter why customers should buy from you",rows:4,className:"bg-[#f9fafb] border border-[#e5e7eb] rounded-lg px-3 py-2.5 text-[15px] text-gray-900 placeholder-[#aeaeae] focus:outline-none focus:ring-2 focus:ring-blue-200 resize-none"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"text-[#023337]",size:20}),e.jsx("p",{className:"font-bold text-[#023337] text-[15px]",children:"Additional Product Images"})]}),e.jsxs("p",{className:"font-bold text-[#023337] text-[15px]",children:["(",l.productImages.length,"/4)"]})]}),e.jsx(J,{images:l.productImages,onAddImage:O,maxImages:4})]}),e.jsxs("div",{className:"flex flex-col gap-4 items-end",children:[e.jsx(C,{title:"FAQ Section",isCollapsed:n.faq,onToggle:()=>w("faq")}),!n.faq&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full",children:e.jsx(i,{label:"FAQ Headline",value:l.faqHeadline,onChange:s=>r(t=>({...t,faqHeadline:s}))})}),e.jsx("div",{className:"flex flex-col gap-3 w-full",children:l.faqs.map(s=>e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"flex-1",children:e.jsx(i,{label:"FAQ Question",value:s.question,onChange:t=>T(s.id,"question",t)})}),e.jsx("div",{className:"flex-1",children:e.jsx(i,{label:"FAQ Answer",value:s.answer,onChange:t=>T(s.id,"answer",t)})}),e.jsx("button",{type:"button",onClick:()=>B(s.id),className:"mt-9 text-red-500 hover:text-red-700",children:e.jsx(k,{size:20})})]},s.id))}),e.jsx("button",{type:"button",onClick:z,className:"bg-[#ff9f1c] text-white font-semibold text-[14px] px-4 py-2 rounded-lg hover:bg-[#e8901a]",children:"Add More"})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 items-end",children:[e.jsx(C,{title:"Review Section",isCollapsed:n.review,onToggle:()=>w("review")}),!n.review&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full",children:e.jsx(i,{label:"Review Headline",value:l.reviewHeadline,onChange:s=>r(t=>({...t,reviewHeadline:s}))})}),e.jsx("div",{className:"flex flex-col gap-3 w-full",children:l.reviews.map(s=>e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"flex-1",children:e.jsx(i,{label:"Name",value:s.name,onChange:t=>S(s.id,"name",t)})}),e.jsx("div",{className:"flex-1",children:e.jsx(i,{label:"Quote",value:s.quote,onChange:t=>S(s.id,"quote",t)})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("p",{className:"font-bold text-[#023337] text-[15px]",children:"Rating"}),e.jsx("input",{type:"number",min:1,max:5,value:s.rating,onChange:t=>S(s.id,"rating",parseInt(t.target.value)||5),className:"bg-[#f9fafb] border border-[#e5e7eb] rounded-lg w-12 h-12 text-center text-[15px] text-[#aeaeae]"})]}),e.jsx("button",{type:"button",onClick:()=>M(s.id),className:"mt-9 text-red-500 hover:text-red-700",children:e.jsx(k,{size:20})})]},s.id))}),e.jsx("button",{type:"button",onClick:R,className:"bg-[#ff9f1c] text-white font-semibold text-[14px] px-4 py-2 rounded-lg hover:bg-[#e8901a]",children:"Add More"})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 items-end",children:[e.jsx(C,{title:"Video Section",isCollapsed:n.video,onToggle:()=>w("video")}),!n.video&&e.jsx("div",{className:"w-full",children:e.jsx(i,{label:"Video Link",value:l.videoLink,onChange:s=>r(t=>({...t,videoLink:s}))})})]}),e.jsxs("div",{className:"flex flex-col gap-4 items-end",children:[e.jsx(C,{title:"Theme Section",isCollapsed:n.theme,onToggle:()=>w("theme")}),!n.theme&&e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx("div",{className:"flex-1",children:e.jsx(i,{label:"Background Colour",value:l.backgroundColor,onChange:s=>r(t=>({...t,backgroundColor:s})),placeholder:"#FFFFFF"})}),e.jsx("div",{className:"flex-1",children:e.jsx(i,{label:"Text Colour",value:l.textColor,onChange:s=>r(t=>({...t,textColor:s})),placeholder:"#000000"})})]})]})]}),q.length>0&&e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"font-semibold text-red-700 mb-2",children:"Please fix the following errors:"}),e.jsx("ul",{className:"list-disc list-inside text-red-600 text-sm space-y-1",children:q.map((s,t)=>e.jsx("li",{children:s},t))})]})}),e.jsxs("div",{className:"px-4 py-8 flex justify-end gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>P("draft"),disabled:p,className:"flex-1 max-w-[180px] bg-[#f9f9f9] text-[#070606] font-semibold text-[14px] px-2 py-3 rounded-lg flex items-center justify-center gap-1 hover:bg-gray-200 disabled:opacity-50",children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 12H15M9 16H12M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M14 2V8H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Draft"]}),e.jsx("button",{type:"button",onClick:()=>P("published"),disabled:p,className:"flex-1 max-w-[180px] bg-gradient-to-r from-[#38bdf8] to-[#1e90ff] text-white font-semibold text-[15px] px-2 py-3 rounded-lg hover:opacity-90 disabled:opacity-50",children:p?"Saving...":"Publish"})]})]})};export{ee as C};
